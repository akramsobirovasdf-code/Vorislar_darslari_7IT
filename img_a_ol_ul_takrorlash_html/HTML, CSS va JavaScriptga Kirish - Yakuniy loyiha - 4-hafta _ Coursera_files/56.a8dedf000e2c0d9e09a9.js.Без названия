(window.webpackJsonp=window.webpackJsonp||[]).push([[56],{"2Kkf":function(module,e,n){"use strict";var t=n("17x9"),a=n.n(t),i=n("MnCE"),r=n("8cuT"),o=n("qyGb"),s=n("fH9y"),c=n("Ezgt"),d=Object(i.b)(Object(i.c)({executeAction:a.a.func.isRequired}),Object(r.a)(["CourseStore"],(function(e,n){var t=e.CourseStore,a=n.executeAction,i=t.getCourseId(),r=t.getCourseSlug();return{refreshCourseProgress:function(){a(s.b,{courseId:i}),a(c.a,{courseId:i,refreshProgress:!0}),a(o.a,{courseSlug:r,refetch:!0})}}})));e.a=d},"46xw":function(module,exports,e){e("j5nu")},"5B3L":function(module,e,n){"use strict";var t,a=n("q1tI"),i=n.n(a),r=n("MnCE"),o=n("8cuT"),s=n("Y74u"),c=n("sQ/U"),d=n("QILm"),l=n.n(d),u=n("fsL8"),m=n.n(u),p=n("yXPU"),f=n.n(p),g=n("J4zp"),v=n.n(g),h=n("/MKj"),b=n("DU3t"),k=n("ANjH"),C=n("lSNA"),S=n.n(C),y=n("3tO9"),O=n.n(y),createReducer=function(e,n,t){return e[t.type]?e[t.type](n,t):n},I=n("fNnY"),w={showChat:!1,isFullScreen:!1,disabledInput:!1,messageLoader:!1},j=S()(S()(S()(S()(S()(S()({},I.v,(function(e){return e.isFullScreen?O()(O()({},e),{},{showChat:!e.showChat,isFullScreen:!1}):O()(O()({},e),{},{showChat:!e.showChat})})),I.p,(function(e){return O()(O()({},e),{},{showChat:!0})})),I.f,(function(e){return O()(O()({},e),{},{showChat:!1})})),I.w,(function(e){return O()(O()({},e),{},{isFullScreen:!e.isFullScreen})})),I.x,(function(e,n){var t=n.isDisabled;return O()(O()({},e),{},{disabledInput:t})})),I.i,(function(e,n){var t=n.messageLoader;return O()(O()({},e),{},{messageLoader:t})})),x={inputText:""},E=S()({},I.u,(function(e,n){return O()(O()({},e),{},{inputText:n.inputText})})),N=n("RIqP"),A=n.n(N),T=n("ntUh"),R=n("mtOI");function createNewMessage(e){var n=e.text,t=e.sender,a=e.id,i=e.clipRecommendations,r=e.userFeedback,o=e.timestamp,s=e.recommendedActions,c=e.action,d=e.navigationButtons;return{type:T.c.TEXT,component:R.f,text:n,sender:t,timestamp:o?new Date(o):new Date,showAvatar:!0,customId:a,unread:t===T.d.RESPONSE,clipRecommendations:i,userFeedback:r,recommendedActions:s,action:c,navigationButtons:d}}function createLinkSnippet(e,n){return{type:T.c.SNIPPET.LINK,component:R.k,title:e.title,link:e.link,target:e.target||"_blank",sender:T.d.RESPONSE,timestamp:new Date,showAvatar:!0,customId:n,unread:!0}}function createComponentMessage(e,n,t,a){return{type:T.c.CUSTOM_COMPONENT,component:e,props:n,sender:T.d.RESPONSE,timestamp:new Date,showAvatar:t,customId:a,unread:!0}}var M={messages:[],chatSessionId:null,historicalMessagesMap:{},badgeCount:0},P=(t={},S()(S()(S()(S()(S()(S()(S()(S()(S()(S()(t,I.y,(function(e,n){var t=n.messages.map((function(e){return createNewMessage(e)}));return O()(O()({},e),{},{messages:t,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",t))})})),I.d,(function(e,n){var t=n.text,a=n.id,i=n.timestamp,r=n.action,o=[].concat(A()(e.messages),[createNewMessage({text:t,sender:T.d.CLIENT,id:a,timestamp:i,action:r})]);return O()(O()({},e),{},{messages:o,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",o))})})),I.c,(function(e,n){var t=n.text,a=n.id,i=n.clipRecommendations,r=n.userFeedback,o=n.timestamp,s=n.recommendedActions,c=n.navigationButtons,d=[].concat(A()(e.messages),[createNewMessage({text:t,sender:T.d.RESPONSE,id:a,clipRecommendations:i,userFeedback:r,timestamp:o,recommendedActions:s,navigationButtons:c})]);return O()(O()({},e),{},{messages:d,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",d)),badgeCount:e.badgeCount+1})})),I.b,(function(e,n){var t=n.link,a=n.id,i=[].concat(A()(e.messages),[createLinkSnippet(t,a)]);return O()(O()({},e),{},{messages:i,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",i))})})),I.a,(function(e,n){var t=n.component,a=n.props,i=n.showAvatar,r=n.id,o=[].concat(A()(e.messages),[createComponentMessage(t,a,i,r)]);return O()(O()({},e),{},{messages:o,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",o))})})),I.h,(function(e){return O()(O()({},e),{},{messages:[],historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",[])),badgeCount:0})})),I.m,(function(e,n){var t=n.index;e.messages[t].showAvatar=!1;var a=e.historicalMessagesMap[e.chatSessionId||""];a&&(a[t].showAvatar=!1)})),I.g,(function(e,n){var t=n.count,a=n.id,i=a?e.messages.filter((function(_,n){var i=e.messages.findIndex((function(e){return e.customId===a}));return n<i-t+1||n>i})):e.messages.slice(0,e.messages.length-t);return O()(O()({},e),{},{messages:i,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",i)),badgeCount:i.filter((function(e){return e.unread})).length})})),I.q,(function(e,n){var t=n.count;return O()(O()({},e),{},{badgeCount:t})})),I.n,(function(e){var n=e.messages.map((function(e){return O()(O()({},e),{},{unread:!1})}));return O()(O()({},e),{},{messages:n,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",n)),badgeCount:0})})),S()(S()(S()(S()(t,I.j,(function(e,n){var t=n.id,a=e.messages.map((function(e){return O()(O()({},e),{},{userFeedback:t===e.customId?T.a.like:e.userFeedback})}));return O()(O()({},e),{},{messages:a,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",a))})})),I.k,(function(e,n){var t=n.id,a=e.messages.map((function(e){return O()(O()({},e),{},{userFeedback:t===e.customId?T.a.dislike:e.userFeedback})}));return O()(O()({},e),{},{messages:a,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",a))})})),I.l,(function(e,n){var t=n.id,a=e.messages.map((function(e){return O()(O()({},e),{},{userFeedback:t===e.customId?T.a.unset:e.userFeedback})}));return O()(O()({},e),{},{messages:a,historicalMessagesMap:O()(O()({},e.historicalMessagesMap),{},S()({},e.chatSessionId||"",a))})})),I.r,(function(e,n){var t=n.chatSessionId;return O()(O()({},e),{},{chatSessionId:t})}))),F={chatSessionId:void 0,chatSessionStorageKey:void 0,chatState:b.f.Active},L=S()(S()(S()(S()(S()({},I.o,(function(e){return O()(O()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),I.e,(function(e){return O()(O()({},e),{},{chatSessionId:void 0,chatSessionStorageKey:void 0})})),I.r,(function(e,n){var t=n.chatSessionId;return O()(O()({},e),{},{chatSessionId:t})})),I.s,(function(e,n){return O()(O()({},e),{},{chatSessionStorageKey:n})})),I.t,(function(e,n){return O()(O()({},e),{},{chatState:n.chatState})})),D=k.b,B=Object(k.a)({behavior:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,n=arguments.length>1?arguments[1]:void 0;return createReducer(j,e,n)},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,n=arguments.length>1?arguments[1]:void 0;return createReducer(P,e,n)},input:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,n=arguments.length>1?arguments[1]:void 0;return createReducer(E,e,n)},sessionState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,n=arguments.length>1?arguments[1]:void 0;return createReducer(L,e,n)}}),H=Object(k.c)(B,D()),U=n("6OIj"),V=n("xeAZ"),q=n.n(V),G=n("lX80"),z=n("Nbf1"),W=n("zXDh"),Y=n("djba"),K=n("b+Bk"),Q=n.n(K),J=n("vDB9"),Z={get:function(e){var n=J.a.getItem(e,(function(e){return e}),"");return n&&"undefined"!==n?n:void 0},set:function(e,n){var t=n;J.a.setItem(e,t,(function(e){return e}))},clear:function(e){J.a.removeItem(e)}},X=n("saWA");function updateChatHistory(e){var n=X.w(e);H.dispatch(n)}function enableMsgLoader(e){H.dispatch(X.h(e))}function toggleInputDisabled(e){H.dispatch(X.v(e))}function dispatcher_setChatSessionId(e){H.dispatch(X.m(e))}function setChatState(e){H.dispatch(X.o(e))}function dispatcher_sendMessage(e){return _sendMessage.apply(this,arguments)}function _sendMessage(){return(_sendMessage=f()(m()().mark((function _callee(e){var n,t,a,i,r,o,s;return m()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(n=H.getState(),t=n.sessionState,a=t.chatSessionId,i=t.chatSessionStorageKey,r=t.chatState,o=new G.a,s=new z.a({uri:"/graphql-gateway?opname=AiCoach_CreateUserMessageAndReturnResponse",cache:o,headers:{"Accept-Language":Object(W.getIetfLanguageTag)()}}),""!==e.input.message.trim()){c.next=6;break}return c.abrupt("return",Promise.resolve(null));case 6:return d=e.input.message,l=void 0,u=void 0,m=e.input.action,H.dispatch(X.c(d,l,u,m)),enableMsgLoader(!0),c.abrupt("return",s.mutate({mutation:Q.a,variables:{input:O()(O()({},e.input),{},{chatSessionId:a}),clipRecommendationsEnabled:e.clipRecommendationsEnabled,recommendedActionsEnabled:e.recommendedActionsEnabled},context:{clientName:"gatewayGql"}}).then((function(n){var t=n.data,o=(null==t?void 0:t.AiCoach_CreateUserMessageAndReturnResponse)||{},s=o.messageByAiCoach,c=o.clipRecommendations,d=o.recommendedActions,l=o.navigationButtons,u=o.session||{},m=u.id,p=u.status;p&&r!==p&&setChatState(p),enableMsgLoader(!1),a||dispatcher_setChatSessionId(m);var f=null==i?void 0:i.chatSessionStorageKey;return!Z.get(f)&&m&&Z.set(f,m),null!=s&&s.message&&(H.dispatch(X.b(s.message,s.messageId,c,void 0,"",d,l)),Object(Y.b)("receive_coach_response",{isCoachResponseSuccessful:!0,coach:O()({mode:e.input.mode},a&&{chatSessionId:a})})),t})));case 9:case"end":return c.stop()}var d,l,u,m}),_callee)})))).apply(this,arguments)}var ee=n("gtL6");function useChatHistory(e){var n=e.historyLimit,t=e.recommendedActionsEnabled,i=e.clipRecommendationsEnabled,r=e.skipStore,o=void 0!==r&&r,s=e.mode,c=Object(U.a)(),d=a.useState(!1),l=v()(d,2),u=l[0],p=l[1],g=a.useState(null),h=v()(g,2),b=h[0],k=h[1],C=!1,S=H.getState().sessionState.chatState,y=function(){var e=f()(m()().mark((function _callee(e){var a,r,d,l,u,f,g,v,h,b,y,O,I;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return p(!0),m.prev=1,m.next=4,c.query({query:q.a,variables:{chatSessionId:e,limit:n,recommendedActionsEnabled:t,clipRecommendationsEnabled:i},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 4:if(u=m.sent,(f=null===(a=u.data.AiCoach)||void 0===a?void 0:a.queryByChatSessionId.session.status)&&f!==S&&!o&&setChatState(f),null===(r=u.data)||void 0===r||null===(d=r.AiCoach)||void 0===d||null===(l=d.queryByChatSessionId)||void 0===l||!l.elements){m.next=14;break}return b=null===(g=u.data)||void 0===g?void 0:null===(v=g.AiCoach)||void 0===v?void 0:null===(h=v.queryByChatSessionId)||void 0===h?void 0:h.elements,y=b.map((function(e){return e.senderType===T.d.CLIENT?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}:e.senderType===T.d.RESPONSE?{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt,clipRecommendations:e.clipRecommendations,userFeedback:e.userFeedback,recommendedActions:e.recommendedActions,navigationButtons:e.navigationButtons,structuredResponse:e.structuredResponse}:{id:e.id,sender:e.senderType,text:e.message,timestamp:e.createdAt}})),O=y.reverse(),o||updateChatHistory(O),p(!1),m.abrupt("return",O);case 14:return m.abrupt("return",[]);case 17:return m.prev=17,m.t0=m.catch(1),C&&(k(m.t0),p(!1)),I=m.t0,Object(ee.a)({error:I,source:"useChatHistory",coachMode:s}),m.abrupt("return",[]);case 23:case"end":return m.stop()}}),_callee,null,[[1,17]])})));return function(n){return e.apply(this,arguments)}}();return a.useEffect((function(){return C=!0,function(){C=!1}}),[]),{loading:u,error:b,refreshHistory:y}}var ne,te,ae,ie,re,oe,se,ce,de,le,ue,me,pe,fe,ge,ve,he,be,ke,Ce=n("kNe7"),Se=n("IyUU"),ye=n.n(Se),Oe=n("EBS+"),hooks_useCreateUserChatSession=function(e){var n=e.itemId,t=e.courseId,i=e.inAuthoringMode,r=Object(c.b)().id.toString(),o=Object(U.a)(),s=a.useState(!1),d=v()(s,2),l=d[0],u=d[1],p=a.useState(null),g=v()(p,2),h=g[0],b=g[1];return{getNewChatSessionId:function(){var e=f()(m()().mark((function _callee(e){var a,s,c,d,l,p,f;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return a=Object(Oe.e)(t,n,i),s="",u(!0),m.prev=3,m.next=6,o.mutate({mutation:ye.a,variables:{input:{title:e||a,userId:r}},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 6:null!=(d=m.sent)&&null!==(c=d.data)&&void 0!==c&&c.AiCoach_CreateChatSession&&(s=null===(l=d.data)||void 0===l?void 0:null===(p=l.AiCoach_CreateChatSession)||void 0===p?void 0:p.id),u(!1),m.next=16;break;case 11:m.prev=11,m.t0=m.catch(3),f=m.t0,b(m.t0),Object(Oe.b)({error:f,source:"useCreateUserChatSession"});case 16:return m.abrupt("return",s);case 17:case"end":return m.stop()}}),_callee,null,[[3,11]])})));return function(n){return e.apply(this,arguments)}}(),loading:l,error:h}},useStartNewChatSession_useStartNewChatSession=function(e){var n=e.itemId,t=e.courseId,i=e.inAuthoringMode,r=hooks_useCreateUserChatSession({itemId:n,courseId:t,inAuthoringMode:i}),o=r.getNewChatSessionId,s=r.error;return{startNewChatSession:a.useCallback(function(){var e=f()(m()().mark((function _callee(e){var n;return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=void 0,a=H.getState().sessionState.chatSessionStorageKey,Z.clear(null==a?void 0:a.chatSessionStorageKey),H.dispatch(X.d()),setChatState(b.f.Active),t.next=3,o(e);case 3:return dispatcher_setChatSessionId(n=t.sent),H.dispatch(X.g()),t.abrupt("return",n);case 7:case"end":return t.stop()}var a}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[o]),error:s}},Ie=n("Yql6"),we=n("oaVt"),useCoachItemSendMessage_handleMessageResponseError=function(e,n,t){var a,i,r,o,s,c,d,l;if(enableMsgLoader(!1),i={text:Object(T.f)()},r=i.text,o=i.id,s=i.clipRecommendations,c=i.userFeedback,d=i.timestamp,l=i.recommendedActions,H.dispatch(X.b(r,o,s,c,d,l)),e.graphQLErrors&&(null===(a=e.graphQLErrors)||void 0===a?void 0:a.length)>0){var u=e.graphQLErrors[0];u&&Object(Oe.b)({error:u,source:"handleMessageResponseError"})}Object(Y.b)("receive_coach_response",{isCoachResponseSuccessful:!1,coachResponseError:e.toString(),coach:O()({mode:Object(Oe.a)(n)},t&&{chatSessionId:t})})},useCoachItemSendMessage_isCoachItemSummaryMessage=function(e){var n;return null===(n=e.recommendedActions)||void 0===n?void 0:n.some((function(e){return e.action===b.d.CoachItemSummary}))},useCoachItemSendMessage_getCoachItemSummaryRecommendedAction=function(e){return null==e?void 0:e.find((function(e){return e.action===b.d.CoachItemSummary}))},useCoachItemSendMessage_imStuckRecommendedAction=function(e){var n;return null==e?void 0:null===(n=e.filter((function(e){return e.action===b.d.CoachItemStuckContinue||e.action===b.d.CoachItemStuckEnd})))||void 0===n?void 0:n[0]},hooks_useCoachItemSendMessage=function(e){var n=e.authoringMode,t=e.courseraContext,i=e.endStateCallback,r=e.coachItemType,o=e.markItemComplete,s=t.courseId,c=t.itemId,d=Object(Ie.a)(),l=Object(Oe.a)(n),u=a.useCallback((function(){d("interact_coach",{coachInteractionType:"end_chat_session",coachAction:r===we.f.SocraticDialogue?"COACH_ITEM_END_DIALOGUE":"COACH_ITEM_END_ROLE_PLAY",coach:{mode:l},product:{type:"course",id:s||""},courseItem:{id:c||""}})}),[s,c,l,d,r]),p=a.useCallback(function(){var e=f()(m()().mark((function _callee(e){var a,s,c,d,l,p,f,g;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(a="ACTIVE"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),s="ENDED"===(null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.session.status),c=null==e?void 0:e.AiCoach_CreateUserMessageAndReturnResponse.recommendedActions,d=useCoachItemSendMessage_getCoachItemSummaryRecommendedAction(c),l=useCoachItemSendMessage_imStuckRecommendedAction(c),p=H.getState(),f=p.sessionState,g=f.chatSessionId,!d||!a){m.next=14;break}if(r!==we.f.SocraticDialogue){m.next=12;break}null==o||o(),m.next=14;break;case 12:return m.next=14,dispatcher_sendMessage(Object(Oe.c)({message:d.actionMessage,action:d.action,chatSessionId:g,authoringMode:n,courseraContext:t}));case 14:s&&(u(),null==i||i()),toggleInputDisabled(!!l);case 16:case"end":return m.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,r,t,i,u,o]);return{sendMessage:a.useCallback(function(){var e=f()(m()().mark((function _callee2(e,a){var i,r,o,s;return m()().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return i=H.getState(),r=i.sessionState,o=r.chatSessionId,c.prev=2,c.next=5,dispatcher_sendMessage(Object(Oe.c)({message:e,action:a,chatSessionId:o,authoringMode:n,courseraContext:t}));case 5:return s=c.sent,c.next=8,p(s);case 8:return c.abrupt("return",s);case 11:c.prev=11,c.t0=c.catch(2),useCoachItemSendMessage_handleMessageResponseError(c.t0,n,o);case 14:case"end":return c.stop()}}),_callee2,null,[[2,11]])})));return function(n,t){return e.apply(this,arguments)}}(),[n,t,p])}},je=n("P1ex"),xe=n.n(je),hooks_useUserChatSessions=function(){var e=Object(c.b)().id.toString(),n=Object(U.a)(),t=a.useState(!1),i=v()(t,2),r=i[0],o=i[1],s=a.useState(null),d=v()(s,2),l=d[0],u=d[1];return{getUserSessions:function(){var t=f()(m()().mark((function _callee(){var t,a,i,r,s,c,d,l,p;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return t=[],o(!0),m.prev=2,m.next=5,n.query({query:xe.a,variables:{userId:e,limit:100},context:{clientName:"gatewayGql"},fetchPolicy:"network-only"});case 5:s=m.sent,null!==(a=s.data)&&void 0!==a&&null!==(i=a.AiCoach)&&void 0!==i&&null!==(r=i.queryChatSessionsByUserId)&&void 0!==r&&r.elements&&(t=null===(c=s.data)||void 0===c?void 0:null===(d=c.AiCoach)||void 0===d?void 0:null===(l=d.queryChatSessionsByUserId)||void 0===l?void 0:l.elements),o(!1),m.next=15;break;case 10:m.prev=10,m.t0=m.catch(2),p=m.t0,u(m.t0),Object(Oe.b)({error:p,source:"useUserChatSessions"});case 15:return m.abrupt("return",t);case 16:case"end":return m.stop()}}),_callee,null,[[2,10]])})));return function(){return t.apply(this,arguments)}}(),loading:r,error:l}},useDialogueCoachItemChat_wasDialogueSessionEndedByUser=function(e){return e.some((function(e){return e.text===Ce.l}))&&!e.some((function(e){return useCoachItemSendMessage_isCoachItemSummaryMessage(e)}))},contexts_useDialogueCoachItemChat=function(e){var n=e.courseId,t=e.itemId,i=e.authoringMode,r=e.courseraContext,o=a.useState(void 0),s=v()(o,2),c=s[0],d=s[1],l=a.useState(null),u=v()(l,2),p=u[0],g=u[1],h=a.useState(!1),k=v()(h,2),C=k[0],S=k[1],y=a.useState(!1),O=v()(y,2),I=O[0],w=O[1],j=void 0!==i,x=hooks_useUserChatSessions(),E=x.getUserSessions,N=x.error,A=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,mode:b.g.CoachItem})||{},T=A.refreshHistory,R=A.error,M=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:j}),P=M.startNewChatSession,F=M.error,L=null;R||F||N?L={error:R||F||N,type:"API_FAIL"}:p&&(L={error:p,type:"NO_MESSAGES"});var D=C&&!L,B=a.useCallback(function(){var e=f()(m()().mark((function _callee(e,n){var t,a,o;return m()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return t=H.getState(),a=t.sessionState,o=a.chatSessionId,s.prev=2,s.next=5,dispatcher_sendMessage(Object(Oe.c)({message:e,action:n,chatSessionId:o,authoringMode:i,courseraContext:r}));case 5:return s.abrupt("return",s.sent);case 8:return s.prev=8,s.t0=s.catch(2),useCoachItemSendMessage_handleMessageResponseError(s.t0,i,o),s.abrupt("return",null);case 12:case"end":return s.stop()}}),_callee,null,[[2,8]])})));return function(n,t){return e.apply(this,arguments)}}(),[i,r]),U=a.useCallback(f()(m()().mark((function _callee2(){var e;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!H.getState().behavior.messageLoader){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,P();case 5:return e=n.sent,d(e),n.next=9,B(Ce.a,b.d.WelcomeMessage);case 9:w(!1);case 10:case"end":return n.stop()}}),_callee2)}))),[B,P]),V=a.useCallback(f()(m()().mark((function _callee3(){var e,a,i,r,o,s,c,d;return m()().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,E();case 2:if(i=l.sent,!N){l.next=5;break}return l.abrupt("return");case 5:if(r=null==i?void 0:null===(e=i.filter((function(e){return e.title===Object(Oe.e)(n,t,j)})))||void 0===e?void 0:e[0],o=null==r?void 0:r.id){l.next=11;break}return l.next=10,U();case 10:return l.abrupt("return");case 11:return dispatcher_setChatSessionId(o),l.next=14,null==T?void 0:T(o);case 14:s=H.getState(),null!=(c=s.messages)&&null!==(a=c.messages)&&void 0!==a&&a.length?w(useDialogueCoachItemChat_wasDialogueSessionEndedByUser(c.messages)):(d=new Error("No messages found in the chat history for the session ".concat(o)),Object(Oe.b)({error:d,source:"loadingChatHistory"}),g(d),S(!1));case 16:case"end":return l.stop()}}),_callee3)}))),[N,n,T,E,j,t,S,U]),q=a.useCallback(f()(m()().mark((function _callee4(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.prev=1,e.next=4,V();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(Oe.b)({error:e.t0,source:"loadChatInternal"});case 9:S(!1);case 10:case"end":return e.stop()}}),_callee4,null,[[1,6]])}))),[V,S]);return{dialogueSessionId:c,error:L,startNewDialogueChat:U,loadChat:q,isLoading:D,sessionEndedByUser:I,onSessionEnded:function(){var e=H.getState().messages;w(useDialogueCoachItemChat_wasDialogueSessionEndedByUser(e.messages))}}},Ee=n("IWWe"),SidePanelPersistenceUtils_getSidePanelState=function(e){if(e){var n=Ee.a.getItem("sidePanelState",JSON.parse,{});return null==n?void 0:n[e]}},SidePanelPersistenceUtils_setSidePanelState=function(e,n,t){if(e&&n&&void 0!==t){var a=Ee.a.getItem("sidePanelState",JSON.parse,{}),i=O()(O()({},a||{}),{},S()({},e,O()(O()({},(null==a?void 0:a[e])||{}),{},S()(S()({},n,t),"timestamp",(new Date).toISOString()))));Ee.a.setItem("sidePanelState",i,JSON.stringify)}},SidePanelPersistenceUtils_clearSidePanelState=function(e){if(e){var n=Ee.a.getItem("sidePanelState",JSON.parse,{});null==n||delete n[e];var t=new Date;t.setDate(t.getDate()-7),Object.keys(n||{}).forEach((function(e){var a=null==n?void 0:n[e];null!=a&&a.timestamp&&(new Date(a.timestamp)<t&&(null==n||delete n[e]))})),Ee.a.setItem("sidePanelState",n,JSON.stringify)}},useRolePlayCoachItemChat_checkIfRolePlayEndedByUser=function(e){return!(!e||0===e.length)&&e.some((function(e){return"SYSTEM"===e.sender&&e.text===Ce.r}))},contexts_useRolePlayCoachItemChat=function(e){var n=e.courseId,t=e.itemId,i=e.authoringMode,r=e.courseraContext,o=a.useState(!1),s=v()(o,2),c=s[0],d=s[1],l=a.useState(void 0),u=v()(l,2),p=u[0],g=u[1],h=a.useState(),k=v()(h,2),C=k[0],S=k[1],y=a.useState(),O=v()(y,2),I=O[0],w=O[1],j=a.useState(null),x=v()(j,2),E=x[0],N=x[1],A=a.useState(null),T=v()(A,2),R=T[0],M=T[1],P=a.useState(null),F=v()(P,2),L=F[0],D=F[1],B=a.useState(!1),U=v()(B,2),V=U[0],q=U[1],G=a.useState(!1),z=v()(G,2),W=z[0],Y=z[1],K=void 0!==i,Q=Object(Oe.l)(n,t,K),J=hooks_useUserChatSessions(),Z=J.getUserSessions,X=J.error,ee=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,mode:b.g.CoachItem})||{},ne=ee.refreshHistory,te=ee.error,ae=useStartNewChatSession_useStartNewChatSession({itemId:t,courseId:n,inAuthoringMode:K}).startNewChatSession,ie=null;(te||X)&&(ie={error:te||X,type:"API_FAIL"});var re=V&&!ie,oe=a.useCallback(function(){var e=f()(m()().mark((function _callee(e,n,t){return m()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",dispatcher_sendMessage(Object(Oe.c)({message:n,action:t,chatSessionId:e,authoringMode:i,courseraContext:r})));case 1:case"end":return a.stop()}}),_callee)})));return function(n,t,a){return e.apply(this,arguments)}}(),[i,r]),se=a.useCallback(function(){var e=f()(m()().mark((function _callee2(e){return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,oe(e,Ce.k,b.d.CoachItemGenerateScenario);case 2:return q(!1),d(!0),n.next=6,oe(e,Ce.j,b.d.CoachItemGenerateJson);case 6:d(!1);case 7:case"end":return n.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}(),[oe]),ce=a.useCallback((function(){SidePanelPersistenceUtils_clearSidePanelState(C),g(void 0),S(void 0),w(void 0),dispatcher_setChatSessionId(void 0),N(null),M(null),D(null)}),[C]),de=a.useCallback(f()(m()().mark((function _callee3(){var e;return m()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(a.prev=0,!V&&!c){a.next=3;break}return a.abrupt("return");case 3:return q(!0),ce(),a.next=7,ae(Object(Oe.l)(n,t,K));case 7:if(e=a.sent){a.next=10;break}throw new Error("Error creating Role Play intro session");case 10:return g(e),a.next=13,se(e);case 13:q(!1),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),Object(Oe.b)({error:a.t0,source:"startNewRolePlayChat"}),N(a.t0),q(!1);case 21:case"end":return a.stop()}}),_callee3,null,[[0,16]])}))),[V,c,ce,q,ae,n,t,K,se]),le=a.useCallback(f()(m()().mark((function _callee4(){var e,a;return m()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(i.prev=0,p){i.next=3;break}throw new Error("No intro session found for the Role Play");case 3:return e=Object(Oe.m)(n,t,p,K),i.next=6,ae(e);case 6:if(a=i.sent){i.next=9;break}throw new Error("Error creating Role Play simulation session");case 9:return S(a),i.next=12,oe(a,Ce.a,b.d.WelcomeMessage);case 12:return i.abrupt("return",a);case 15:return i.prev=15,i.t0=i.catch(0),Object(Oe.b)({error:i.t0,source:"startRolePlaySimulation"}),M(i.t0),i.abrupt("return","");case 20:case"end":return i.stop()}}),_callee4,null,[[0,15]])}))),[p,n,t,K,ae,oe]),ue=a.useCallback(f()(m()().mark((function _callee5(){var e,a,i,r,o;return m()().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(s.prev=0,C){s.next=3;break}throw new Error("Error creating debrief session. Role Play simulation session id required.");case 3:try{e=H.getState(),a=e.messages,i=a.historicalMessagesMap[C],r=useRolePlayCoachItemChat_checkIfRolePlayEndedByUser(i||[]),Y(r)}catch(e){Object(Oe.b)({error:e,source:"createRolePlayDebrief_messageCheck"})}return s.next=6,ae(Object(Oe.j)(n,t,C,K));case 6:if(o=s.sent){s.next=9;break}throw new Error("Error creating Role Play debrief session");case 9:return w(o),s.next=12,oe(o,Ce.h,b.d.CoachItemGenerateFeedback);case 12:s.next=18;break;case 14:s.prev=14,s.t0=s.catch(0),Object(Oe.b)({error:s.t0,source:"createRolePlayDebrief"}),D(s.t0);case 18:case"end":return s.stop()}}),_callee5,null,[[0,14]])}))),[K,n,t,C,oe,ae,Y]),me=a.useCallback(f()(m()().mark((function _callee6(){var e,a,i,r,o,s,c,d,l,u;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,Z();case 2:if(e=m.sent,!X){m.next=5;break}return m.abrupt("return");case 5:if(a=e.find((function(e){return e.title===Q})),i=null==a?void 0:a.id){m.next=12;break}return m.next=10,de();case 10:m.next=33;break;case 12:return g(i),dispatcher_setChatSessionId(i),m.next=16,null==ne?void 0:ne(i);case 16:if(o=Object(Oe.m)(n,t,i,K),!(s=null===(r=e.filter((function(e){return e.title===o})))||void 0===r?void 0:r[0])){m.next=33;break}return S(s.id),dispatcher_setChatSessionId(s.id),m.next=23,null==ne?void 0:ne(s.id);case 23:if(c=m.sent,d=useRolePlayCoachItemChat_checkIfRolePlayEndedByUser(c||[]),Y(d),l=Object(Oe.j)(n,t,s.id,K),!(u=e.find((function(e){return e.title===l})))){m.next=33;break}return w(u.id),dispatcher_setChatSessionId(u.id),m.next=33,null==ne?void 0:ne(u.id);case 33:case"end":return m.stop()}}),_callee6)}))),[Z,X,Q,de,ne,n,t,K,Y]),pe=a.useCallback(f()(m()().mark((function _callee7(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.prev=1,e.next=4,me();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),Object(Oe.b)({error:e.t0,source:"loadChatInternal"});case 9:q(!1);case 10:case"end":return e.stop()}}),_callee7,null,[[1,6]])}))),[me,q]);return{isRolePlayJSONLoading:c,rolePlayIntroSessionId:p,rolePlaySimulationSessionId:C,rolePlayDebriefSessionId:I,startNewRolePlayChat:de,startRolePlaySimulation:le,createRolePlayDebrief:ue,loadChat:pe,isLoading:re,rolePlayIntroCreationError:E,rolePlaySimulationCreationError:R,rolePlayDebriefCreationError:L,chatHistoryLoadingError:te,chatLoadingError:ie,setRolePlayDebriefCreationError:D,isRolePlayEndedByUser:W,setIsRolePlayEndedByUser:Y}},_e=["children"],Ne=a.createContext(void 0),useCoachItemChatContext_CoachItemChatContextProvider=function(e){var n,t,i,r,o,s,c,d,u,p,g,k,C,S,y,O,I,w,j,x,E,N,A,T,R,M,P,F,L,D,B,U,V,q,G,z,W,Y,K,Q,J,Z,X,ee,ne,te,ae,ie=e.children,re=l()(e,_e),oe=(t=(n=re).courseId,i=n.courseBranchId,r=n.coachItemType,o=n.rolePlayAiPersonaTitle,s=n.itemId,c=n.authoringMode,d=n.authoringCourseBranchId,u=n.itemName,p=n.nextItemLink,g=n.onCloseChat,k=n.markItemComplete,C=n.authorCoachItemSyncNotification,S=a.useState(!1),y=v()(S,2),O=y[0],I=y[1],w=Object(Oe.i)({authoringCourseBranchId:d,authoringMode:c,courseBranchId:i,courseId:t,itemId:s}),j=a.useMemo((function(){return{coach:{mode:b.g.CoachItem},product:{type:"course",id:t},courseItem:{id:s}}}),[t,s]),x=contexts_useDialogueCoachItemChat({courseId:t,itemId:s,authoringMode:c,courseraContext:w}),E=x.dialogueSessionId,N=x.error,A=x.startNewDialogueChat,T=x.loadChat,R=x.isLoading,M=x.sessionEndedByUser,P=x.onSessionEnded,F=contexts_useRolePlayCoachItemChat({courseId:t,itemId:s,authoringMode:c,courseraContext:w}),L=F.isRolePlayJSONLoading,D=F.rolePlayIntroSessionId,B=F.rolePlaySimulationSessionId,U=F.rolePlayDebriefSessionId,V=F.startNewRolePlayChat,q=F.startRolePlaySimulation,G=F.createRolePlayDebrief,z=F.loadChat,W=F.isLoading,Y=F.rolePlayIntroCreationError,K=F.rolePlaySimulationCreationError,Q=F.rolePlayDebriefCreationError,J=F.chatLoadingError,Z=F.setRolePlayDebriefCreationError,X=F.isRolePlayEndedByUser,ee=hooks_useCoachItemSendMessage({authoringMode:c,courseraContext:w,endStateCallback:r===we.f.RolePlay?G:P,coachItemType:r,markItemComplete:k}).sendMessage,ne=a.useCallback(f()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r===we.f.RolePlay?V():A();case 1:case"end":return e.stop()}}),_callee)}))),[r,A,V]),te=a.useCallback(f()(m()().mark((function _callee2(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r!==we.f.SocraticDialogue){e.next=5;break}return e.next=3,T();case 3:e.next=11;break;case 5:if(r!==we.f.RolePlay){e.next=10;break}return e.next=8,z();case 8:e.next=11;break;case 10:Object(Oe.b)({error:new Error("Unknown coach item type: ".concat(r)),source:"loadChat"});case 11:case"end":return e.stop()}}),_callee2)}))),[r,T,z]),ae=a.useCallback((function(e){I(e),e||null==g||g()}),[g]),a.useMemo((function(){return{courseId:t,courseBranchId:i,itemId:s,coachItemType:r,rolePlayAiPersonaTitle:o,authoringMode:c,authoringCourseBranchId:d,trackingData:j,startNewChat:ne,startRolePlaySimulation:q,loadChat:te,chatIsOpen:O,setChatIsOpen:ae,itemName:u,sendMessage:ee,isDialogueLoading:R,dialogueError:N,isRolePlayJSONLoading:L,nextItemLink:p,dialogueSessionId:E,rolePlayIntroSessionId:D,rolePlaySimulationSessionId:B,rolePlayDebriefSessionId:U,authorCoachItemSyncNotification:C,rolePlayIntroCreationError:Y,rolePlaySimulationCreationError:K,rolePlayDebriefCreationError:Q,setRolePlayDebriefCreationError:Z,rolePlayChatLoadingError:J,isRolePlayLoading:W,createRolePlayDebrief:G,isRolePlayEndedByUser:X,dialogueSessionEndedByUser:M}}),[t,i,s,r,o,c,d,j,ne,q,te,O,ae,u,ee,R,N,L,p,E,D,B,U,C,Y,K,Q,Z,J,W,G,X,M]));return a.createElement(h.a,{store:H},a.createElement(Ne.Provider,{value:oe},ie))},useCoachItemChatContext_useCoachItemChatContext=function(){var e=a.useContext(Ne);if(!e)throw new Error("useCoachItemChatContext must be used within a LearnerCoachItemContextProvider");return e},Ae=n("/FeB"),Te=n.n(Ae),hooks_useCoachRespondToUserMessage=function(e){var n=e.itemId,t=e.courseId,i=e.courseBranchId,r=e.authoringCourseBranchId,o=e.authoringMode,s=Object(U.a)(),c=a.useState(!1),d=v()(c,2),l=d[0],u=d[1],p=a.useState(null),g=v()(p,2),h=g[0],b=g[1],k=Object(Oe.i)({authoringCourseBranchId:r,authoringMode:o,courseBranchId:i,courseId:t,itemId:n});return{sendResponse:function(){var e=f()(m()().mark((function _callee(e){var n,t,a,i,r,c,d,l,p;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:return n=e.chatSessionId,t=e.message,a=e.config,u(!0),m.prev=2,r=[],o&&r.push({contextKey:"additionalContext.coachItem.authoring",contextValue:o}),m.next=7,s.mutate({mutation:Te.a,variables:{input:{chatSessionId:n,message:t,courseraContext:k,config:a,additionalContext:r}},context:{clientName:"gatewayGql"}});case 7:if(null==(c=m.sent)||null===(i=c.data)||void 0===i||!i.AiCoach_RespondToUserMessage){m.next=11;break}return u(!1),m.abrupt("return",null===(d=c.data)||void 0===d?void 0:null===(l=d.AiCoach_RespondToUserMessage)||void 0===l?void 0:l.messageByAiCoach);case 11:m.next=18;break;case 13:m.prev=13,m.t0=m.catch(2),p=m.t0,b(m.t0),Object(Oe.b)({error:p,source:"useCoachRespondToUserMessage"});case 18:return m.abrupt("return",void 0);case 19:case"end":return m.stop()}}),_callee,null,[[2,13]])})));return function(n){return e.apply(this,arguments)}}(),loading:l,error:h}},Re=["children"],Me=a.createContext(void 0),useRolePlayHintsContext_getRequestHintAction=function(e){return function(e){var n,t,a=2===e.length,i="text"===(null===(n=e[0])||void 0===n?void 0:n.type)&&e[0].text===Ce.a,r=(null===(t=e[1])||void 0===t?void 0:t.sender)===T.d.RESPONSE;return a&&i&&r}(e)?Ce.g:e.length>2?Ce.n:""},useRolePlayHintsContext_RolePlayHintsContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,i=e.itemId,r=e.authoringCourseBranchId,o=a.useState(!1),s=v()(o,2),c=s[0],d=s[1],l=a.useState(!1),u=v()(l,2),p=u[0],g=u[1],k=a.useState(void 0),C=v()(k,2),S=C[0],y=C[1],O=a.useState(void 0),I=v()(O,2),w=I[0],j=I[1],x=a.useState({}),E=v()(x,2),N=E[0],T=E[1],R=useCoachItemChatContext_useCoachItemChatContext(),M=R.rolePlaySimulationSessionId,P=R.authoringMode,F=a.useCallback((function(e){T(e),M&&SidePanelPersistenceUtils_setSidePanelState(M,"expandedHintMessages",e)}),[M]),L=hooks_useUserChatSessions().getUserSessions,D=void 0!==P,B=hooks_useCreateUserChatSession({itemId:i,courseId:n,inAuthoringMode:D}),H=B.getNewChatSessionId,U=B.error,V=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0,mode:b.g.CoachItem})||{},q=V.refreshHistory,G=V.error,z=hooks_useCoachRespondToUserMessage({itemId:i,courseId:n,authoringMode:P,courseBranchId:t,authoringCourseBranchId:r}),W=z.sendResponse,Y=z.error,K=Object(h.c)((function(e){return{messages:M&&e.messages.historicalMessagesMap[M]||e.messages.messages}})).messages,Q=null;U||Y?Q={error:U||Y,type:"API_FAIL"}:G&&(Q={error:G,type:"NO_MESSAGES"});var J,Z=c&&!Q,X=p&&!Q;M&&(J=Object(Oe.k)(n,i,M,D));var ee=a.useCallback(f()(m()().mark((function _callee(){var e,n,t,a,i,r;return m()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,d(!0),e=A()(w||[]),n=S){o.next=9;break}return o.next=7,H(J);case 7:n=o.sent,y(n);case 9:if(t=useRolePlayHintsContext_getRequestHintAction(K)){o.next=13;break}throw d(!1),new Error("Something went wrong on determining the right hint action");case 13:return o.next=15,W({chatSessionId:n,message:Ce.i,config:{coachActionId:t,coachModeId:Ce.q}});case 15:if(!(a=o.sent)){o.next=21;break}return e=[].concat(A()(e),[{messageId:a.messageId,referencedMessageId:(null===(i=a.structuredResponse)||void 0===i?void 0:i.referencedMessageId)||"",message:(null===(r=a.structuredResponse)||void 0===r?void 0:r.hint)||""}]),j(e),d(!1),o.abrupt("return",e);case 21:d(!1),o.next=27;break;case 24:o.prev=24,o.t0=o.catch(0),Object(Oe.b)({error:o.t0,source:"requestNewHint"});case 27:return o.abrupt("return",w||[]);case 28:case"end":return o.stop()}}),_callee,null,[[0,24]])}))),[K,w,S,W,H,J]),ne=a.useCallback(f()(m()().mark((function _callee2(){var e,n,t,a,i;return m()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,L();case 2:if((n=r.sent)&&J){r.next=5;break}return r.abrupt("return",[]);case 5:if(t=n.find((function(e){return e.title===J})),a=null==t?void 0:t.id){r.next=9;break}return r.abrupt("return",[]);case 9:return y(a),g(!0),r.next=13,null==q?void 0:q(a);case 13:if(r.t1=e=r.sent,r.t0=null===r.t1,r.t0){r.next=17;break}r.t0=void 0===e;case 17:if(!r.t0){r.next=21;break}r.t2=void 0,r.next=22;break;case 21:r.t2=e.filter((function(e){return"SYSTEM"===e.sender})).map((function(e){return{messageId:e.id,referencedMessageId:e.structuredResponse.referencedMessageId,message:e.structuredResponse.hint,userFeedback:e.userFeedback}}));case 22:return i=r.t2,j(i),g(!1),r.abrupt("return",i);case 26:case"end":return r.stop()}}),_callee2)}))),[q,L,J]),te=a.useCallback((function(){j(void 0),y(void 0)}),[j,y]);return a.useMemo((function(){return{courseId:n,courseBranchId:t,itemId:i,requestNewHint:ee,loadHints:ne,isLoadingNewHint:Z,isLoadingExistingHints:X,error:Q,hints:w,expandedHintMessages:N,setExpandedHintMessages:F,resetHintsChatSession:te}}),[n,t,i,ee,ne,Z,X,Q,w,N,F,te])}(l()(e,Re));return a.createElement(Me.Provider,{value:t},n)},useRolePlayHintsContext_useRolePlayHintsContext=function(){var e=a.useContext(Me);if(!e)throw new Error("useRolePlayHintsContext must be used within a RolePlayHintsContext");return e},Pe=["children"],Fe=a.createContext(void 0),useRolePlayTasksContext_getTaskListWithProgress=function(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=n.reduce((function(e,n){return O()(O()({},e),{},S()({},n.id,n.completed))}),{});return(null==e?void 0:e.map((function(e){var n;return O()(O()({},e),{},{completed:null!==(n=a[e.id])&&void 0!==n?n:t})})))||[]},useRolePlayTasksContext_getTaskDetailsFromChatHistory=function(e){var n=e.filter((function(e){return"SYSTEM"===e.sender})).reduce((function(e,n){var t,a;return null!==(t=n.structuredResponse)&&void 0!==t&&t.taskList&&(e.taskList=n.structuredResponse.taskList),null!==(a=n.structuredResponse)&&void 0!==a&&a.taskProgress&&(e.taskProgress=n.structuredResponse.taskProgress),e}),{taskList:[],taskProgress:[]}),t=e.some((function(e){var n;return"SYSTEM"===e.sender&&(null===(n=e.structuredResponse)||void 0===n?void 0:n.taskProgress)}));return O()(O()({},n),{},{isTaskProgressRecorded:t})},useRolePlayTasksContext_RolePlayTasksContextProvider=function(e){var n=e.children,t=function(e){var n=e.courseId,t=e.courseBranchId,i=e.itemId,r=e.authoringCourseBranchId,o=a.useState(!1),s=v()(o,2),c=s[0],d=s[1],l=a.useState(void 0),u=v()(l,2),p=u[0],g=u[1],h=a.useState(!1),k=v()(h,2),C=k[0],S=k[1],y=a.useState(""),O=v()(y,2),I=O[0],w=O[1],j=useCoachItemChatContext_useCoachItemChatContext().authoringMode,x=hooks_useUserChatSessions().getUserSessions,E=void 0!==j,N=hooks_useCoachRespondToUserMessage({itemId:i,courseId:n,authoringCourseBranchId:r,authoringMode:j,courseBranchId:t}),A=N.sendResponse,T=N.loading,R=N.error,M=useChatHistory({historyLimit:200,recommendedActionsEnabled:!0,clipRecommendationsEnabled:!1,skipStore:!0,mode:b.g.CoachItem})||{},P=M.refreshHistory,F=M.error,L=hooks_useCreateUserChatSession({itemId:i,courseId:n,inAuthoringMode:E}),D=L.getNewChatSessionId,B=L.error,H=null;(B||R||F)&&(H={error:B||R||F,type:"API_FAIL"});var U=c&&!H,V=a.useCallback(function(){var e=f()(m()().mark((function _callee(e){var t,a;return m()().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t=Object(Oe.n)(n,i,e,E),r.next=3,D(t);case 3:return a=r.sent,w(a),r.abrupt("return",a);case 6:case"end":return r.stop()}}),_callee)})));return function(n){return e.apply(this,arguments)}}(),[n,i,D,E]),q=a.useCallback(function(){var e=f()(m()().mark((function _callee2(e){var n,t,a,i,r;return m()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,V(e);case 2:return n=o.sent,w(n),o.next=6,A({chatSessionId:n,message:Ce.m,config:{coachActionId:Ce.w,coachModeId:Ce.q}});case 6:if(!(t=o.sent)){o.next=12;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskList)||[],r=useRolePlayTasksContext_getTaskListWithProgress(i,[]),g(r),o.abrupt("return",r);case 12:return o.abrupt("return",[]);case 13:case"end":return o.stop()}}),_callee2)})));return function(n){return e.apply(this,arguments)}}(),[A,V]),G=a.useCallback(function(){var e=f()(m()().mark((function _callee3(e,n){var t,a,i,r;return m()().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(o.prev=0,e){o.next=3;break}throw new Error("rolePlayTaskChatSessionId is required to request task tracking");case 3:if(!n.every((function(e){return e.completed}))){o.next=7;break}return g(n),o.abrupt("return",n);case 7:return o.next=9,A({chatSessionId:e,message:Ce.m,config:{coachActionId:Ce.x,coachModeId:Ce.q}});case 9:if(!(t=o.sent)){o.next=15;break}return i=(null===(a=t.structuredResponse)||void 0===a?void 0:a.taskProgress)||[],r=useRolePlayTasksContext_getTaskListWithProgress(n,i,!0),g(r),o.abrupt("return",r);case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(0),Object(Oe.b)({error:o.t0,source:"requestTaskTracking"});case 20:return o.abrupt("return",[]);case 21:case"end":return o.stop()}}),_callee3,null,[[0,17]])})));return function(n,t){return e.apply(this,arguments)}}(),[A]),z=a.useCallback((function(){d(!0),S(!0),g(void 0)}),[]),W=a.useCallback((function(){d(!1),S(!1)}),[]),Y=a.useCallback((function(){w("")}),[w]),K=a.useCallback(function(){var e=f()(m()().mark((function _callee4(e){var t,a,r,o,s,c,d,l,u,p;return m()().wrap((function(m){for(;;)switch(m.prev=m.next){case 0:if(!C){m.next=2;break}return m.abrupt("return",[]);case 2:if(t=I){m.next=11;break}return a=Object(Oe.n)(n,i,e,E),m.next=7,x();case 7:r=m.sent,o=null==r?void 0:r.find((function(e){return e.title===a})),t=(null==o?void 0:o.id)||"",w(t);case 11:if(t){m.next=13;break}return m.abrupt("return",[]);case 13:return m.next=15,null==P?void 0:P(t);case 15:if(m.t0=m.sent,m.t0){m.next=18;break}m.t0=[];case 18:return s=m.t0,c=useRolePlayTasksContext_getTaskDetailsFromChatHistory(s),d=c.taskList,l=c.taskProgress,u=c.isTaskProgressRecorded,p=useRolePlayTasksContext_getTaskListWithProgress(d,l,u),g(p),m.abrupt("return",p);case 23:case"end":return m.stop()}}),_callee4)})));return function(n){return e.apply(this,arguments)}}(),[C,P,I,n,i,E,x]),Q=a.useCallback((function(e){return z(),e().finally((function(){W()}))}),[z,W]);return a.useMemo((function(){return{requestTaskList:q,requestTaskTracking:G,loadTaskList:K,setShouldSkipChatHistory:S,withInitialTasksLoadingState:Q,shouldSkipChatHistory:C,isTaskListLoading:U,isTaskResponseLoading:T,error:H,tasks:p,taskChatSessionId:I,resetTaskChatSession:Y}}),[p,I,q,G,K,S,Q,C,Y,U,T,H])}(l()(e,Pe));return a.createElement(Fe.Provider,{value:t},n)},useRolePlayTasksContext_useRolePlayTasksContext=function(){var e=a.useContext(Fe);if(!e)throw new Error("useRolePlayTasksContext must be used within a RolePlayTasksContext");return e},Le=a.createContext(void 0),useSidePanelContext_useSidePanelContext=function(){var e=a.useContext(Le);if(!e)throw new Error("useSidePanelContext must be used within a SidePanelProvider");return e},useSidePanelContext_SidePanelProvider=function(e){var n=e.children,t=e.selectedPanel,i=e.selectedPanelStatus,r=a.useState(null!=t?t:"overview"),o=v()(r,2),s=o[0],c=o[1],d=a.useState(null!=i?i:"expanded"),l=v()(d,2),u=l[0],m=l[1],p=a.useCallback((function(e,n){c(e),SidePanelPersistenceUtils_setSidePanelState(n,"selectedPanel",e)}),[]),f=a.useCallback((function(e,n){m(e),SidePanelPersistenceUtils_setSidePanelState(n,"selectedPanelStatus",e)}),[]),g=a.useMemo((function(){return{selectedPanelStatus:u,setSelectedPanelStatus:f,selectedPanel:s,setSelectedPanel:p}}),[u,s,f,p]);return a.createElement(Le.Provider,{value:g},n)},De=n("VkAN"),Be=n.n(De),He=n("OhL7"),Ue=n("FdHa"),Ve=n("6/Gu"),qe=n("ZJgU"),Ge=n("mHyk"),ze=n("l1rq"),We=n("loer"),Ye=n("RT5p"),Ke={instructions:Object(He.c)(ne||(ne=Be()(["\n    margin-bottom: var(--cds-spacing-600);\n  "]))),instructionsText:Object(He.c)(te||(te=Be()(["\n    margin-bottom: var(--cds-spacing-150);\n  "])))},components_LearnerOverview=function(e){var n=e.overviewInstructions,t=e.style,i=Object(Oe.o)(n);return Object(He.d)(Ve.a,{css:[Ke.instructions,t]},i?Object(He.d)(We.a,{cml:Ye.c.create(n)}):n.split("\n\n").map((function(e,n){return Object(He.d)(ze.a,{component:"p",key:"paragraph-".concat(n),css:Ke.instructionsText},e.split("\n").map((function(e,n,t){var i=n!==t.length-1;return Object(He.d)(a.Fragment,{key:e},e,i&&(ae||(ae=Object(He.d)("br",null))))})))})))},Qe=n("HulD"),Je=n("TR2N"),$e=n.n(Je),components_NonStandardPromptWarning=function(e){var n=e.promptVersion,t=e.coachItemType;return n!==Object(Oe.d)(t)&&Object(c.d)()?a.createElement(Ve.a,{item:!0,css:{marginBottom:"var(--cds-spacing-300)"}},a.createElement(Qe.a,{severity:"information",title:$e()("Non-standard prompt in use")},$e()("It looks like you're using prompt version #{chosenPromptVersion}, when the standard prompt version is currently #{standardPromptVersion}.",{chosenPromptVersion:n,standardPromptVersion:Ce.f}))):null},Ze=n("vXr1"),Xe=n("Gok7"),en=n("A0dR"),nn=n("gKW9"),tn=n.n(nn),an={completed:Object(He.c)(ie||(ie=Be()(["\n    "," {\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),Ue.a.down("xs")),completedStateContainer:Object(He.c)(re||(re=Be()(["\n    display: flex;\n    padding: var(--cds-spacing-150);\n  "]))),completedIcon:Object(He.c)(oe||(oe=Be()(["\n    margin-right: var(--cds-spacing-50);\n  "]))),completedText:Object(He.c)(se||(se=Be()(["\n    margin-right: var(--cds-spacing-300);\n    margin-left: var(--cds-spacing-50);\n  "]))),nextItem:Object(He.c)(ce||(ce=Be()(["\n    "," {\n      margin-top: var(--cds-spacing-400);\n    }\n  "])),Ue.a.down("xs"))},chat_view_MarkAsCompleteButton=function(e){var n=e.isComplete,t=e.variant,a=void 0===t?"primary":t,i=e.className,r=e.disabled,o=e.nextItem,s=e.markComplete,c=Object(Ze.d)();return Object(He.d)("div",{"data-testid":"mark-as-complete-container",className:i},n?Object(He.d)(Ve.a,{container:!0,direction:"row","data-testid":"completed",css:an.completed},Object(He.d)(Ve.a,{item:!0,container:!0,alignItems:"center","data-testid":"completed-state",css:an.completedStateContainer},Object(He.d)(en.a,{size:"medium",color:"success","aria-hidden":!0,css:an.completedIcon}),Object(He.d)("div",{role:"alert","aria-live":"polite"},Object(He.d)(ze.a,{variant:"subtitleMedium",color:"success",css:an.completedText,component:"div"},Object(He.d)(Xe.a,{component:"span",className:"rc-A11yScreenReaderOnly"},tn()("Item is completed.")),Object(He.d)("span",{"aria-hidden":!0},tn()("Completed"))))),!!o&&Object(He.d)(Ve.a,{item:!0},Object(He.d)(Ge.a,{"data-testid":"next-item",css:an.nextItem,variant:"primary",type:"submit",onClick:function(){o&&c(o.getLink())},trackingData:{button:{name:"coach_item_navigate_to_next_item"}}},tn()("Go to next item")))):Object(He.d)(Ge.a,{"data-testid":"mark-complete",variant:a,type:"submit",disabled:r,onClick:s,trackingData:{button:{name:"coach_item_mark_complete"}}},tn()("Mark as complete")))},rn={startButton:Object(He.c)(de||(de=Be()(["\n    margin-right: var(--cds-spacing-200);\n\n    "," {\n      margin-bottom: var(--cds-spacing-200);\n    }\n  "])),Ue.a.down("xs"))},components_CoverPage=function(e){var n=e.instructions,t=e.markComplete,a=e.markStarted,i=e.isCompleted,r=e.isStarted,o=e.promptVersion,s=(e.children,useCoachItemChatContext_useCoachItemChatContext()),c=s.loadChat,d=s.setChatIsOpen,l=s.courseId,u=s.itemId,m=s.coachItemType,p=Object(Ge.e)(),f=function(e,n){return n?$e()("View feedback"):e?$e()("Continue Role Play"):$e()("Get started")}(r,i);return Object(He.d)(Ve.a,null,Object(He.d)(components_NonStandardPromptWarning,{promptVersion:o,coachItemType:m}),m===we.f.SocraticDialogue&&n&&Object(He.d)(components_LearnerOverview,{overviewInstructions:n}),Object(He.d)(Ve.a,{container:!0},Object(He.d)(qe.a,{variant:"primary",onClick:function(){p("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_COVER_PAGE",coach:{mode:b.g.CoachItem},product:{type:"course",id:l},courseItem:{id:u,type:Object(Oe.h)(m)}}),r||a(),c(),d(!0)},css:rn.startButton,"data-testid":"coach-item-start-button"},m===we.f.SocraticDialogue?$e()("Open Dialogue"):f),Object(He.d)(chat_view_MarkAsCompleteButton,{isComplete:i,variant:"secondary",disabled:!r,markComplete:t})))},on=n("mIiF"),sn=n("gksZ"),cn=n("sBcU"),dn=n("5x5m"),ln=n("cE3W"),un=n("SUk0"),mn=n("Z3v1"),pn=n("lPk7"),fn=n("TSYQ"),gn=n.n(fn),vn=(Object(He.c)(le||(le=Be()(["\n    height: 100%;\n  "]))),Object(He.c)(ue||(ue=Be()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: none;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Ue.a.down("xs")),Object(He.c)(me||(me=Be()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),Object(He.c)(pe||(pe=Be()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    position: relative;\n  "]))),Object(He.c)(fe||(fe=Be()(["\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),Object(He.c)(ge||(ge=Be()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: 770px;\n    margin: 0 auto;\n    border-top: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),Object(He.c)(ve||(ve=Be()(["\n    flex-grow: 0;\n    max-width: 770px;\n    margin: 0 auto;\n  "]))),n("DxU6")),hn=n.n(vn);Object(He.c)(he||(he=Be()(["\n      .hide-smart-scroll-container,\n      .show-smart-scroll-container,\n      .SmartScrollWrapper {\n        z-index: -1 !important;\n      }\n    "]))),Object(He.c)(be||(be=Be()(["\n    "," {\n      .ai-course-coach-widget {\n        overflow: hidden;\n      }\n\n      .show-smart-scroll-container {\n        z-index: -1 !important;\n      }\n    }\n  "])),Ue.a.down("xs")),Object(He.c)(ke||(ke=Be()(["\n    height: 100%;\n    border-radius: var(--cds-border-radius-200);\n    box-shadow: 0 4px 40px -8px var(--cds-color-darken-400), 0 4px 8px -8px var(--cds-color-darken-400);\n    overflow: hidden;\n  "])));var bn=n("L1vm"),kn=(n("zyGl"),n("Ji5S"));var Cn,Sn,yn=n("cVIm"),On=n("fAYU");var In,components_Footer=function(e){var n=e.coachPersona;return Object(He.d)(ze.a,{component:"p",variant:"bodySecondary",color:"supportText",css:Object(He.c)(Cn||(Cn=Be()(["\n        padding: var(--cds-spacing-200);\n      "])))},Object(He.d)(mn.FormattedMessage,{message:hn()("{coachPersonaName} is powered by AI. Please be aware that the AI may make mistakes, so review responses carefully and do not share any sensitive information. Your data will be handled in accordance with {privacyNotice}."),privacyNotice:Object(He.d)(On.a,{href:"".concat(yn.a.url.base,"about/privacy?trk_ref=coach"),target:"_blank",rel:"noreferrer",css:Object(He.c)(Sn||(Sn=Be()(["\n              color: inherit !important;\n            "])))},hn()("Coursera's Privacy Notice")),coachPersonaName:(null==n?void 0:n.name)||"Coach"}))},wn=n("0F5w");function LoadingView(e){var n=e.labelMessage||hn()("Recalling our chat...");return Object(He.d)("div",{css:Object(He.c)(In||(In=Be()(["\n        position: absolute;\n        top: 50%;\n        left: 50%;\n        right: 50%;\n      "])))},Object(He.d)(wn.a,{label:n}))}var jn,xn,En,_n=n("dhC9"),Nn=7,An=7999,Tn={textBox:function(e){return Object(He.c)(jn||(jn=Be()(["\n    /* CDS overrides */\n    --cds-color-neutral-background-primary-weak: var(--cds-color-emphasis-neutral-background-xweak);\n    --cds-color-interactive-stroke-primary-focus: var(--cds-color-emphasis-primary-background-xxstrong);\n    --cds-color-interactive-stroke-primary-focus-invert: var(--cds-color-emphasis-primary-background-weak);\n\n    > label {\n      margin-bottom: 0;\n\n      /* visually hidden but required for a11y */\n      display: none;\n    }\n\n    /* CDS overrides for Coach */\n\n    .cds-text-field-root {\n      /* textField component */\n      border-radius: var(--cds-spacing-100);\n      background-color: var(--cds-color-neutral-background-primary-weak);\n\n      /* remove border on the input field */\n\n      .cds-input-notchedOutline {\n        border: none;\n      }\n\n      /* text color */\n\n      .cds-input-input {\n        color: var(--cds-color-grey-700);\n      }\n\n      /* send suffix icon */\n\n      .cds-inputAdornment-filled {\n        padding: 0;\n        border-radius: var(--cds-spacing-100);\n\n        svg path {\n          fill: ",";\n        }\n      }\n\n      /* hover state */\n\n      &:hover {\n        .cds-input-notchedOutline {\n          border: 1px solid var(--cds-color-blue-600);\n        }\n      }\n\n      /* focus state */\n\n      &.cds-input-focused {\n        background-color: var(--cds-color-emphasis-neutral-background-xweak) !important;\n\n        .cds-input-notchedOutline {\n          border: 0 solid transparent;\n        }\n\n        .cds-input-input::placeholder {\n          color: var(--cds-color-interactive-secondary-inactive);\n        }\n\n        /* focus ring */\n\n        ::before {\n          border-radius: var(--cds-spacing-100);\n        }\n      }\n\n      /* send icon focus ring */\n\n      .cds-buttonBase-focusVisible {\n        &::after {\n          top: 4px;\n          left: 4px;\n          right: 4px;\n          bottom: 4px;\n        }\n      }\n\n      /* disabled state */\n\n      &.cds-input-readOnly {\n        .cds-input-input::placeholder {\n          color: var(--cds-color-grey-100);\n        }\n\n        svg path {\n          fill: var(--cds-color-grey-100);\n        }\n      }\n    }\n  "])),e?"var(--cds-color-neutral-disabled-strong)":"var(--cds-color-emphasis-neutral-background-xxstrong)")},container:Object(He.c)(xn||(xn=Be()(["\n    padding: 0 var(--cds-spacing-200);\n  "])))};function Sender(e){var n,t=e.sendMessage,i=e.placeholder,r=e.disabledInput,o=e.autofocus,s=e.onTextInputChange,c=Object(h.c)((function(e){return{showChat:e.behavior.showChat,inputText:e.input.inputText,isMessageLoading:e.behavior.messageLoader}})),d=c.showChat,l=c.inputText,u=c.isMessageLoading,m=Object(a.useRef)(null),p=Object(a.useRef)(null),f=Object(bn.c)(),g=Object(Ge.e)(),v=null===(n=Object(un.b)())||void 0===n?void 0:n.data;Object(a.useEffect)((function(){var e;d&&o&&(null===(e=m.current)||void 0===e||e.focus())}),[o,d]);var handleSendMessageClick=function(){l&&(t(l,b.d.TypedMessage),f({trackingData:{input_text:l,timestamp:Date.now()},trackingName:"ai_course_coach_chat_send_message",action:"click_send_message"}),v&&(g("interact_coach",O()(O()({coachInteractionType:"send_message",coach:{mode:v.mode}},v.courseId&&{product:{type:"course",id:v.courseId}}),v.itemId&&{courseItem:{id:v.itemId,type:v.itemType}})),g("send_coach_message",O()(O()({coachMessageText:l,coachMessageLength:l.length,coach:{mode:v.mode}},v.courseId&&{product:{type:"course",id:v.courseId}}),v.itemId&&{courseItem:{id:v.itemId,type:v.itemType}}))),H.dispatch(X.s("")))},handlePaste=function(e){var n,t=null==e?void 0:null===(n=e.clipboardData)||void 0===n?void 0:n.getData("text/plain");t&&f({trackingData:{input_text:t,timestamp:Date.now()},trackingName:"ai_course_coach_chat_paste_message",action:"paste_message"})};Object(a.useEffect)((function(){var e=null;return m.current&&(e=m.current).addEventListener("paste",handlePaste),function(){e&&e.removeEventListener("paste",handlePaste)}}),[]);var k={onKeyPress:function(e){"Enter"!==e.key||e.shiftKey||(e.preventDefault(),handleSendMessageClick())}};return Object(He.d)("div",{ref:p,css:Tn.container},Object(He.d)("div",{className:gn()("coach-new-message",{"coach-message-disable":u||r})},Object(He.d)(_n.a,{fullWidth:!0,multiline:!0,minRows:1,maxRows:Nn,maxLength:An,label:hn()("Ask #{coachName}",{coachName:"Coach"}),type:"text",readOnly:u||r,inputRef:m,placeholder:i,onChange:function(e){var n=e.target.value;s&&s(n),function(e){H.dispatch(X.s(e))}(n)},value:l,inputProps:k,css:Tn.textBox(!l),"data-testid":"coach-send-message",suffix:Object(He.d)(dn.d,{tooltip:hn()("Send message"),variant:"ghost",onClick:handleSendMessageClick,disabled:!l||u||r,"aria-label":hn()("Send message"),"data-testid":"coach-send-button",icon:En||(En=Object(He.d)(kn.h,null))})})))}var Rn,Mn,Pn,Fn,Ln,Dn,Bn,Hn,Un,Vn=Object(a.forwardRef)(Sender),qn=n("eX5Y"),Gn={notificationOverlay:Object(He.c)(Rn||(Rn=Be()(["\n    position: absolute;\n    top: var(--cds-spacing-200);\n    left: var(--cds-spacing-200);\n    right: var(--cds-spacing-200);\n    z-index: 20;\n    pointer-events: auto;\n\n    "," {\n      left: var(--cds-spacing-100);\n      right: var(--cds-spacing-100);\n      top: var(--cds-spacing-100);\n    }\n  "])),Ue.a.down("xs"))},components_NotificationOverlay=function(e){var n=e.children;return Object(He.d)("div",{css:Gn.notificationOverlay},n)},zn=Object(He.c)(Mn||(Mn=Be()(["\n  &::-webkit-scrollbar {\n    width: 8px;\n  }\n\n  &::-webkit-scrollbar-track {\n    background: transparent;\n  }\n\n  &::-webkit-scrollbar-thumb {\n    background: var(--cds-color-grey-200);\n    border: 4px solid transparent;\n    border-radius: var(--cds-border-radius-50);\n    background-clip: content-box;\n  }\n\n  scrollbar-width: thin;\n  scrollbar-color: var(--cds-color-grey-200) transparent;\n  scrollbar-gutter: auto;\n"]))),Wn={actions:Object(He.c)(Pn||(Pn=Be()(["\n    margin: 0 var(--cds-spacing-200);\n    display: flex;\n    gap: var(--cds-spacing-150);\n\n    "," {\n      flex-direction: column;\n\n      button {\n        width: 100%;\n        max-width: unset;\n      }\n    }\n  "])),Ue.a.down("sm"))},chat_view_ChatCompleteActions=function(e){var n=e.chatHasEnded,t=e.onTryAgainClick,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.coachItemType,o=i.startNewChat,s=i.nextItemLink,c=i.authoringMode,d=i.courseId,l=i.itemId,u=i.setChatIsOpen,m=i.isRolePlayEndedByUser,p=i.dialogueSessionEndedByUser,f=Object(h.c)((function(e){return e.sessionState.chatState})),g=Object(Ge.e)(),v=Object(Ze.d)(),navigateToNextItem=function(){s&&v(s)},onStartNewChatButtonClick=function(e){e&&g("interact_coach",{coachInteractionType:"click_action",coachAction:e,coach:{mode:b.g.CoachItem},product:{type:"course",id:d},courseItem:{id:l}}),o(),null==t||t()};return f===b.f.ChatLimitReached?Object(He.d)("div",{css:Wn.actions},Object(He.d)(qe.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_CHAT_LIMIT_REACHED_START_CHAT_INLINE")}},r===we.f.RolePlay?$e()("Start a new session"):$e()("Start a new chat"))):f===b.f.Ended||n?c?Object(He.d)("div",{css:Wn.actions},Object(He.d)(qe.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")}},r===we.f.RolePlay?$e()("Start a new session"):$e()("Start a new chat"))):Object(He.d)("div",{css:Wn.actions,"data-testid":"chat-end-buttons"},r===we.f.RolePlay&&Object(He.d)(Ge.a,{onClick:function(){m?onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE"):navigateToNextItem()},trackingData:{button:{name:m?"coach_item_start_new_chat_try_again":"coach_item_go_to_next_item"}}},m?$e()("Try again"):$e()("Go to next item")),r===we.f.SocraticDialogue&&(p?Object(He.d)(Ge.a,{onClick:function(){return onStartNewChatButtonClick("COACH_ITEM_SESSION_END_START_CHAT_INLINE")},trackingData:{button:{name:"coach_item_start_new_chat_try_again"}}},$e()("Try again")):Object(He.d)(a.Fragment,null,s?Object(He.d)(Ge.a,{onClick:navigateToNextItem,variant:"primary",trackingData:{button:{name:"coach_item_navigate_to_next_item_inline"}}},$e()("Go to next item")):Object(He.d)(Ge.a,{trackingData:{button:{name:"coach_item_close_chat_inline"}},onClick:function(){return u(!1)},variant:"primary"},$e()("Close chat")))),Object(He.d)(Ge.a,{variant:"ghost","data-pendo":r===we.f.RolePlay?Ce.s:Ce.p,trackingData:{button:{name:"coach_item_provide_feedback_inline"}}},$e()("Tell us what you think"))):null},Yn=Object(He.c)(Fn||(Fn=Be()(["\n  margin-bottom: var(--cds-spacing-300);\n\n  > p {\n    margin-bottom: var(--cds-spacing-200);\n    text-align: center;\n    color: var(--cds-color-neutral-primary-weak);\n  }\n"]))),chat_view_ChatEndedMessage=function(){var e=function(e){switch(e){case b.f.Ended:return $e()("The activity has ended.");case b.f.ChatLimitReached:return $e()("Youve reached the chat limit.");default:return}}(Object(h.c)((function(e){return e.sessionState.chatState})));return e?Object(He.d)("div",{"data-testid":"chat-ended-message",css:Yn},Object(He.d)(ze.a,{component:"p"},e),Object(He.d)(ze.a,{component:"p"},$e()("Start a new chat to clear your chat history and start fresh."))):null},Kn=n("2yix");function hasDialogueChatStarted(e){return(null==e?void 0:e.length)>2}var Qn,Jn,$n,Zn,Xn,et,nt,tt,at,it,rt,ot,st,ct,dt,lt,ut,mt,pt,ft,gt,vt,ht,bt,kt,Ct,St,yt,Ot,It,wt,jt,xt,Et,_t,Nt,At,Tt,Rt,Mt,Pt,Ft,Lt,Dt,Bt,Ht,Ut,Vt,qt,Gt,zt,Wt,Yt,Kt,Qt,Jt,$t,Zt,Xt,ea,na,ta,aa,ia,ra,oa,sa,ca={loadingContainer:Object(He.c)(Ln||(Ln=Be()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(He.c)(Dn||(Dn=Be()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),Ce.b+"px"),chatActionContainer:Object(He.c)(Bn||(Bn=Be()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),Ce.b+"px"),startActionButton:Object(He.c)(Hn||(Hn=Be()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(He.c)(Un||(Un=Be()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_DialogueChatActions=function(e){e.onClickEndDialogueButton;var n,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.dialogueError,i=t.isDialogueLoading,r=t.sendMessage,o=Object(h.c)((function(e){return e.sessionState})).chatState,s=Object(h.c)((function(e){var n=e.behavior;return{messages:e.messages,behavior:n,sessionState:e.sessionState}})),c=s.behavior,d=c.disabledInput,l=c.messageLoader,u=s.messages.messages,p=$e()("Let's get started"),g=null==u?void 0:u[u.length-1],v=g&&useCoachItemSendMessage_isCoachItemSummaryMessage(g),k=o===b.f.Active,C=hasDialogueChatStarted(u),S=v&&k,y=function(){var e=f()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(Ce.l,b.d.CoachItemSummary);case 2:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),O=function(){var e=f()(m()().mark((function _callee2(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r(p,b.d.CoachItemLetsGetStarted);case 2:case"end":return e.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();if(a)return null;if(i)return Object(He.d)("div",{css:ca.chatActionContainer},Object(He.d)(Kn.a,{variant:"rect",height:48,css:ca.loadingContainer}));if(S)return Object(He.d)("div",{"data-testid":"view-feedback-button",css:ca.chatActionContainer},Object(He.d)(Ge.a,{size:"medium",variant:"primary",onClick:y,css:ca.startActionButton,disabled:l,trackingData:{button:{name:"dialogue_item_view_your_feedback"}}},$e()("View your Feedback")));if(!C){var I=null==u?void 0:u.find((function(e){return e.sender===b.h.System})),w=void 0!==(null==(n=null==I?void 0:I.recommendedActions)?void 0:n.find((function(e){return e.action===b.d.CoachItemLetsGetStarted})));return l||w?null:Object(He.d)("div",{css:ca.chatActionContainer},Object(He.d)(Ge.a,{size:"medium",variant:"primary",onClick:O,css:ca.startActionButton,disabled:l,trackingData:{button:{name:"coach_item_start_session"}}},$e()("Start Dialogue")))}return k?Object(He.d)("div",{css:ca.senderContainer},Object(He.d)(Vn,{sendMessage:r,placeholder:$e()("Message Coach"),disabledInput:d||!k,autofocus:!0})):null},da=n("7NTc"),la=n("rzCt"),ua=n("fguj"),ma=n("7NrJ"),pa=da.a.HeadingGroup,fa=da.a.Content,ga=da.a.Actions,va={introductoryText:Object(He.c)(Qn||(Qn=Be()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(He.c)(Jn||(Jn=Be()(["\n    padding-left: 0;\n  "])))},ha=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),chat_view_EndDialogueDialog=function(e){var n=e.onClose,t=e.isOpen,i=a.useState(ha.DEFAULT),r=v()(i,2),o=r[0],s=r[1],c=useCoachItemChatContext_useCoachItemChatContext().sendMessage,d=Object(Ge.e)();return Object(He.d)(da.a,{open:t,onClose:n},Object(He.d)(pa,null,$e()("Would you like to end this session?")),Object(He.d)(fa,null,Object(He.d)(ze.a,{css:va.introductoryText,component:"p"},$e()("Please note that you will not be able to resume it, but you can always start a new one from the beginning.")),Object(He.d)(la.a,{label:$e()("Reason for ending"),optional:!0,"data-testid":"end-dialogue-reason-select-field",placeholder:$e()("Select a reason"),supportText:$e()("We would appreciate your feedback to help us improve the experience."),onChange:function(e){var n=e.target.value;s(n)}},Object.values(ha).map((function(e){return Object(He.d)(ua.a,{key:e,value:e},function(e){switch(e){case ha.FEEL_STUCK:return $e()("I feel stuck and can't complete the activity");case ha.TECHNICAL_ISSUES:return $e()("I'm experiencing technical issues");case ha.TIME_CONSTRAINT:return $e()("I don't have time to finish");case ha.NOT_VALUABLE:return $e()("This isn't engaging or valuable for me");case ha.DISLIKE_ITEM_TYPE:return $e()("I'd prefer a different way to learn");case ha.DEFAULT:default:return $e()("No reason provided")}}(e))}))),Object(He.d)(ga,{css:va.actionButtons},Object(He.d)(ma.a,{alternateButtonProps:{children:$e()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:$e()("Yes, end the Dialogue"),onClick:function(){c(Ce.l,b.d.CoachItemStuckEnd),d("end_coach_item_session",{coachItemSessionEndReason:o,courseItem:{type:"dialogue"}}),n()}}}))))},ba={root:Object(He.c)($n||($n=Be()(["\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    height: 100%;\n  "])))},chat_view_ErrorView=function(e){var n=e.error,t=a.useCallback((function(){return"NO_MESSAGES"===n.type?$e()("Something went wrong in getting your previous chat. Please contact support for help, or start a new chat."):$e()("Please refresh your page. If you continue to see this error, please contact support for help.")}),[n]);return Object(He.d)(ze.a,{component:"div",css:ba.root},t())},ka={conversation:Object(He.c)(Zn||(Zn=Be()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Ue.a.down("xs")),messageContainer:Object(He.c)(Xn||(Xn=Be()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n\n    ","\n  "])),zn),messageContainerResponses:Object(He.c)(et||(et=Be()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Ce.b+"px"),summarySectionDivider:Object(He.c)(nt||(nt=Be()(["\n    margin: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-400);\n  "]))),userHasLeftMessage:Object(He.c)(tt||(tt=Be()(["\n    padding: 0 var(--cds-spacing-200);\n    padding-bottom: var(--cds-spacing-200);\n  "]))),endStateContainer:Object(He.c)(at||(at=Be()(["\n    margin: 0 auto var(--cds-spacing-200);\n    width: 100%;\n  "]))),footerContainer:Object(He.c)(it||(it=Be()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),Ce.b+"px")},chat_view_ChatConversation=function(){var e,n=useCoachItemChatContext_useCoachItemChatContext(),t=n.courseId,i=n.isDialogueLoading,r=n.dialogueError,o=n.sendMessage,s=n.dialogueSessionId,d=n.authorCoachItemSyncNotification,l=n.courseBranchId,u=a.useState(!1),m=v()(u,2),p=m[0],f=m[1],g=Object(h.c)((function(e){return{messages:e.messages,shouldShowMessageLoader:e.behavior.messageLoader}})).messages.messages,k=null==g?void 0:g.find((function(e){return e.text===Ce.l})),C=null==g?void 0:g[g.length-1],S=g.find((function(e){return useCoachItemSendMessage_isCoachItemSummaryMessage(e)})),y=null===(e=Object(un.b)())||void 0===e?void 0:e.data,I=Object(Ge.f)("view_dialogue_messages",O()(O()({product:{type:"course",id:t}},(null==y?void 0:y.itemId)&&{courseItem:{id:null==y?void 0:y.itemId}}),l&&{courseBranch:{id:l}}),[t,null==y?void 0:y.itemId,l,i,r]),w=Object(c.b)().fullName,j=Object(qn.a)(w),x=a.useRef(null);a.useEffect((function(){var e,n;k&&x.current&&(null===(e=(n=x.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[k]);var isSummaryMessage=function(e){return k&&e.customId!==k.customId&&e.customId===C.customId},onSendMessage=function(e,n){e.trim()&&o(e,n)},handleToggleEndDialogueDialog=function(){f(!p)};return Object(He.d)("div",{css:ka.conversation},d&&Object(He.d)(components_NotificationOverlay,null,d),Object(He.d)("div",{css:ka.messageContainer},i&&Object(He.d)(LoadingView,{labelMessage:$e()("Loading...")}),r&&Object(He.d)(chat_view_ErrorView,{error:r}),Object(He.d)("div",{css:ka.messageContainerResponses},!i&&!r&&Object(He.d)("div",{ref:I},Object(He.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:onSendMessage,courseId:t,hideMessage:function(e){var n=e.message;return!(0!==e.index&&n.action!==b.d.CoachItemSummary&&(null==n?void 0:n.text)!==Ce.l&&n.action!==b.d.CoachItemStuckEnd&&!isSummaryMessage(n))},chatSessionId:s,forceHideMessageLoader:!!k}),k&&Object(He.d)("div",{ref:x},S?Object(He.d)(pn.a,{css:ka.summarySectionDivider,"data-testid":"summary-section-divider"}):Object(He.d)(ze.a,{component:"p",variant:"bodyPrimary",color:"supportText",css:ka.userHasLeftMessage},Object(He.d)(mn.FormattedMessage,{message:$e()("{userFirstName} ended the dialogue."),userFirstName:j})),Object(He.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:onSendMessage,courseId:t,hideMessage:function(e){var n=e.message;return!isSummaryMessage(n)},chatSessionId:s})),Object(He.d)("div",{css:ka.endStateContainer},rt||(rt=Object(He.d)(chat_view_ChatEndedMessage,null)),ot||(ot=Object(He.d)(chat_view_ChatCompleteActions,null)))))),Object(He.d)(chat_view_EndDialogueDialog,{onClose:handleToggleEndDialogueDialog,isOpen:p}),st||(st=Object(He.d)(pn.a,{color:"light",orientation:"horizontal"})),Object(He.d)(chat_view_DialogueChatActions,{onClickEndDialogueButton:handleToggleEndDialogueDialog}),Object(He.d)("div",{css:ka.footerContainer},ct||(ct=Object(He.d)(components_Footer,null))))},Ca={startActionButton:Object(He.c)(dt||(dt=Be()(["\n    margin-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatLearnerStartScenario=function(e){var n=e.onStartButtonClick,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.isRolePlayJSONLoading,i=t.startRolePlaySimulation,r=t.trackingData,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.requestTaskList,c=o.withInitialTasksLoadingState,d=Object(Ge.e)(),l=function(){var e=f()(m()().mark((function _callee2(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return d("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemGenerateScenario},r)),e.next=3,c(f()(m()().mark((function _callee(){var e;return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i();case 2:if(e=t.sent){t.next=5;break}return t.abrupt("return");case 5:return null==n||n(e),t.next=8,s(e);case 8:case"end":return t.stop()}}),_callee)}))));case 3:case"end":return e.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();return Object(He.d)(qe.a,{onClick:l,size:"medium",variant:"primary",loading:a,css:Ca.startActionButton},$e()("Start Role Play"))},chat_view_RolePlayChatSender=function(e){var n=e.coachPersona,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.rolePlayIntroSessionId,i=t.sendMessage,r=Object(h.c)((function(e){return e.sessionState})).chatSessionId,o=useRolePlayTasksContext_useRolePlayTasksContext(),s=o.taskChatSessionId,c=o.tasks,d=o.requestTaskTracking,l=Object(h.c)((function(e){return e.behavior})).disabledInput,u=function(){var e=f()(m()().mark((function _callee(e,n){return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(e,n);case 2:if(null==c||!c.length){t.next=5;break}return t.next=5,d(s,c);case 5:case"end":return t.stop()}}),_callee)})));return function(n,t){return e.apply(this,arguments)}}();return Object(He.d)(Vn,{sendMessage:u,placeholder:$e()("Message #{coachPersonaName}",{coachPersonaName:(null==n?void 0:n.name)||"Coach"}),disabledInput:l||r===a,autofocus:!0})},Sa={loadingContainer:Object(He.c)(lt||(lt=Be()(["\n    user-select: none; /* needed to prevent cursor from appearing as caret when clicked */\n    margin: 0 var(--cds-spacing-200);\n  "]))),senderContainer:Object(He.c)(ut||(ut=Be()(["\n    flex-grow: 0;\n    width: 100%;\n    max-width: ",";\n    margin: 0 auto;\n  "])),Ce.b+"px"),chatActionContainer:Object(He.c)(mt||(mt=Be()(["\n    max-width: ",";\n    margin: var(--cds-spacing-200) auto 0;\n    flex-grow: 0;\n    width: 100%;\n  "])),Ce.b+"px"),startActionButton:Object(He.c)(pt||(pt=Be()(["\n    margin-left: var(--cds-spacing-200);\n  "]))),coachButton:Object(He.c)(ft||(ft=Be()(["\n    margin-left: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatActions=function(e){var n=e.coachPersona,t=e.onStartButtonClick,a=e.onTryAgainClick,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayChatLoadingError,o=i.isRolePlayLoading,s=i.rolePlaySimulationSessionId,c=i.rolePlayDebriefSessionId,d=i.rolePlayDebriefCreationError,l=i.rolePlaySimulationCreationError,u=i.rolePlayIntroCreationError,p=i.startRolePlaySimulation,g=i.isRolePlayJSONLoading,v=i.authoringMode,k=i.trackingData,C=Object(h.c)((function(e){return e.sessionState})),S=C.chatState,y=C.chatSessionId,I=Object(h.c)((function(e){return e.behavior})).messageLoader,w=useRolePlayTasksContext_useRolePlayTasksContext(),j=w.requestTaskList,x=w.withInitialTasksLoadingState,E=Object(Ge.e)(),N=y===c,A=S===b.f.Active,T=A&&!!s&&!N,R=A&&!s,M=!v,P=r||u||l||d,F=function(){var e=f()(m()().mark((function _callee2(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemGenerateScenario},k)),e.next=3,x(f()(m()().mark((function _callee(){var e;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,p();case 2:if(e=n.sent){n.next=5;break}return n.abrupt("return");case 5:return null==t||t(e),n.next=8,j(e);case 8:case"end":return n.stop()}}),_callee)}))));case 3:case"end":return e.stop()}}),_callee2)})));return function(){return e.apply(this,arguments)}}();return P?null:o?Object(He.d)("div",{css:Sa.chatActionContainer},Object(He.d)(Kn.a,{variant:"rect",height:48,css:Sa.loadingContainer})):R?Object(He.d)("div",{css:Sa.chatActionContainer,"data-testid":"chat-start-button"},M?Object(He.d)(chat_view_RolePlayChatLearnerStartScenario,{onStartButtonClick:t}):Object(He.d)(qe.a,{onClick:F,size:"medium",variant:"primary",loading:g,css:Sa.startActionButton},$e()("Start Role Play"))):T?Object(He.d)("div",{css:Sa.senderContainer},Object(He.d)(chat_view_RolePlayChatSender,{coachPersona:n})):c?Object(He.d)("div",{css:Sa.chatActionContainer},I?gt||(gt=Object(He.d)(Kn.a,{variant:"rect",height:48})):Object(He.d)(chat_view_ChatCompleteActions,{chatHasEnded:!0,onTryAgainClick:a})):null},ya=da.a.HeadingGroup,Oa=da.a.Content,Ia=da.a.Actions,wa={introductoryText:Object(He.c)(vt||(vt=Be()(["\n    margin-bottom: var(--cds-spacing-200);\n  "]))),actionButtons:Object(He.c)(ht||(ht=Be()(["\n    padding-left: 0;\n  "])))},ja=function(e){return e.DEFAULT="DEFAULT",e.FEEL_STUCK="FEEL_STUCK",e.TECHNICAL_ISSUES="TECHNICAL_ISSUES",e.TIME_CONSTRAINT="TIME_CONSTRAINT",e.NOT_VALUABLE="NOT_VALUABLE",e.DISLIKE_ITEM_TYPE="DISLIKE_ITEM_TYPE",e}({}),EndRolePlayDialog_getEndRolePlayMessage=function(e){switch(e){case ja.FEEL_STUCK:return $e()("I feel stuck and can't complete the activity");case ja.TECHNICAL_ISSUES:return $e()("I'm experiencing technical issues");case ja.TIME_CONSTRAINT:return $e()("I don't have time to finish right now");case ja.NOT_VALUABLE:return $e()("This isn't engaging or valuable for me");case ja.DISLIKE_ITEM_TYPE:return $e()("I'd prefer a different way to learn");case ja.DEFAULT:default:return $e()("Reason not provided")}},chat_view_EndRolePlayDialog=function(e){var n=e.onClose,t=e.isOpen,i=a.useState(ja.DEFAULT),r=v()(i,2),o=r[0],s=r[1],c=useCoachItemChatContext_useCoachItemChatContext(),d=c.sendMessage,l=c.trackingData,u=Object(Ge.e)(),p=function(){var e=f()(m()().mark((function _callee(){var e;return m()().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:u("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemStuckEnd},l)),e=EndRolePlayDialog_getEndRolePlayMessage(o),d(e,b.d.CoachItemStuckEnd),n();case 4:case"end":return t.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(He.d)(da.a,{open:t,onClose:n,"data-testid":"end-role-play-dialog"},Object(He.d)(ya,null,$e()("End the Role Play?")),Object(He.d)(Oa,null,Object(He.d)(ze.a,{css:wa.introductoryText,component:"p"},$e()("You'll get feedback based on your progress so far. You won't be able to resume, but you can try again from the beginning.")),Object(He.d)(la.a,{label:$e()("Reason for ending"),optional:!0,"data-testid":"end-role-play-reason-select-field",placeholder:$e()("Select a reason"),supportText:$e()("Please share why you're ending early to help us improve the experience."),onChange:function(e){var n=e.target.value;s(n)}},Object.values(ja).map((function(e){return Object(He.d)(ua.a,{key:e,value:e},EndRolePlayDialog_getEndRolePlayMessage(e))}))),Object(He.d)(Ia,{css:wa.actionButtons},Object(He.d)(ma.a,{alternateButtonProps:{children:$e()("Cancel"),variant:"secondary",onClick:n},primaryButtonProps:{children:$e()("Yes, end the Role Play"),onClick:p}}))))},xa=n("nNSt"),Ea={sessionTitle:Object(He.c)(bt||(bt=Be()(["\n    margin: var(--cds-spacing-600) 0;\n    padding-left: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayChatSession=function(e){var n=e.title,t=e.children;return Object(He.d)("div",null,Object(He.d)("div",{css:Ea.sessionTitle},Object(He.d)(ze.a,{component:"h2",variant:"titleSmall"},n)),Object(He.d)("div",null,t))},_a={messageContainerResponses:Object(He.c)(kt||(kt=Be()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Ce.b+"px"),notification:Object(He.c)(Ct||(Ct=Be()(["\n    margin-bottom: var(--cds-spacing-200);\n  "])))},chat_view_RolePlayDebriefSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),i=t.courseId,r=t.rolePlayDebriefCreationError,o=t.rolePlayDebriefSessionId,s=t.startNewChat,c=t.sendMessage,d=t.createRolePlayDebrief,l=t.setRolePlayDebriefCreationError,u=t.trackingData,p=Object(Ge.e)(),g=a.useState(!0),h=v()(g,2),b=h[0],k=h[1],C=a.useRef(null);a.useEffect((function(){var e,n;C.current&&(null===(e=(n=C.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[o,r]);var S=function(){var e=f()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return p("interact_coach",O()(O()({},u),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_REGENERATE_FEEDBACK"})),l(null),k(!1),e.next=5,d();case 5:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}(),handleStartNewChatClick=function(){p("interact_coach",O()(O()({},u),{},{coachInteractionType:"click_action",coachAction:"COACH_ITEM_DEBRIEF_ERROR_START_NEW_CHAT"})),s()};return r?Object(He.d)(a.Fragment,null,Object(He.d)("div",{ref:C,css:_a.messageContainerResponses},Object(He.d)(chat_view_RolePlayChatSession,{title:$e()("Feedback session")},b?Object(He.d)(xa.a,{css:_a.notification,severity:"error",actions:Object(He.d)(ma.a,{size:"small",primaryButtonProps:{children:"Regenerate response",onClick:S},alternateButtonProps:{variant:"ghost",children:"Start a new session",onClick:handleStartNewChatClick}})},$e()("Something went wrong. Try regenerating the response, or start a new session.")):Object(He.d)(xa.a,{css:_a.notification,severity:"error",actions:Object(He.d)(qe.a,{size:"small",onClick:handleStartNewChatClick},$e()("Start a new session"))},$e()("Something went wrong. Start a new session to try again"))))):o?Object(He.d)(a.Fragment,null,Object(He.d)("div",{ref:C,css:_a.messageContainerResponses},Object(He.d)(chat_view_RolePlayChatSession,{title:$e()("Feedback session")},Object(He.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:c,courseId:i,hideMessage:n,chatSessionId:o})))):null},Na={messageContainerResponses:Object(He.c)(St||(St=Be()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Ce.b+"px")},chat_view_RolePlayIntroSession=function(e){var n=e.hideMessage,t=useCoachItemChatContext_useCoachItemChatContext(),a=t.courseId,i=t.trackingData,r=t.rolePlayIntroSessionId,o=t.rolePlayIntroCreationError,s=t.startNewChat,c=t.sendMessage,d=Object(Ge.e)();return o?Object(He.d)("div",{css:Na.messageContainerResponses},Object(He.d)(chat_view_RolePlayChatSession,{title:$e()("Get ready to step into character")},Object(He.d)(xa.a,{severity:"error",actions:Object(He.d)(qe.a,{size:"small",onClick:function(){d("interact_coach",O()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_INTRO_ERROR_START_NEW_CHAT"},i)),s()}},$e()("Start a new session"))},$e()("Something went wrong. Start a new session to try again")))):r?Object(He.d)("div",{css:Na.messageContainerResponses},Object(He.d)(chat_view_RolePlayChatSession,{title:$e()("Get ready to step into character")},Object(He.d)(R.g,{profileClientAvatar:void 0,homeView:void 0,sendMessage:function(e,n){e.trim()&&c(e,n)},courseId:a,hideMessage:n,chatSessionId:r,forceHideMessageLoader:!0}))):null},Aa={container:Object(He.c)(yt||(yt=Be()(["\n    margin: 0 var(--cds-spacing-200);\n  "]))),divider:Object(He.c)(Ot||(Ot=Be()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayEndState=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.rolePlayAiPersonaTitle,t=e.rolePlayDebriefSessionId,a=Object(h.c)((function(e){return e.sessionState})),i=a.chatState,r=a.chatSessionId;return i===b.f.Ended||t&&t===r?Object(He.d)("div",{css:Aa.container},Object(He.d)(pn.a,{color:"light",orientation:"horizontal",css:Aa.divider}),Object(He.d)(ze.a,{component:"p",color:"supportText"},$e()("#{aiPersonaRole} has left. The Role Play activity has ended.",{aiPersonaRole:n})),Object(He.d)(pn.a,{color:"light",orientation:"horizontal",css:Aa.divider})):null},Ta={endStateContainer:Object(He.c)(It||(It=Be()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),divider:Object(He.c)(wt||(wt=Be()(["\n    margin: var(--cds-spacing-600) var(--cds-spacing-200);\n  "]))),messageContainerResponses:Object(He.c)(jt||(jt=Be()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Ce.b+"px")},chat_view_RolePlaySimulationSession=function(e){var n=e.coachPersona,t=e.hideMessage,i=e.isRolePlayTaskResponseLoading,r=useCoachItemChatContext_useCoachItemChatContext(),o=r.courseId,s=r.trackingData,c=r.rolePlaySimulationSessionId,d=r.rolePlaySimulationCreationError,l=r.startNewChat,u=r.sendMessage,m=Object(Ge.e)();return d?Object(He.d)(a.Fragment,null,Object(He.d)("div",{css:Ta.messageContainerResponses},Object(He.d)(pn.a,{css:Ta.divider,color:"light",orientation:"horizontal"}),Object(He.d)(chat_view_RolePlayChatSession,{title:$e()("Role Play simulation")},Object(He.d)(xa.a,{severity:"error",actions:Object(He.d)(qe.a,{size:"small",onClick:function(){m("interact_coach",O()({coachInteractionType:"click_action",coachAction:"COACH_ITEM_SIMULATION_ERROR_START_NEW_CHAT"},s)),l()}},$e()("Start a new session"))},$e()("Something went wrong. Start a new session to try again"))))):c?Object(He.d)("div",{css:Ta.messageContainerResponses,"data-testid":"role-play-simulation-session"},Object(He.d)(pn.a,{css:Ta.divider,color:"light",orientation:"horizontal"}),Object(He.d)(chat_view_RolePlayChatSession,{title:$e()("Role Play simulation")},Object(He.d)(R.g,{profileClientAvatar:void 0,coachPersona:n,homeView:void 0,sendMessage:function(e,n){e.trim()&&u(e,n)},courseId:o,hideMessage:t,chatSessionId:c,forceShowMessageLoader:i}),Object(He.d)("div",{css:Ta.endStateContainer},xt||(xt=Object(He.d)(chat_view_RolePlayEndState,null))))):null},Ra={messageContainer:Object(He.c)(Et||(Et=Be()(["\n    flex-grow: 1;\n    overflow-y: auto;\n    overflow-x: hidden;\n    justify-content: center;\n    max-width: 100%;\n    height: 100%;\n    position: relative;\n\n    ","\n  "])),zn),messageContainerResponses:Object(He.c)(_t||(_t=Be()(["\n    max-width: ",";\n    margin: 0 auto;\n    bottom: 0;\n    left: 0;\n    right: 0;\n\n    #messages {\n      height: unset;\n      padding-bottom: var(--cds-spacing-100);\n    }\n  "])),Ce.b+"px")},chat_view_RolePlayChatSessions=function(e){var n=e.coachPersona,t=e.isTaskResponseLoading,a=useCoachItemChatContext_useCoachItemChatContext(),i=a.isRolePlayLoading,r=a.rolePlayChatLoadingError,hideMessage=function(e){var n,a=e.message,i=e.index,r=e.messages,o=null==a?void 0:a.text;return!!(0===i||a.action===b.d.CoachItemSummary||o===Ce.l||a.action===b.d.CoachItemGenerateScenario||o===Ce.k||a.action===b.d.CoachItemGenerateJson||o===Ce.j||r[i-1].action===b.d.CoachItemGenerateJson||(null===(n=r[i-1])||void 0===n?void 0:n.text)===Ce.j||o&&function(e){return Object.values(ja).map((function(e){return EndRolePlayDialog_getEndRolePlayMessage(e)})).includes(e)}(o)||null!=o&&o.includes(Ce.u)||o===Ce.r||i===r.length-1&&t)};return i?Object(He.d)("div",{css:Ra.messageContainer},Object(He.d)(LoadingView,{labelMessage:$e()("Loading...")})):r?Object(He.d)("div",{css:Ra.messageContainer},Object(He.d)(chat_view_ErrorView,{error:r})):Object(He.d)("div",{css:Ra.messageContainer},Object(He.d)(chat_view_RolePlayIntroSession,{hideMessage:hideMessage}),Object(He.d)(chat_view_RolePlaySimulationSession,{coachPersona:n,hideMessage:hideMessage,isRolePlayTaskResponseLoading:t}),Object(He.d)(chat_view_RolePlayDebriefSession,{hideMessage:hideMessage}))},icons_AiPersonaAvatar=function(){return Nt||(Nt=a.createElement("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"ai-persona-avatar"},a.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M24.1566 9.46715C24.0384 9.17762 23.6284 9.17762 23.5102 9.46715L23.0061 10.7018C22.8879 10.9914 22.6581 11.2211 22.3686 11.3394L21.1339 11.8435C20.8444 11.9617 20.8444 12.3717 21.1339 12.4899L22.3686 12.994C22.6581 13.1122 22.8879 13.342 23.0061 13.6315L23.5102 14.8662C23.6284 15.1557 24.0384 15.1557 24.1566 14.8662L24.6607 13.6315C24.7789 13.342 25.0087 13.1122 25.2982 12.994L26.5329 12.4899C26.8225 12.3717 26.8225 11.9617 26.5329 11.8435L25.2982 11.3394C25.0087 11.2211 24.7789 10.9914 24.6607 10.7018L24.1566 9.46715ZM17.567 11.5567C17.3698 11.0737 16.6858 11.0737 16.4886 11.5567L15.42 14.1739C14.8284 15.6229 13.6785 16.7729 12.2295 17.3645L9.61227 18.433C9.12925 18.6302 9.12924 19.3142 9.61227 19.5114L12.2295 20.58C13.6785 21.1716 14.8284 22.3215 15.42 23.7705L16.4886 26.3877C16.6858 26.8707 17.3698 26.8707 17.567 26.3877L18.6355 23.7705C19.2271 22.3215 20.3771 21.1716 21.8261 20.58L24.4433 19.5114C24.9263 19.3142 24.9263 18.6302 24.4433 18.433L21.8261 17.3645C20.3771 16.7729 19.2271 15.6229 18.6355 14.1739L17.567 11.5567Z",fill:"url(#paint0_linear_1116_1338)"}),a.createElement("defs",null,a.createElement("linearGradient",{id:"paint0_linear_1116_1338",x1:"7.92598",y1:"26.75",x2:"31.614",y2:"26.1636",gradientUnits:"userSpaceOnUse"},a.createElement("stop",{stopColor:"var(--cds-color-blue-800)"}),a.createElement("stop",{offset:"1",stopColor:"var(--cds-color-blue-600)"})))))},Ma={conversationContainer:Object(He.c)(At||(At=Be()(["\n    height: 100%;\n  "]))),conversation:Object(He.c)(Tt||(Tt=Be()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    height: 100%;\n    width: 100%;\n    display: flex;\n    flex-flow: column;\n    z-index: 10;\n    border: none;\n    border-radius: var(--cds-border-radius-200);\n    position: relative;\n\n    "," {\n      border-radius: 0;\n    }\n\n    .coach-message {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .coach-message-client {\n      background-color: unset;\n    }\n\n    &.active {\n      opacity: 1;\n      transform: translateY(0);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n\n    &.hidden {\n      z-index: -1;\n      pointer-events: none;\n      opacity: 0;\n      transform: translateY(10px);\n      transition: opacity 0.3s ease, transform 0.3s ease;\n    }\n  "])),Ue.a.down("xs")),headerContainer:Object(He.c)(Rt||(Rt=Be()(["\n    flex-grow: 0;\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n  "]))),coachAvatarContainer:Object(He.c)(Mt||(Mt=Be()(["\n    width: 36px;\n    height: 36px;\n    background: var(--cds-color-interactive-stroke-primary-focus-invert);\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    border-radius: 50%;\n  "]))),endStateContainer:Object(He.c)(Pt||(Pt=Be()(["\n    margin: 0 auto;\n    width: 100%;\n  "]))),footerContainer:Object(He.c)(Ft||(Ft=Be()(["\n    flex-grow: 0;\n    width: 100%;\n    margin: 0 auto;\n    max-width: ",";\n  "])),Ce.b+"px"),divider:Object(He.c)(Lt||(Lt=Be()(["\n    margin: var(--cds-spacing-600) 0;\n  "])))},chat_view_RolePlayChatConversation=function(e){var n=e.onStartButtonClick,t=e.onTryAgainClick,a=e.isTaskResponseLoading,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.rolePlayAiPersonaTitle,o=i.rolePlaySimulationSessionId,s=i.authorCoachItemSyncNotification,c=r&&!!o?{name:r,avatar:Object(He.d)(Ve.a,{css:Ma.coachAvatarContainer},Dt||(Dt=Object(He.d)(icons_AiPersonaAvatar,null)))}:void 0;return Object(He.d)("div",{css:Ma.conversation},s&&Object(He.d)(components_NotificationOverlay,null,s),Object(He.d)(chat_view_RolePlayChatSessions,{coachPersona:c,isTaskResponseLoading:a}),Bt||(Bt=Object(He.d)(pn.a,{color:"light",orientation:"horizontal"})),Object(He.d)(chat_view_RolePlayChatActions,{coachPersona:c,onStartButtonClick:n,onTryAgainClick:t}),Object(He.d)("div",{css:Ma.footerContainer},Object(He.d)(components_Footer,{coachPersona:c&&O()(O()({},c),{},{name:"This Role Play activity"})})))},Pa={coachItemContainer:Object(He.c)(Ht||(Ht=Be()(["\n    margin: 0;\n    width: 100%;\n    height: 100%;\n    overflow-y: hidden;\n\n    "," {\n      margin-top: 1px;\n    }\n\n    .coach-new-message {\n      width: 100%;\n    }\n\n    .coach-input {\n      height: 60px;\n    }\n  "])),Ue.a.down("xs"))},chat_view_ChatView=function(e){var n=e.onStartButtonClick,t=e.onTryAgainClick,i=e.isTaskResponseLoading,r=e.styles,o=useCoachItemChatContext_useCoachItemChatContext(),s=o.courseId,c=o.itemId,d=o.authoringMode,l=o.coachItemType,u=Object(Oe.a)(d),m=Object(Ge.e)();a.useEffect((function(){m("interact_coach",O()(O()({coachInteractionType:"launch_coach_tool",coach:{mode:u}},s&&{product:{type:"course",id:s}}),c&&{courseItem:{id:c}}))}),[s,c,u,m]);var p=l===we.f.SocraticDialogue?"dialogue":"role_play";return Object(He.d)("div",{"data-testid":"coursera-coach-item",id:"coursera-coach-item",css:[Pa.coachItemContainer,r]},Object(He.d)(ln.a,{value:{data:{mode:u,courseId:s,itemId:c,itemType:p}}},Object(He.d)(un.a,{value:{data:{mode:u,courseId:s,itemId:c,itemType:p}}},l===we.f.SocraticDialogue&&(Ut||(Ut=Object(He.d)(chat_view_ChatConversation,null))),l===we.f.RolePlay&&Object(He.d)(chat_view_RolePlayChatConversation,{onStartButtonClick:n,onTryAgainClick:t,isTaskResponseLoading:i}))))},chat_view_HowAmIDoingButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(Ge.e)();return Object(He.d)(dn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_HOW_AM_I_DOING",coach:{mode:b.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(Ce.o,b.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":$e()("How am I doing?"),disabled:a,css:t},$e()("How am I doing?"))},chat_view_ImStuckButton=function(e){var n=e.onClick,t=e.style,a=e.disabled,i=useCoachItemChatContext_useCoachItemChatContext(),r=i.sendMessage,o=i.courseId,s=i.itemId,c=Object(Ge.e)();return Object(He.d)(dn.b,{onClick:function(){c("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_I_AM_STUCK",coach:{mode:b.g.CoachItem},product:{type:"course",id:o},courseItem:{id:s}}),r(Ce.c,b.d.TypedMessage),null==n||n()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":$e()("I'm stuck"),disabled:a,css:t},$e()("I'm stuck"))},Fa=Ge.b.HeadingGroup,La=Ge.b.Content,Da=Ge.b.Actions,Ba={dialogActions:Object(He.c)(Vt||(Vt=Be()(["\n    "," {\n      flex-direction: column;\n\n      button {\n        max-width: 100%;\n        width: 100%;\n      }\n    }\n  "])),Ue.a.down("sm"))},chat_view_NewChatButton=function(e){var n=e.onClick,t=e.onConfirm,i=e.style,r=e.disabled,o=e.buttonText,s=a.useState(!1),c=v()(s,2),d=c[0],l=c[1],u=Object(Ge.e)(),p=useCoachItemChatContext_useCoachItemChatContext(),g=p.startNewChat,h=p.courseId,k=p.itemId,C=p.coachItemType,closeDialog=function(){l(!1),null==n||n()},S=function(){var e=f()(m()().mark((function _callee(){return m()().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:u("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_START_CHAT_NEW_CHAT_DIALOG",coach:{mode:b.g.CoachItem},product:{type:"course",id:h},courseItem:{id:k,type:Object(Oe.h)(C)}}),g(),closeDialog(),null==t||t();case 4:case"end":return e.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(He.d)(a.Fragment,null,Object(He.d)(dn.b,{onClick:function(){u("click_button",{button:{name:"coach_item_new_chat"},courseItem:{id:k,type:Object(Oe.h)(C)}}),l(!0)},size:"medium",variant:"ghost",iconPosition:"before","aria-label":o||(C===we.f.RolePlay?$e()("New session"):$e()("Try again")),disabled:r,css:i},o||(C===we.f.RolePlay?$e()("New session"):$e()("Try again"))),Object(He.d)(Ge.b,{"aria-describedby":"coach-item-new-chat-dialog-content",sticky:"actions",trackingData:{modal:{name:"coach_item_new_chat_dialog"}},open:d,variant:"transactional",onClose:closeDialog},Object(He.d)(Fa,null,$e()("Are you sure?")),Object(He.d)(La,{id:"coach-item-new-chat-dialog-content"},Object(He.d)(ze.a,{component:"p"},C===we.f.RolePlay?$e()("If you start a new session, this one will disappear."):$e()("If you start a new chat, this one will disappear."))),Object(He.d)(Da,null,Object(He.d)(Ve.a,{container:!0,spacing:16,css:Ba.dialogActions},Object(He.d)(Ve.a,{item:!0},Object(He.d)(qe.a,{variant:"primary",size:"medium",onClick:S},C===we.f.RolePlay?$e()("Yes, start a new session"):$e()("Yes, start a new chat"))),Object(He.d)(Ve.a,{item:!0},Object(He.d)(qe.a,{variant:"secondary",size:"medium",onClick:closeDialog},$e()("Cancel")))))))},Ha=n("9rZX"),Ua=n.n(Ha),Va=n("wr+D"),qa=n("+Fz1"),Ga=n("5ydG"),za={headerRight:Object(He.c)(qt||(qt=Be()(["\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n  "]))),headerLeft:Object(He.c)(Gt||(Gt=Be()(["\n    overflow: hidden;\n  "]))),tunnelVisionContentContainer:Object(He.c)(zt||(zt=Be()(["\n    width: 100%;\n    height: 100%;\n    position: relative;\n  "]))),closeElementContainer:Object(He.c)(Wt||(Wt=Be()(["\n    display: flex;\n    align-items: center;\n  "]))),tunnelVision:Object(He.c)(Yt||(Yt=Be()(["\n    .rc-TunnelVision div[data-classname='tunnelvision-window-0'] {\n      "," {\n        margin-left: 0;\n      }\n    }\n\n    .rc-TunnelVisionHeader {\n      > div {\n        overflow-x: hidden;\n      }\n    }\n\n    .rc-TunnelVisionClose {\n      background-color: var(--cds-color-neutral-background-primary);\n      margin-right: var(--cds-spacing-100);\n\n      &:focus,\n      &:hover {\n        background-color: var(--cds-color-interactive-stroke-primary-focus-invert);\n      }\n\n      "," {\n        margin-right: var(--cds-spacing-200);\n      }\n    }\n  "])),Ue.a.down("sm"),Ue.a.up("md"))},TunnelVisionWrapper_TunnelVisionWrapper=function(e){var n=e.onClose,t=e.headerLeft,i=e.headerRight,r=e.topBanner,o=e.children,s=e.ariaLabel,c=e.backbuttonAriaLabel,d=e.shouldConfirmClose,l=a.useState(!1),u=v()(l,2),m=u[0],p=u[1],f=a.useState(!1),g=v()(f,2),h=g[0],b=g[1],k=a.useState(null),C=v()(k,2),S=C[0],y=C[1],O=a.useRef(null),scrollPage=function(e){O.current&&O.current.scrollTo(0,e)},I=a.useCallback((function(e){if(O.current){var n=O.current.scrollTop||0;switch(e.keyCode){case 38:if(n<=0)return;scrollPage(n-50);break;case 33:if(n<=0)return;scrollPage(n-O.current.clientHeight);break;case 36:scrollPage(0);break;case 40:if(n>=O.current.scrollHeight)return;scrollPage(n+50);break;case 34:if(n>=O.current.scrollHeight)return;scrollPage(n+O.current.clientHeight);break;case 35:scrollPage(O.current.scrollHeight)}}}),[]);a.useEffect((function(){return Ua.a.setAppElement("#rendered-content"),p(!0),document.addEventListener("keydown",I),function(){document.removeEventListener("keydown",I)}}),[I]);return Object(He.d)(Ua.a,{style:{overlay:{position:"relative",zIndex:4e3}},isOpen:m,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,css:za.tunnelVision,contentLabel:s},Object(He.d)(qa.a,{onClose:n,disableKeyPress:!0,shouldAllowClose:function(e){return!d||(b(!0),y(e||null),!1)},closeElement:Kt||(Kt=Object(He.d)(Va.a,null)),headerElement:Object(He.d)(Ve.a,{container:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header"},Object(He.d)(Ve.a,{item:!0,xs:9,sm:8,md:6,css:za.headerLeft},t),Object(He.d)(Ve.a,{item:!0,xs:3,sm:4,md:6,justifyContent:"flex-end",css:za.headerRight},i)),ariaLabel:s,backbuttonAriaLabel:c},Object(He.d)(Ve.a,{ref:O,css:za.tunnelVisionContentContainer,id:"TUNNELVISIONWRAPPER_CONTENT_ID","data-testid":"tunnel-vision-content"},r&&Object(He.d)(Ve.a,{role:"alert","aria-live":"assertive"},r),o),h&&Object(He.d)(Ga.a,{onPrimaryButtonClick:function(){b(!1),y(null),S&&S()},onCancelButtonClick:function(){b(!1),y(null)}})))},Wa={itemName:Object(He.c)(Qt||(Qt=Be()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),itemNameSupportText:Object(He.c)(Jt||(Jt=Be()(["\n    overflow: hidden;\n    white-space: nowrap;\n    text-overflow: ellipsis;\n  "]))),headerRight:Object(He.c)($t||($t=Be()(["\n    margin-right: var(--cds-spacing-150);\n    width: 100%;\n  "]))),menuButton:Object(He.c)(Zt||(Zt=Be()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),menuItemButton:Object(He.c)(Xt||(Xt=Be()(["\n    max-width: unset;\n    width: 100%;\n    display: flex;\n    justify-content: flex-start;\n    margin-bottom: var(--cds-spacing-100);\n\n    img,\n    svg {\n      /* To override the CDS gap between icon and text */\n      margin-right: var(--cds-spacing-200) !important;\n    }\n  "])))},Ya=on.a.HeadingGroup,Ka=on.a.Content,chat_view_DialogueChatViewTunnelVision=function(){var e=useCoachItemChatContext_useCoachItemChatContext(),n=e.coachItemType,t=e.isDialogueLoading,i=e.itemName,r=e.chatIsOpen,o=e.setChatIsOpen,s=Object(Ge.e)(),c=Object(h.c)((function(e){return e.sessionState.chatState})),d=hasDialogueChatStarted(Object(h.c)((function(e){return e.messages.messages}))),l=a.useState(!1),u=v()(l,2),m=u[0],p=u[1],toggleIsEndDialogueDialogOpen=function(){return p((function(e){return!e}))},f=Object(h.c)((function(e){return e.behavior.messageLoader})),g=!d||f,b=a.useState(!1),k=v()(b,2),C=k[0],S=k[1],y=Object(sn.a)(Ue.a.down("sm")),closeActionsDialog=function(){S(!1)};return r?Object(He.d)(TunnelVisionWrapper_TunnelVisionWrapper,{onClose:function(){s("click_button",{button:{name:"coach_item_tv_back_button"}}),o(!1)},ariaLabel:$e()("Dialogue"),backbuttonAriaLabel:$e()("Close dialogue"),headerLeft:Object(He.d)("div",null,Object(He.d)(ze.a,{variant:"subtitleLarge",component:"h1",css:Wa.itemName},i),Object(He.d)(ze.a,{component:"p",variant:"bodySecondary",color:"supportText",css:Wa.itemNameSupportText},$e()("Dialogue"))),headerRight:!t&&Object(He.d)(a.Fragment,null,y?Object(He.d)(cn.a,{intent:"menu",variant:"ghost",onClick:function(){S(!0)},"aria-label":$e()("Dialogue actions"),css:Wa.menuButton}):Object(He.d)(Ve.a,{container:!0,justifyContent:"flex-end",alignItems:"center",direction:"row",wrap:"nowrap",css:Wa.headerRight,spacing:12},n===we.f.SocraticDialogue&&Object(He.d)(a.Fragment,null,Object(He.d)(Ve.a,{item:!0},Object(He.d)(chat_view_HowAmIDoingButton,{disabled:g||"ACTIVE"!==c})),Object(He.d)(Ve.a,{item:!0},Object(He.d)(chat_view_ImStuckButton,{disabled:g||"ACTIVE"!==c}))),Object(He.d)(Ve.a,{item:!0},"ENDED"!==c?Object(He.d)(dn.b,{onClick:toggleIsEndDialogueDialogOpen,size:"medium",variant:"ghost",iconPosition:"before","aria-label":$e()("End Dialogue"),disabled:g},$e()("End Dialogue")):Object(He.d)(chat_view_NewChatButton,{disabled:g})))),topBanner:void 0},ea||(ea=Object(He.d)(chat_view_ChatView,null)),Object(He.d)(on.a,{open:C,onClose:closeActionsDialog,"aria-describedby":"dialog-actions-content",anchor:"right"},Object(He.d)(Ya,null,$e()("Dialogue actions")),Object(He.d)(Ka,{id:"dialog-actions-content"},Object(He.d)(Ve.a,{container:!0,direction:"column",alignItems:"flex-start"},n===we.f.SocraticDialogue&&Object(He.d)(a.Fragment,null,Object(He.d)(chat_view_HowAmIDoingButton,{onClick:closeActionsDialog,style:Wa.menuItemButton,disabled:g||"ACTIVE"!==c}),Object(He.d)(chat_view_ImStuckButton,{onClick:closeActionsDialog,style:Wa.menuItemButton,disabled:g||"ACTIVE"!==c})),"ENDED"!==c?Object(He.d)(dn.b,{onClick:function(){toggleIsEndDialogueDialogOpen(),closeActionsDialog()},size:"medium",variant:"ghost",iconPosition:"before","aria-label":$e()("End Dialogue"),css:Wa.menuItemButton,disabled:g},$e()("End Dialogue")):Object(He.d)(chat_view_NewChatButton,{onClick:closeActionsDialog,style:Wa.menuItemButton,disabled:g})))),Object(He.d)(chat_view_EndDialogueDialog,{onClose:function(){return p(!1)},isOpen:m})):null},Qa=n("UWlR"),Ja=n("pVnL"),$a=n.n(Ja),Za=["title","subTitle","headerRightElement","backButtonRef"],Xa={headerContainer:Object(He.c)(na||(na=Be()(["\n    position: sticky;\n    top: 0;\n    left: 0;\n    max-height: ","px;\n    height: ","px;\n    width: 100%;\n    padding: var(--cds-spacing-200);\n    border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n    border-radius: var(--cds-spacing-150) var(--cds-spacing-150) 0 0;\n    background-color: var(--cds-color-neutral-background-primary);\n  "])),68,68),titleSection:Object(He.c)(ta||(ta=Be()(["\n    overflow: hidden;\n\n    "," {\n      width: 60%;\n    }\n  "])),Ue.a.down("sm")),title:Object(He.c)(aa||(aa=Be()(["\n    overflow: hidden;\n    text-overflow: ellipsis;\n    white-space: nowrap;\n  "]))),closeButtonIcon:Object(He.c)(ia||(ia=Be()(["\n    margin-right: var(--cds-spacing-150);\n    color: var(--cds-color-neutral-primary);\n    border-radius: 50%;\n\n    "," {\n      margin-right: 0;\n    }\n  "])),Ue.a.down("sm")),actionButton:Object(He.c)(ra||(ra=Be()(["\n    color: var(--cds-color-neutral-primary);\n  "]))),header:Object(He.c)(oa||(oa=Be()(["\n    "," {\n      flex-shrink: 1;\n      min-width: 0;\n    }\n  "])),Ue.a.down("sm"))},ei=a.forwardRef((function(e,n){var t=e.closeButtonIcon,a=e.tooltip,i=e.closeButtonAriaLabel,r=e.onClose;return Object(He.d)(cn.a,{ref:n,css:Xa.closeButtonIcon,component:"button",icon:t||sa||(sa=Object(He.d)(Va.a,null)),size:"medium",variant:"ghost",onClick:r,tooltip:a||$e()("Back"),"aria-label":i||$e()("Close Tunnel Vision")})}));ei.displayName="BackButton";var ni,ti,ai,ii,ri,oi,si,ci,di,li,ui,mi,pi,fi,gi,vi,hi,bi,ki,Ci,Si,yi,Oi,Ii,wi,ji,xi,Ei,_i,Ni,Ai,Ti,Ri,Mi,Pi,Fi,Li,Di,Bi,Hi,Ui,Vi,qi,Gi,zi,Wi,Yi,Ki,Qi,Ji,$i,Zi,Xi,er,nr,tr,ar,ir,rr,or,sr,cr,dr,MainPanelHeader_MainPanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.headerRightElement,i=e.backButtonRef,r=l()(e,Za);return Object(He.d)(Ve.a,{container:!0,alignItems:"center",wrap:"nowrap",css:Xa.headerContainer},Object(He.d)(Ve.a,{item:!0},Object(He.d)(ei,$a()({},r,{ref:i}))),Object(He.d)(Ve.a,{container:!0,item:!0,justifyContent:"space-between",alignItems:"center","data-testid":"tunnel-vision-header",css:Xa.header},Object(He.d)(Ve.a,{item:!0,css:Xa.titleSection},Object(He.d)(ze.a,{component:"h1",variant:"subtitleLarge",css:Xa.title},n),t&&Object(He.d)(ze.a,{component:"span",variant:"bodySecondary"},t)),a&&Object(He.d)(Ve.a,{item:!0},a)))},lr={reactModal:Object(He.c)(ni||(ni=Be()(["\n    outline: none;\n  "]))),modalOverlay:Object(He.c)(ti||(ti=Be()(["\n    position: fixed;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100dvh; /* dvh = device viewport height: required so that on iOS devices elements do not extend beneath browser's interface such as the bottom navigation bar */\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    /* Prevent mobile scrolling and touch behaviors */\n    overflow: hidden;\n    touch-action: none;\n    -webkit-overflow-scrolling: touch;\n\n    /* Ensure proper stacking and positioning */\n    z-index: 9999;\n  "]))),modalContent:Object(He.c)(ai||(ai=Be()(["\n    width: 100%;\n    height: 100%;\n    padding: var(--cds-spacing-200);\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n\n    /* Allow internal scrolling while preventing document scroll */\n    overflow-y: auto;\n    -webkit-overflow-scrolling: touch;\n\n    "," {\n      padding: var(--cds-spacing-200);\n\n      /* Ensure content stays within viewport on mobile */\n      max-height: 100%;\n    }\n  "])),Ue.a.down("sm")),temporaryDrawer:Object(He.c)(ii||(ii=Be()(["\n    button {\n      color: var(--cds-color-neutral-primary);\n    }\n  "]))),closeButtonIcon:Object(He.c)(ri||(ri=Be()(["\n    margin-right: var(--cds-spacing-150);\n  "]))),globalStyles:function(e){return Object(He.c)(oi||(oi=Be()(["\n    @keyframes slideIn {\n      from {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n\n      to {\n        transform: translateX(0);\n        opacity: 1;\n      }\n    }\n\n    @keyframes slideOut {\n      from {\n        transform: translateX(0);\n        opacity: 1;\n      }\n\n      to {\n        transform: translateX(100%);\n        opacity: 0;\n      }\n    }\n\n    .ReactModal__Overlay {\n      opacity: 0;\n      animation: "," ","ms ease-out forwards;\n    }\n\n    .ReactModal__Overlay--after-open {\n      opacity: 1;\n    }\n\n    .ReactModal__Overlay--before-close {\n      opacity: 0;\n    }\n  "])),e?"slideIn":"slideOut",400)}},components_TunnelVision=function(e){var n=e.ariaLabel,t=e.isOpen,i=void 0!==t&&t,r=e.children,o=e.initialFocusRef;a.useEffect((function(){Ua.a.setAppElement("#rendered-content")}),[]),a.useEffect((function(){if(i){var e=document.body.style.overflow,n=document.body.style.position;return document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",function(){document.body.style.overflow=e,document.body.style.position=n,document.body.style.width="",document.body.style.height=""}}}),[i]);var s=a.useCallback((function(){null!=o&&o.current&&o.current.focus()}),[o]);return Object(He.d)(a.Fragment,null,Object(He.d)(He.b,{styles:lr.globalStyles(i)}),Object(He.d)(Ua.a,{style:{overlay:{position:"relative",zIndex:4e3}},closeTimeoutMS:400,isOpen:i,onAfterOpen:s,shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,shouldFocusAfterRender:!o,css:lr.reactModal},Object(He.d)("div",{css:lr.modalOverlay,"aria-label":n},Object(He.d)("div",{css:lr.modalContent},r))))},ur=n("ojHA"),mr=n("JYd8"),pr=Object(mr.a)("ComprehensionCheckIcon",{ltr:{large:function(e){return i.a.createElement(i.a.Fragment,null,i.a.createElement("path",{d:"M9.996 18c-.414 0-.767-.147-1.059-.44A1.45 1.45 0 018.5 16.5h3c0 .417-.147.77-.442 1.063A1.456 1.456 0 019.996 18zm-2.24-2.5a.738.738 0 01-.537-.214.714.714 0 01-.219-.532c0-.21.072-.39.215-.535A.719.719 0 017.75 14h4.495c.212 0 .391.072.537.214.146.143.219.32.219.532 0 .21-.072.39-.215.535a.719.719 0 01-.534.219H7.756zM6.687 13a5.355 5.355 0 01-1.99-2.135A6.127 6.127 0 014 8c0-1.667.583-3.083 1.75-4.25C6.917 2.583 8.333 2 10 2c1.667 0 3.083.583 4.25 1.75C15.417 4.917 16 6.333 16 8a6.127 6.127 0 01-.698 2.865A5.355 5.355 0 0113.312 13H6.689zm.48-1.5h5.666a4.49 4.49 0 001.23-1.563A4.442 4.442 0 0014.5 8c0-1.255-.436-2.318-1.308-3.19-.872-.874-1.934-1.31-3.187-1.31s-2.318.436-3.193 1.31C5.938 5.681 5.5 6.744 5.5 8c0 .68.146 1.326.438 1.938A4.489 4.489 0 007.167 11.5z",fill:"currentColor"}))}}},!1),fr={sidePanelItemContainer:function(e){return Object(He.c)(si||(si=Be()(["\n    display: ",";\n    height: 100%;\n  "])),e?"block":"none")},sidePanelTabBar:Object(He.c)(ci||(ci=Be()(["\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n    padding: var(--cds-spacing-150) 0;\n    height: 100%;\n\n    "," {\n      flex-direction: row;\n      justify-content: space-around;\n      height: auto;\n    }\n  "])),Ue.a.down("sm"))},gr={splitPanelView:Object(He.c)(di||(di=Be()(["\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n    align-items: stretch;\n    height: 100%;\n    max-height: 100%;\n\n    "," {\n      flex-direction: column;\n    }\n  "])),Ue.a.down("sm")),mainPanelContent:function(e){return Object(He.c)(li||(li=Be()(["\n    position: relative;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    flex-grow: 1;\n    display: block;\n\n    "," {\n      display: ",";\n      height: ",";\n    }\n  "])),Ue.a.down("sm"),e?"none":"block",e?"0":"calc(100% - ".concat(72,"px)"))},sidePanelContent:function(e){return Object(He.c)(ui||(ui=Be()(["\n    height: 100%;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    width: ","px;\n    min-width: ","px;\n    flex-shrink: 0;\n    display: ",";\n    margin-left: var(--cds-spacing-200);\n\n    "," {\n      width: 100%;\n      height: ",";\n      margin: 0;\n      flex-grow: 1;\n    }\n  "])),300,300,e?"block":"none",Ue.a.down("sm"),e?"calc(100% - ".concat(72,"px)"):"0")},sidePanelTabBarContainer:Object(He.c)(mi||(mi=Be()(["\n    height: 100%;\n    width: ","px;\n    min-width: ","px;\n    background-color: var(--cds-color-emphasis-neutral-background-xweak);\n    flex-shrink: 0;\n    margin-left: var(--cds-spacing-100);\n\n    button {\n      background-color: inherit;\n    }\n\n    "," {\n      height: ","px;\n      width: 100%;\n    }\n  "])),72,72,Ue.a.down("sm"),72)},vr={splitPanelView:Object(He.c)(pi||(pi=Be()(["\n    display: flex;\n    flex-wrap: nowrap;\n    width: 100%;\n    align-items: stretch;\n    height: 100%;\n    max-height: 100%;\n\n    "," {\n      flex-direction: column;\n    }\n  "])),Ue.a.down("sm")),mainPanelContent:function(e){return Object(He.c)(fi||(fi=Be()(["\n    position: relative;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    flex-grow: 1;\n    display: ",";\n\n    "," {\n      display: ",";\n      height: ",";\n    }\n  "])),e?"none":"block",Ue.a.down("sm"),e?"none":"block",e?"0":"calc(100% - ".concat(72,"px)"))},sidePanelContent:function(e){return Object(He.c)(gi||(gi=Be()(["\n    height: 100%;\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-spacing-150);\n    flex-grow: 1;\n    width: auto;\n    min-width: unset;\n    display: ",";\n\n    "," {\n      width: 100%;\n      height: ",";\n      margin: 0;\n      flex-grow: 1;\n    }\n  "])),e?"block":"none",Ue.a.down("sm"),e?"calc(100% - ".concat(72,"px)"):"0")},sidePanelTabBarContainer:Object(He.c)(vi||(vi=Be()(["\n    height: 100%;\n    width: ","px;\n    min-width: ","px;\n    background-color: var(--cds-color-neutral-background-primary);\n    flex-shrink: 0;\n    border-left: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n\n    button {\n      background-color: inherit;\n    }\n\n    "," {\n      height: ","px;\n      width: 100%;\n      border-left: none;\n      border-top: 1px solid var(--cds-color-neutral-stroke-primary);\n    }\n  "])),72,72,Ue.a.down("sm"),72)},components_SplitPanelView=function(e){var n=e.mainContent,t=e.panels,a=e.selectedPanel,i=e.onPanelChange,r=e.isSidePanelExpanded,o=void 0!==r&&r,s=e.testId,c=e.isSinglePanelMode,handleSelectItem=function(e){i(e,a!==e||!o)},d=function(e){var n=e?vr:gr;return O()(O()({},n),fr)}(void 0!==c&&c);return Object(He.d)("div",{css:d.splitPanelView,"data-testid":s||"split-panel-view"},Object(He.d)("div",{css:d.mainPanelContent(o)},n),Object(He.d)("div",{css:d.sidePanelContent(o),"data-testid":"side-panel-content"},t.map((function(e){var n=a===e.name;return Object(He.d)("div",{key:e.name,role:"tabpanel",id:"tabpanel-".concat(e.name),"aria-labelledby":"tab-".concat(e.name),tabIndex:n?0:-1,css:d.sidePanelItemContainer(n),"aria-hidden":!n},e.component)}))),Object(He.d)("div",{css:d.sidePanelTabBarContainer},Object(He.d)("div",{css:d.sidePanelTabBar,role:"tablist"},t.map((function(e){var n=e.name,t=e.icon,i=e.displayName,r=o&&n===a,s=!e.enabled;return Object(He.d)(dn.l,{role:"tab",size:"medium",key:n,id:"tab-".concat(n),"aria-label":n,"aria-controls":"tabpanel-".concat(n),onClick:function(){return handleSelectItem(n)},onKeyDown:function(e){return function(e,n){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),handleSelectItem(n))}(e,n)},icon:t,disabled:s,"data-testid":"side-panel-tab-".concat(n),selected:r,"aria-selected":r,tabIndex:0},i)})))))},hr=n("fdGY"),br={header:Object(He.c)(hi||(hi=Be()(["\n    ","\n    justify-content: space-between;\n    width: unset;\n  "])),Xa.headerContainer),titleSection:Object(He.c)(bi||(bi=Be()(["\n    display: flex;\n    flex-direction: column;\n  "]))),closeButton:Object(He.c)(ki||(ki=Be()(["\n    border-radius: 50%;\n  "]))),closeButtonIcon:Object(He.c)(Ci||(Ci=Be()(["\n    color: var(--cds-color-neutral-primary);\n  "])))},components_SidePanelHeader=function(e){var n=e.title,t=e.subTitle,a=e.onClose;return Object(He.d)(Ve.a,{container:!0,alignItems:"center",wrap:"nowrap",css:br.header},Object(He.d)(Ve.a,{css:br.titleSection},Object(He.d)(ze.a,{component:"h4",variant:"actionPrimary"},n),t&&Object(He.d)(ze.a,{component:"span",variant:"bodySecondary"},t)),Object(He.d)(Ge.a,{trackingData:{button:{name:"coach_item_authoring_preview_panel_close"}},onClick:a,size:"small",variant:"ghost","aria-label":$e()("Close #{title} panel",{title:n}),css:br.closeButton},Object(He.d)(hr.a,{size:"medium",title:$e()("Close"),css:br.closeButtonIcon})))},kr={overviewContent:Object(He.c)(Si||(Si=Be()(["\n    padding: var(--cds-spacing-200) var(--cds-spacing-300);\n    height: calc(100% - ","px);\n    overflow-y: auto;\n  "])),68)},components_RolePlayOverviewPanel=function(e){var n=e.onClose,t=e.overviewInstructions;return Object(He.d)(a.Fragment,null,Object(He.d)(components_SidePanelHeader,{title:$e()("Overview"),subTitle:$e()("Reference these details in the Role Play."),onClose:n}),Object(He.d)(components_LearnerOverview,{overviewInstructions:t,style:kr.overviewContent}))},Cr=n("+H68"),Sr=n("dYbo"),icons_LightBulbIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-neutral-primary)":n,i=e.width,r=void 0===i?24:i,o=e.height,s=void 0===o?24:o;return(a.createElement("svg",{width:r,height:s,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg","data-testid":"lightbulb-icon"},a.createElement("mask",{id:"mask0_3768_45643",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"24",height:"24"},yi||(yi=a.createElement("rect",{width:"24",height:"24",fill:"var(--cds-color-grey-100)"}))),a.createElement("g",{mask:"url(#mask0_3768_45643)"},a.createElement("path",{d:"M12 22C11.45 22 10.9792 21.8042 10.5875 21.4125C10.1958 21.0208 10 20.55 10 20H14C14 20.55 13.8042 21.0208 13.4125 21.4125C13.0208 21.8042 12.55 22 12 22ZM8 19V17H16V19H8ZM8.25 16C7.1 15.3167 6.1875 14.4 5.5125 13.25C4.8375 12.1 4.5 10.85 4.5 9.5C4.5 7.41667 5.22917 5.64583 6.6875 4.1875C8.14583 2.72917 9.91667 2 12 2C14.0833 2 15.8542 2.72917 17.3125 4.1875C18.7708 5.64583 19.5 7.41667 19.5 9.5C19.5 10.85 19.1625 12.1 18.4875 13.25C17.8125 14.4 16.9 15.3167 15.75 16H8.25ZM8.85 14H15.15C15.9 13.4667 16.4792 12.8083 16.8875 12.025C17.2958 11.2417 17.5 10.4 17.5 9.5C17.5 7.96667 16.9667 6.66667 15.9 5.6C14.8333 4.53333 13.5333 4 12 4C10.4667 4 9.16667 4.53333 8.1 5.6C7.03333 6.66667 6.5 7.96667 6.5 9.5C6.5 10.4 6.70417 11.2417 7.1125 12.025C7.52083 12.8083 8.1 13.4667 8.85 14Z",fill:t}))))},yr={hintContainer:Object(He.c)(Oi||(Oi=Be()(["\n    background-color: var(--cds-color-neutral-background-primary);\n    border-radius: var(--cds-border-radius-200);\n    border: 1px solid var(--cds-color-grey-50);\n    padding: var(--cds-spacing-150) var(--cds-spacing-200);\n    transition: all 0.2s ease-in-out;\n\n    "," {\n      width: 100%;\n    }\n  "])),Ue.a.down("sm")),hintHeader:Object(He.c)(Ii||(Ii=Be()(["\n    display: flex;\n    align-items: center;\n    cursor: pointer;\n    justify-content: space-between;\n    gap: var(--cds-spacing-100);\n  "]))),titleWrapper:Object(He.c)(wi||(wi=Be()(["\n    display: flex;\n    align-items: center;\n    gap: var(--cds-spacing-150);\n  "]))),title:function(e){return Object(He.c)(ji||(ji=Be()(["\n    color: ",";\n  "])),e?"var(--cds-color-neutral-primary)":"var(--cds-color-neutral-primary-weak)")},content:Object(He.c)(xi||(xi=Be()(["\n    margin-top: var(--cds-spacing-150);\n  "]))),actionBar:Object(He.c)(Ei||(Ei=Be()(["\n    display: flex;\n    justify-content: end;\n    align-items: center;\n  "])))},hints_HintMessage=function(e){var n,t=e.title,i=e.hintMessage,r=e.hintMessageId,o=e.defaultUserFeedback,s=useRolePlayHintsContext_useRolePlayHintsContext(),c=s.expandedHintMessages,d=s.setExpandedHintMessages,l=null!==(n=null==c?void 0:c[r])&&void 0!==n&&n,toggleExpanded=function(){d(O()(O()({},c),{},S()({},r,!l)))},u=a.useState(null!=o?o:T.a.unset),m=v()(u,2),p=m[0],f=m[1];return Object(He.d)(Ve.a,{css:yr.hintContainer},Object(He.d)(Ve.a,{role:"button",css:yr.hintHeader,"aria-expanded":l,onClick:toggleExpanded,tabIndex:0,"aria-controls":"hint-content-".concat(t),onKeyDown:function(e){"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),toggleExpanded())}},Object(He.d)(Ve.a,{css:yr.titleWrapper},Object(He.d)(icons_LightBulbIcon,{color:l?"var(--cds-color-neutral-primary)":"var(--cds-color-grey-700)",height:16,width:16}),Object(He.d)(ze.a,{component:"span",variant:"actionSecondary",css:yr.title(l)},t)),l?_i||(_i=Object(He.d)(Cr.a,null)):Ni||(Ni=Object(He.d)(Sr.a,null))),l&&Object(He.d)(a.Fragment,null,Object(He.d)(Ve.a,{css:yr.content},Object(He.d)(ze.a,{id:"hint-content-".concat(t),component:"div",variant:"bodyPrimary",color:"emphasis.neutral"},i)),Object(He.d)(Ve.a,{css:yr.actionBar},Object(He.d)(R.d,{message:{text:i,customId:r,sender:T.d.RESPONSE,userFeedback:p},onFeedbackSelect:f}))))},Or={panel:Object(He.c)(Ai||(Ai=Be()(["\n    background: var(--cds-color-neutral-background-primary);\n    border-radius: 12px;\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n    height: calc(100% - ","px);\n  "])),68),hintsList:Object(He.c)(Ti||(Ti=Be()(["\n    display: flex;\n    flex-direction: column;\n    gap: var(--cds-spacing-150);\n    overflow-y: auto;\n    overflow-x: hidden;\n    margin: 0 var(--cds-spacing-50);\n    padding: var(--cds-spacing-200);\n    margin-bottom: auto;\n  "]))),askForHintButton:Object(He.c)(Ri||(Ri=Be()(["\n    margin-right: auto;\n    margin-left: var(--cds-spacing-200);\n    margin-bottom: var(--cds-spacing-200);\n    margin-top: var(--cds-spacing-200);\n  "]))),emptyState:Object(He.c)(Mi||(Mi=Be()(["\n    padding-top: var(--cds-spacing-200);\n    padding-left: var(--cds-spacing-200);\n    padding-right: var(--cds-spacing-200);\n  "]))),loadingCard:Object(He.c)(Pi||(Pi=Be()(["\n    padding: var(--cds-spacing-300) var(--cds-spacing-200);\n  "])))},HintsPanel_AskHintButton=function(e){var n=e.onClick,t=e.disabled,a=e.loading;return Object(He.d)(dn.b,{size:"small",variant:"secondary",onClick:n,css:Or.askForHintButton,disabled:t,loading:a},$e()("Ask for a hint"))},HintsPanel_HintsPanelContent=function(e){var n=e.canAskForHint,t=useRolePlayHintsContext_useRolePlayHintsContext(),i=t.requestNewHint,r=t.hints,o=t.isLoadingNewHint,s=t.isLoadingExistingHints,c=t.error,d=t.courseId,l=t.itemId,u=t.expandedHintMessages,p=t.setExpandedHintMessages,g=a.useRef(void 0),v=a.useRef(null),h=a.useRef(null),k=Object(Ge.e)(),C="NO_MESSAGES"===(null==c?void 0:c.type),y=o||s,I=r&&r.length>0,w=(null==r?void 0:r.length)||0,j=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;Object(a.useEffect)((function(){var e=SidePanelPersistenceUtils_getSidePanelState(j);j&&null!=e&&e.expandedHintMessages&&p(null==e?void 0:e.expandedHintMessages)}),[j,p]),a.useEffect((function(){var e,n;v.current&&(null===(e=(n=v.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[w]),a.useEffect((function(){var e,n;h.current&&(null===(e=(n=h.current).scrollIntoView)||void 0===e||e.call(n,{behavior:"smooth"}))}),[o]);var x=function(){var e=f()(m()().mark((function _callee(){var e;return m()().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return k("interact_coach",{coachInteractionType:"click_action",coachAction:"COACH_ITEM_GENERATE_HINT",coach:{mode:b.g.CoachItem},product:{type:"course",id:d},courseItem:{id:l}}),n.next=3,i();case 3:(e=n.sent)&&e.length>0&&(g.current=e[e.length-1].messageId,p(O()(O()({},u),{},S()({},g.current,!0))));case 5:case"end":return n.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return!r&&C?Object(He.d)("div",null,Object(He.d)(ze.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:Or.emptyState},$e()('Something went wrong, please try again by clicking Ask for a hint"')),Object(He.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:y})):I?Object(He.d)("div",{css:Or.panel},Object(He.d)("div",{css:Or.hintsList},r.map((function(e,n){var t=e.messageId===g.current;return Object(He.d)("div",{key:e.messageId,ref:t?v:null},Object(He.d)(hints_HintMessage,{title:$e()("Hint #{index}",{index:n+1}),hintMessage:e.message,hintMessageId:e.messageId,defaultUserFeedback:e.userFeedback}))})),o&&Object(He.d)("div",{css:[yr.hintContainer,Or.loadingCard],ref:h},Fi||(Fi=Object(He.d)(Kn.a,{variant:"text"})),Li||(Li=Object(He.d)(Kn.a,{variant:"text"})),Di||(Di=Object(He.d)(Kn.a,{variant:"text"})))),Object(He.d)("div",{"data-testid":"hints-footer"},Bi||(Bi=Object(He.d)(pn.a,null)),Object(He.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:y}))):Object(He.d)("div",{css:Or.panel},Object(He.d)("div",{"data-testid":"hints-empty-state"},Object(He.d)(ze.a,{variant:"bodyPrimary",color:"emphasis.neutral",component:"div",css:Or.emptyState},$e()("No hints here yet! When things get tricky, hints can point you in the right direction.")),Object(He.d)(HintsPanel_AskHintButton,{onClick:x,disabled:!n,loading:y})))},hints_HintsPanel=function(e){var n=e.canAskForHint,t=e.onClose,i=useRolePlayHintsContext_useRolePlayHintsContext(),r=i.loadHints,o=i.hints,s=i.resetHintsChatSession,c=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId;return a.useEffect((function(){c&&r(),o&&!c&&s()}),[c]),Object(He.d)(a.Fragment,null,Object(He.d)(components_SidePanelHeader,{title:$e()("Hints"),subTitle:$e()("#{itemsCount} received",{itemsCount:(null==o?void 0:o.length)||0}),onClose:t}),Object(He.d)(HintsPanel_HintsPanelContent,{canAskForHint:n}))},icons_TaskIcon=function(e){var n=e.color,t=void 0===n?"var(--cds-color-grey-950)":n,i=e.width,r=void 0===i?24:i,o=e.height,s=void 0===o?24:o;return(a.createElement("svg",{width:r,fill:t,height:s,viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg"},a.createElement("mask",{id:"mask0_6366_5843",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"16",height:"16"},Hi||(Hi=a.createElement("rect",{width:"16",height:"16",fill:"var(--cds-color-grey-100)"}))),Ui||(Ui=a.createElement("g",{mask:"url(#mask0_6366_5843)"},a.createElement("path",{d:"M10.3333 13.2837L7.5 10.4503L8.43333 9.51699L10.3333 11.417L14.1 7.65033L15.0333 8.58366L10.3333 13.2837ZM14 6.66699H12.6667V3.33366H11.3333V5.33366H4.66667V3.33366H3.33333V12.667H7.33333V14.0003H3.33333C2.96667 14.0003 2.65278 13.8698 2.39167 13.6087C2.13056 13.3475 2 13.0337 2 12.667V3.33366C2 2.96699 2.13056 2.6531 2.39167 2.39199C2.65278 2.13088 2.96667 2.00033 3.33333 2.00033H6.11667C6.23889 1.61144 6.47778 1.29199 6.83333 1.04199C7.18889 0.791992 7.57778 0.666992 8 0.666992C8.44444 0.666992 8.84167 0.791992 9.19167 1.04199C9.54167 1.29199 9.77778 1.61144 9.9 2.00033H12.6667C13.0333 2.00033 13.3472 2.13088 13.6083 2.39199C13.8694 2.6531 14 2.96699 14 3.33366V6.66699ZM8 3.33366C8.18889 3.33366 8.34722 3.26977 8.475 3.14199C8.60278 3.01421 8.66667 2.85588 8.66667 2.66699C8.66667 2.4781 8.60278 2.31977 8.475 2.19199C8.34722 2.06421 8.18889 2.00033 8 2.00033C7.81111 2.00033 7.65278 2.06421 7.525 2.19199C7.39722 2.31977 7.33333 2.4781 7.33333 2.66699C7.33333 2.85588 7.39722 3.01421 7.525 3.14199C7.65278 3.26977 7.81111 3.33366 8 3.33366Z"})))))},Ir={completedTask:Object(He.c)(Vi||(Vi=Be()(["\n    display: flex;\n    gap: var(--cds-spacing-100);\n    color: var(--cds-color-green-700);\n    text-decoration: line-through;\n  "]))),taskItemContainer:Object(He.c)(qi||(qi=Be()(["\n    margin-left: 0;\n    gap: var(--cds-spacing-50);\n    width: 100%;\n\n    &:not(:last-of-type) {\n      margin-bottom: var(--cds-spacing-50);\n    }\n  "]))),bulletStyle:Object(He.c)(Gi||(Gi=Be()(["\n    padding: unset !important;\n    padding-top: var(--cds-spacing-50) !important;\n    font-size: 24px;\n    color: var(--cds-color-grey-100);\n  "]))),taskItem:Object(He.c)(zi||(zi=Be()(["\n    margin: 0;\n    flex: 1;\n    padding: var(--cds-spacing-50) 0 !important;\n  "]))),iconContainer:Object(He.c)(Wi||(Wi=Be()(["\n    width: var(--cds-spacing-300);\n  "])))},TaskItem_CompletedTaskItem=function(e){var n=e.task;return Object(He.d)("div",{css:Ir.completedTask},Object(He.d)("div",{css:Ir.iconContainer},Yi||(Yi=Object(He.d)(en.a,{size:"medium",color:"success"}))),Object(He.d)(ze.a,{"data-testid":"completed-task-".concat(n.title),component:"p",variant:"bodySecondary",color:"success"},n.title))},TaskItem_LoadingTaskItem=function(){return Object(He.d)(Ve.a,{container:!0,spacing:8,css:Ir.taskItemContainer},Object(He.d)(Ve.a,{item:!0,css:Ir.bulletStyle},Object(He.d)("div",{css:Ir.iconContainer},"")),Object(He.d)(Ve.a,{item:!0,css:Ir.taskItem},Ki||(Ki=Object(He.d)(Kn.a,{height:32,"data-testid":"loading-screen"}))))},TaskItem_TaskItem=function(e){var n=e.task;return Object(He.d)(Ve.a,{container:!0,spacing:12,css:Ir.taskItemContainer},Object(He.d)(Ve.a,{item:!0,css:Ir.bulletStyle},Object(He.d)("div",{css:Ir.iconContainer},"")),Object(He.d)(Ve.a,{item:!0,css:Ir.taskItem},Object(He.d)(ze.a,{key:n.id,"data-testid":"todo-task-".concat(n.title),component:"span",variant:"bodySecondary",color:"supportText"},n.title)))},wr={taskPanelContent:Object(He.c)(Qi||(Qi=Be()(["\n    display: flex;\n    flex-direction: column;\n    padding: var(--cds-spacing-200);\n    gap: var(--cds-spacing-100);\n  "]))),loadingTaskItemContainer:Object(He.c)(Ji||(Ji=Be()(["\n    padding: var(--cds-spacing-200);\n  "]))),feedbackLink:Object(He.c)($i||($i=Be()(["\n    cursor: pointer;\n    text-decoration: underline;\n    padding: 0;\n    font: inherit;\n    color: inherit;\n\n    &:focus,\n    &:hover {\n      color: var(--cds-color-interactive-secondary);\n    }\n\n    // Updating the disabled styles so it does not look like a link that learner can click on\n    &.cds-button-disabled {\n      cursor: default;\n      color: var(--cds-color-interactive-secondary);\n      text-decoration: none;\n    }\n  "]))),feedbackLinkContainer:Object(He.c)(Zi||(Zi=Be()(["\n    padding-top: var(--cds-spacing-200);\n    background-color: var(--cds-color-emphasis-primary-background-xweak);\n  "])))},tasks_TasksPanelContent=function(e){var n=e.todoTasks,t=e.completedTasks,i=e.isLoading,r=useCoachItemChatContext_useCoachItemChatContext(),o=r.sendMessage,s=r.trackingData,c=r.rolePlayDebriefSessionId,d=r.rolePlaySimulationSessionId,l=a.useState(!1),u=v()(l,2),m=u[0],p=u[1],f=Object(Ge.e)();if(i)return Object(He.d)("div",{css:wr.loadingTaskItemContainer,"data-testid":"task-loading"},Xi||(Xi=Object(He.d)(TaskItem_LoadingTaskItem,null)),er||(er=Object(He.d)(TaskItem_LoadingTaskItem,null)),nr||(nr=Object(He.d)(TaskItem_LoadingTaskItem,null)),tr||(tr=Object(He.d)(TaskItem_LoadingTaskItem,null)));var g=n.length>0&&t.length>0,h=0===n.length&&t.length>0,k=!c&&h&&d;return Object(He.d)("div",{css:wr.taskPanelContent,"data-testid":"task-list"},n.map((function(e){return Object(He.d)(a.Fragment,{key:e.id},Object(He.d)(TaskItem_TaskItem,{task:e}))})),g&&(ar||(ar=Object(He.d)(pn.a,null))),t.map((function(e){return Object(He.d)(a.Fragment,{key:e.id},Object(He.d)(TaskItem_CompletedTaskItem,{task:e}))})),k&&Object(He.d)(xa.a,{severity:"success","data-testid":"completion-notification",title:$e()("Way to go!"),css:wr.feedbackLinkContainer},Object(He.d)(mn.FormattedMessage,{component:"p",message:$e()("You can keep chatting with the AI Persona or you can jump to {feedbackLink}."),feedbackLink:Object(He.d)(qe.a,{onClick:function(){f("interact_coach",O()({coachInteractionType:"click_action",coachAction:b.d.CoachItemGenerateFeedback},s)),o(Ce.l,b.d.CoachItemTaskCompleted),p(!0)},variant:"ghost",component:"span",size:"small",css:wr.feedbackLink,disabled:m},$e()("your feedback"))})))},tasks_TasksPanel=function(e){var n=e.onClose,t=useRolePlayTasksContext_useRolePlayTasksContext(),i=t.tasks,r=t.isTaskListLoading,o=t.loadTaskList,s=t.shouldSkipChatHistory,c=t.taskChatSessionId,d=t.resetTaskChatSession,l=a.useRef(null),u=useCoachItemChatContext_useCoachItemChatContext().rolePlaySimulationSessionId,m=(i||[]).filter((function(e){return e.completed})),p=(i||[]).filter((function(e){return!e.completed})),f=(i||[]).length;return a.useEffect((function(){if(c&&!u)return d(),void(l.current=null);u&&(s?l.current=u:r||l.current===u||(l.current=u,o(u)))}),[o,d,u,r,s,c]),Object(He.d)(a.Fragment,null,Object(He.d)(components_SidePanelHeader,{title:$e()("Tasks"),subTitle:f>0?$e()("#{completedTasksCount}/#{totalTasksCount} complete",{completedTasksCount:m.length,totalTasksCount:f}):void 0,onClose:n}),Object(He.d)(tasks_TasksPanelContent,{todoTasks:p,completedTasks:m,isLoading:r}))},RolePlayChatView_styles_chatViewContainer=function(e){return Object(He.c)(ir||(ir=Be()(["\n    padding: 0;\n    height: ",";\n    border-radius: 0 0 var(--cds-spacing-150) var(--cds-spacing-150);\n\n    > div {\n      border-radius: 0;\n    }\n\n    "," {\n      overflow: hidden;\n    }\n  "])),e?"calc(100% - ".concat(68,"px)"):"100%",Ue.a.down("sm"))},chat_view_RolePlayChatView=function(e){var n,t,i=e.chatHeader,r=e.overviewInstructions,o=e.isSinglePanelMode,s=void 0!==o&&o,c=useRolePlayTasksContext_useRolePlayTasksContext().isTaskResponseLoading,d=useCoachItemChatContext_useCoachItemChatContext(),l=d.rolePlaySimulationSessionId,u=d.rolePlayDebriefSessionId,m=d.itemId,p=SidePanelPersistenceUtils_getSidePanelState(l)||{},f=p.selectedPanelStatus,g=p.selectedPanel,v=useSidePanelContext_useSidePanelContext(),h=v.setSelectedPanelStatus,b=v.setSelectedPanel,k=v.selectedPanelStatus,C=v.selectedPanel;a.useEffect((function(){s||(f&&f!==k&&h(f,l),g&&g!==C&&b(g,l))}),[l,f,g,k,C,s,h,b]);var S=C,y="expanded"===k,O=Object(Ge.e)(),I=a.useCallback((function(){h("collapsed",l)}),[h,l]),w=a.useMemo((function(){return[{name:"overview",displayName:$e()("Overview"),icon:rr||(rr=Object(He.d)(ur.a,null)),component:n||(n=Object(He.d)(components_RolePlayOverviewPanel,{overviewInstructions:r,onClose:I})),enabled:!0},{name:"tasks",displayName:$e()("Tasks"),icon:or||(or=Object(He.d)(icons_TaskIcon,null)),component:t||(t=Object(He.d)(tasks_TasksPanel,{onClose:I})),enabled:!!l},{name:"hints",displayName:$e()("Hints"),icon:sr||(sr=Object(He.d)(pr,null)),component:Object(He.d)(hints_HintsPanel,{canAskForHint:!u,onClose:I}),enabled:!!l}]}),[r,I,l,u]);return Object(He.d)(components_SplitPanelView,{isSidePanelExpanded:y,mainContent:Object(He.d)(a.Fragment,null,i,Object(He.d)(chat_view_ChatView,{onStartButtonClick:function(e){s||(b("tasks",e),h("expanded",e))},onTryAgainClick:function(){s||(b("overview"),h("expanded"))},isTaskResponseLoading:c,styles:RolePlayChatView_styles_chatViewContainer(!!i)})),panels:w,selectedPanel:S,onPanelChange:function(e,n){var t=n?"expanded":"collapsed";O("toggle_side_panel",{sidePanel:{name:e,status:n?"open":"closed"},courseItem:{id:m,type:"role_play"}}),b(e,l),h(t,l)},testId:"role-play-chat-view",isSinglePanelMode:s})},jr={rightElementButton:Object(He.c)(cr||(cr=Be()(["\n    "," {\n      padding: var(--cds-spacing-100);\n    }\n  "])),Ue.a.down("sm"))},chat_view_RolePlayChatViewTunnelVision=function(e){var n=e.overviewInstructions,t=useCoachItemChatContext_useCoachItemChatContext(),i=t.itemName,r=t.setChatIsOpen,o=t.chatIsOpen,s=t.rolePlaySimulationSessionId,c=t.rolePlayDebriefSessionId,d=t.isRolePlayEndedByUser,l=useSidePanelContext_useSidePanelContext(),u=l.setSelectedPanelStatus,m=l.setSelectedPanel,p=Object(h.c)((function(e){return e.behavior})).messageLoader,f=useRolePlayHintsContext_useRolePlayHintsContext().resetHintsChatSession,g=useRolePlayTasksContext_useRolePlayTasksContext().resetTaskChatSession,b=Object(Ge.e)(),k=a.useState(!1),C=v()(k,2),S=C[0],y=C[1],O=a.useRef(null),I=a.useCallback((function(){b("click_button",{button:{name:"coach_item_tv_back_button"}}),r(!1)}),[r,b]),onNewChatButtonConfirm=function(){m("overview",s),u("expanded",s),f(),g(),SidePanelPersistenceUtils_clearSidePanelState(s)},handleToggleEndRolePlayDialog=function(){y(!S)};return Object(He.d)(components_TunnelVision,{isOpen:o,ariaLabel:i,initialFocusRef:O},Object(He.d)(chat_view_RolePlayChatView,{overviewInstructions:n,chatHeader:Object(He.d)(MainPanelHeader_MainPanelHeader,{title:i,subTitle:$e()("Role Play"),onClose:I,closeButtonAriaLabel:$e()("Close Role Play"),headerRightElement:c&&!d?Object(He.d)(chat_view_NewChatButton,{onConfirm:onNewChatButtonConfirm,buttonText:$e()("Try again")}):!c&&s?Object(He.d)(Qa.a,{size:"small",variant:"ghost",onClick:handleToggleEndRolePlayDialog,disabled:p,css:jr.rightElementButton},$e()("End Role Play")):void 0,backButtonRef:O})}),Object(He.d)(chat_view_EndRolePlayDialog,{onClose:handleToggleEndRolePlayDialog,isOpen:S}))};e.a=Object(r.b)(Object(o.a)(["CourseStore"],(function(e){return{courseMaterial:e.CourseStore.getMaterials()}})))((function(e){var n,t,i=e.computedItem,r=e.markComplete,o=e.markStarted,d=e.configuration,l=e.courseMaterial,u=e.refreshCompletedStatus,m=e.courseBranchId,p=i.id,f=i.name,g=i.courseId,v=i.isStarted,h=i.isCompleted,b=null==d?void 0:d.coverPageInstructions,k=null==d?void 0:d.versionedCoachItemType,C=parseInt(null==k?void 0:k.split("@")[1],10)||0,S=Object(Oe.q)(k),y=(null===(n=d.advancedPromptParameters)||void 0===n?void 0:n[we.a.aiPersonaRole])||(null===(t=d.promptParameters)||void 0===t?void 0:t[we.g.aiPersonaRole]),O=l.getItemMetadata(p),I=l.getNeighboringNavigationItems(O).next,w=null==I?void 0:I.getLink();return a.useEffect((function(){var e=Object(c.b)(),n=e.external_id,t=e.is_staff;s.b.init({visitor:{id:n,isCourserian:Object(c.d)(),isStaff:t}},s.a)}),[]),a.createElement(useCoachItemChatContext_CoachItemChatContextProvider,{courseId:g,courseBranchId:m,itemId:p,itemName:f,nextItemLink:w,coachItemType:S,rolePlayAiPersonaTitle:y,onCloseChat:u,markItemComplete:r},a.createElement(components_CoverPage,{instructions:b,isCompleted:h,isStarted:v,markStarted:o,markComplete:r,promptVersion:C}),S===we.f.SocraticDialogue&&(dr||(dr=a.createElement(chat_view_DialogueChatViewTunnelVision,null))),S===we.f.RolePlay&&a.createElement(useSidePanelContext_SidePanelProvider,null,a.createElement(useRolePlayTasksContext_RolePlayTasksContextProvider,{courseId:g,itemId:p,courseBranchId:m},a.createElement(useRolePlayHintsContext_RolePlayHintsContextProvider,{courseId:g,itemId:p,courseBranchId:m},a.createElement(chat_view_RolePlayChatViewTunnelVision,{overviewInstructions:b})))))}))},IyUU:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateChatSession"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateChatSessionInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateChatSession"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:146}};e.loc.source={body:"mutation AiCoach_CreateChatSession($input: AiCoach_CreateChatSessionInput!) {\n  AiCoach_CreateChatSession(input: $input) {\n    id\n    title\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_CreateChatSession=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_CreateChatSession")},J2jR:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachClipRecommendations"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ClipRecommendation"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachMessageCourse"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"partners"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"abbreviatedName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"logo"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"previewImage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:276}};n.loc.source={body:'#import "./aiCoachMessageCourseFragment.graphql"\n\nfragment AiCoachClipRecommendations on AiCoach_ClipRecommendation {\n  course {\n    ...AiCoachMessageCourse\n  }\n  partners {\n    abbreviatedName\n    name\n    logo\n  }\n  itemTitle\n  itemSlug\n  itemId\n  previewImage\n  duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wuXY").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachClipRecommendations=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachClipRecommendations")},P1ex:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatSessionsByUserId"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"userId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NamedType",name:{kind:"Name",value:"Int"}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryChatSessionsByUserId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"userId"},value:{kind:"Variable",name:{kind:"Name",value:"userId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:299}};e.loc.source={body:"query AiCoach_ChatSessionsByUserId($userId: ID!, $limit: Int) {\n  AiCoach {\n    queryChatSessionsByUserId(userId: $userId, limit: $limit) {\n      elements {\n        createdAt\n        id\n        title\n        userId\n        status\n      }\n      pagination {\n        totalElements\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoach_ChatSessionsByUserId=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoach_ChatSessionsByUserId")},RNb2:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachReadingItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"readingDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachReadingItem on AiCoach_ReadingItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  readingDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachReadingItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachReadingItem")},X9Xi:function(module,e,n){"use strict";n.r(e);var t=n("pVnL"),a=n.n(t),i=n("VbXa"),r=n.n(i),o=n("VkAN"),s=n.n(o),c=n("OhL7"),d=n("q1tI"),l=n("17x9"),u=n.n(l),m=n("MnCE"),p=n("/ukj"),f=n("sQ/U"),g=n("Gok7"),v=n("TOZ3"),h=n("EBS+"),b=n("5B3L"),k=n("YmkS"),C=n("pnKK"),S=n("q5zD"),y=n("w/oa"),O=n("15pW"),I=n("qyGb"),w=n("Ezgt"),j=n("S+eF"),x=n.n(j),E=n("v6sC"),N=Object(E.a)("/api/onDemandWidgetProgress.v1",{type:"rest"}),A={markComplete:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Completed"}},r=[t,n,e].join("~");return x()(N.put(r,i))},markStarted:function(e,n,t,a){var i={data:{sessionId:a,progressState:"Started"}},r=[t,n,e].join("~");return x()(N.put(r,i))}},T=A,WidgetItemActions_refreshProgress=function(e,n,t,a,i){t.setState(n),e.executeAction(w.b,{courseProgress:a}),i&&e.executeAction(I.a,{courseSlug:i,refetch:!0})},WidgetItemActions_markItemComplete=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId,c=n.courseSlug;return T.markComplete(t,a,i,s).then(WidgetItemActions_refreshProgress(e,O.d.progressCompleted,r,o,c))},WidgetItemActions_markItemStarted=function(e,n){var t=n.itemId,a=n.courseId,i=n.userId,r=n.itemProgress,o=n.courseProgress,s=n.sessionId;return T.markStarted(t,a,i,s).then(WidgetItemActions_refreshProgress(e,O.d.progressStarted,r,o))},R=n("++Ya"),M=n("PStO"),P=function(e){function OnDemandWidgetSessionsV1(){return e.apply(this,arguments)||this}return r()(OnDemandWidgetSessionsV1,e),OnDemandWidgetSessionsV1}(n("HlCP").a);P.RESOURCE_NAME="onDemandWidgetSessions.v1";var F,L,D=P,hooks_useWidgetSession=function(e,n,t,a){var i=Object(f.b)().id,r=Object(R.c)([i.toString(),e,n]),o=Object(M.b)((function(){return t?{}:a?{widgetSessionWithoutProgressUpdate:D.finder("getWithoutProgressUpdate",{fields:["session","sessionId"],params:{id:r}})}:{widgetSession:D.get(r,{fields:["session","sessionId"]})}}),[r]).data,s=o.widgetSession,c=o.widgetSessionWithoutProgressUpdate;return null!=s?s:null==c?void 0:c[0]},isCompatibleWithMobile=function(e){var n=e.supportsTouch,t=e.minWidthPx,a=e.minHeightPx,i=function(){var e,n;if("undefined"!=typeof document&&"undefined"!=typeof window){var t=window.screen;if(void 0!==window.screen)e=t.height,n=t.width;else e=window.innerHeight,n=window.innerWidth}else e=0,n=0;return{deviceHeight:e,deviceWidth:n}}(),r=i.deviceWidth,o=i.deviceHeight;return!1!==n&&(!(void 0!==t&&t>r)&&!(void 0!==a&&a>o))},B=n("z3RS"),H=n("cVIm"),U=n("kvW3"),V=n("gKW9"),q=n.n(V),G=(n("46xw"),"".concat(H.a.url.resource_assets,"widget/svgcomputer.svg")),z=function(e){function UnavailableOnMobileMessage(){return e.apply(this,arguments)||this}return r()(UnavailableOnMobileMessage,e),UnavailableOnMobileMessage.prototype.render=function(){var e=this.props.name;return(d.createElement("div",{className:"rc-UnavailableOnMobileMessage vertical-box align-items-absolute-center"},d.createElement("div",{className:"headline-5-text p-x-1"},e),d.createElement("div",{className:"body-1-text p-x-1 p-b-2"},d.createElement(U.b,{message:q()("This item was not designed for use on a small screen.")})),d.createElement("div",{className:"align-horizontal-center p-b-2"},d.createElement("img",{className:"computer-icon",src:G,alt:q()("Computer Icon"),height:"120",width:"220"})),d.createElement("div",{className:"body-1-text horizontal-box align-horizontal-center p-x-1"},d.createElement(U.b,{message:q()("Please use a computer or laptop to complete this item.")}))))},UnavailableOnMobileMessage}(d.Component),W=n("Jz+x"),Y=n("TdzE"),K=n("2Kkf"),Q=n("emlC"),J=n("35G5"),Z=n("/AOU"),X=n("w/Ge"),ee={widgetItem:Object(c.c)(F||(F=s()(["\n    margin: 20px auto;\n    max-width: 960px;\n\n    @media (max-width: 768px) {\n      margin: 0;\n      max-width: 100%;\n    }\n  "])))},ne=[Z.c.SET_COMPLETE,Z.c.SET_GRADED_COMPLETE],te=function(e){function WidgetItem(){for(var n,t=arguments.length,a=new Array(t),i=0;i<t;i++)a[i]=arguments[i];return(n=e.call.apply(e,[this].concat(a))||this).state={iFrameMessages:[],widgetId:Object(X.b)(),itemProgressState:null,markCompleteDeferred:null,isExpanded:!1},n.onToggleExpanded=function(){return n.setState((function(e){return{isExpanded:!e.isExpanded}}))},n.markComplete=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=e.courseSlug,s=t.getItemProgress(a.id),c=f.a.get().id,d=a.id;y.d(t.get("id"),t),n.context.executeAction(WidgetItemActions_markItemComplete,{itemId:d,courseId:i,userId:c,itemProgress:s,courseProgress:t,sessionId:r,courseSlug:o})},n.markStarted=function(){var e=n.props,t=e.computedCourseProgress.courseProgress,a=e.computedItem,i=e.courseId,r=e.sessionId,o=t.getItemProgress(a.id),s=f.a.get().id,c=a.id;n.context.executeAction(WidgetItemActions_markItemStarted,{itemId:c,courseId:i,userId:s,itemProgress:o,courseProgress:t,sessionId:r})},n.isOnMobile=function(){var e=n.context.getStore("ApplicationStore").getUserAgent(),t=e&&e.isMobileBrowser;return p.a.get()||t},n}r()(WidgetItem,e);var n=WidgetItem.prototype;return n.UNSAFE_componentWillReceiveProps=function(e){var n=this.props,t=n.computedItem,a=n.computedCourseProgress.courseProgress.getItemProgress(t.id);a.getState()!==this.state.itemProgressState&&(this.setState({itemProgressState:a.getState()}),this.state.markCompleteDeferred&&(this.state.markCompleteDeferred.resolve(),this.setState({markCompleteDeferred:null})))},n.render=function(){var e,n=this,t=this.props,a=t.session,i=t.sessionId,r=t.computedItem,o=t.courseBranchId,s=t.courseId,d=t.itemMetadata,l=t.courseMaterials,u=null==l?void 0:null===(e=l.getNeighbors(d))||void 0===e?void 0:e.nextItemMetadataOrItemGroup,m=this.state.isExpanded;return a?this.isOnMobile()&&!isCompatibleWithMobile(r.contentSummary.definition)?Object(c.d)(z,{name:r.name}):Object(c.d)("div",{css:ee.widgetItem},Object(c.d)(g.a,{component:"h1",className:"rc-A11yScreenReaderOnly"},r.name),Object(c.d)(C.a,{courseId:r.courseId,show:!0}),Object(c.d)(B.a,{itemName:r.name,itemMetadata:d,courseId:r.courseId}),Object(h.p)(a.iframeTitle)?Object(c.d)(b.a,{computedItem:r,configuration:a.configuration.data,markComplete:this.markComplete,markStarted:this.markStarted,refreshCompletedStatus:this.props.refreshCourseProgress,courseBranchId:o}):Object(c.d)(J.a,{inWidgetItem:!0,session:a,sessionId:i,courseBranchId:o,courseId:s,itemId:r.id,onToggleExpanded:this.onToggleExpanded,widgetId:this.state.widgetId,parentRpcActions:ne,isComplete:r.isCompleted,widgetContentTitle:r.name,nextItem:u,isGradedPluginItem:"gradedWidget"===d.getTypeName(),markComplete:function(){n.markComplete()}}),Object(c.d)(v.b,{"aria-hidden":m,style:{marginTop:"50px",borderTop:"1px solid var(--cds-color-grey-25)",paddingTop:"15px",paddingBottom:"15px"}},Object(c.d)(k.a,{computedItem:r,itemFeedbackType:"widget"}))):L||(L=Object(c.d)("div",{className:"horizontal-box align-items-absolute-center widget-iframe"},Object(c.d)(S.a,{name:"spinner",size:"2x",spin:!0,className:"color-hint-text"})))},WidgetItem}(d.Component);te.contextTypes={executeAction:u.a.func.isRequired,getStore:u.a.func.isRequired};var ae=Object(m.b)(Object(Y.b)(),Object(W.a)(),Object(Q.a)(["CourseStore","SessionStore"],(function(e){var n=e.CourseStore,t=e.SessionStore;return{courseId:n.getCourseId(),courseSlug:n.getCourseSlug(),courseMaterials:n.getMaterials(),courseBranchId:t.getBranchId()}})),K.a)((function(e){var n=e.computedItem,t=n.courseId,i=n.id,r=hooks_useWidgetSession(t,i);return Object(c.d)(te,a()({},e,{session:null==r?void 0:r.session,sessionId:null==r?void 0:r.sessionId}))}));e.default=ae},ZGIP:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachLectureItem"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",alias:{kind:"Name",value:"lectureDuration"},name:{kind:"Name",value:"duration"},arguments:[],directives:[]}]}}],loc:{start:0,end:182}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n\nfragment AiCoachLectureItem on AiCoach_LectureItemMetadata {\n  ...ItemMetadataFields\n  itemTitle\n  lectureDuration: duration\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wBc2").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachLectureItem=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachLectureItem")},"b+Bk":function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"CreateUserMessageResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"messageByAiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"messageId"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"chatSessionId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}]}},{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponseInput"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach_CreateUserMessageAndReturnResponse"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"CreateUserMessageResult"},directives:[]}]}}]}}],loc:{start:0,end:929}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment CreateUserMessageResult on AiCoach_CreateUserMessageAndReturnResponseResult {\n  messageByAiCoach {\n    message\n    senderType\n    messageId\n  }\n  chatSessionId\n  session {\n    id\n    status\n  }\n  recommendedActions @include(if: $recommendedActionsEnabled) {\n    action\n    actionMessage\n  }\n  clipRecommendations @include(if: $clipRecommendationsEnabled) {\n    ...AiCoachClipRecommendations\n  }\n  navigationButtons {\n    navigationLeadingMessage\n\n    ...GoToFirstItemNavigationButton\n  }\n}\n\nmutation AiCoach_CreateUserMessageAndReturnResponse(\n  $input: AiCoach_CreateUserMessageAndReturnResponseInput!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach_CreateUserMessageAndReturnResponse(input: $input) {\n    ...CreateUserMessageResult\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wjFw").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.CreateUserMessageResult=oneQuery(n,"CreateUserMessageResult"),module.exports.AiCoach_CreateUserMessageAndReturnResponse=oneQuery(n,"AiCoach_CreateUserMessageAndReturnResponse")},j5nu:function(module,exports,e){},uSn8:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachNavigationButtons"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_NavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"navigationLeadingMessage"},arguments:[],directives:[]},{kind:"FragmentSpread",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},directives:[]}]}}],loc:{start:0,end:195}};n.loc.source={body:'#import "./aiCoachGoToFirstItemNavigationButtonFragment.graphql"\n\nfragment AiCoachNavigationButtons on AiCoach_NavigationButton {\n  navigationLeadingMessage\n\n  ...GoToFirstItemNavigationButton\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};n.definitions=n.definitions.concat(e("wjFw").definitions.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)})));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.AiCoachNavigationButtons=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"AiCoachNavigationButtons")},wBc2:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"ItemMetadataFields"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"course"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemSlug"},arguments:[],directives:[]}]}}],loc:{start:0,end:100}};e.loc.source={body:"fragment ItemMetadataFields on AiCoach_ItemMetadata {\n  course {\n    slug\n  }\n  itemId\n  itemSlug\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.ItemMetadataFields=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"ItemMetadataFields")},wjFw:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"GoToFirstItemNavigationButton"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GoToFirstItemNavigationButton"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"itemMetadata"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_GenericItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_LectureItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachLectureItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ReadingItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachReadingItem"},directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_QuizItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_AssignmentItemMetadata"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"ItemMetadataFields"},directives:[]},{kind:"Field",name:{kind:"Name",value:"itemTitle"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"numQuestions"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:715}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachReadingItemFragment.graphql"\n#import "./aiCoachLectureItemFragment.graphql"\n\nfragment GoToFirstItemNavigationButton on AiCoach_GoToFirstItemNavigationButton {\n  itemMetadata {\n    ... on AiCoach_GenericItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n    }\n    ... on AiCoach_LectureItemMetadata {\n      ...AiCoachLectureItem\n    }\n    ... on AiCoach_ReadingItemMetadata {\n      ...AiCoachReadingItem\n    }\n    ... on AiCoach_QuizItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n    ... on AiCoach_AssignmentItemMetadata {\n      ...ItemMetadataFields\n      itemTitle\n      numQuestions\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("RNb2").definitions)),n.definitions=n.definitions.concat(unique(e("ZGIP").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.GoToFirstItemNavigationButton=function(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}(n,"GoToFirstItemNavigationButton")},wuXY:function(module,exports){var e={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"AiCoachMessageCourse"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"Course_Course"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slug"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]}]}}],loc:{start:0,end:70}};e.loc.source={body:"fragment AiCoachMessageCourse on Course_Course {\n  id\n  slug\n  name\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var n={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}e.definitions.forEach((function(e){if(e.name){var t=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,t),n[e.name.value]=t}})),module.exports=e,module.exports.AiCoachMessageCourse=function(e,t){var a={kind:e.kind,definitions:[findOperation(e,t)]};e.hasOwnProperty("loc")&&(a.loc=e.loc);var i=n[t]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(n[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var t=findOperation(e,n);t&&a.definitions.push(t)})),a}(e,"AiCoachMessageCourse")},xeAZ:function(module,exports,e){var n={kind:"Document",definitions:[{kind:"FragmentDefinition",name:{kind:"Name",value:"MessagesByChatIdResult"},typeCondition:{kind:"NamedType",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"session"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"pagination"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"totalElements"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"cursor"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"elements"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"userFeedback"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"userComments"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"senderType"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"itemId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"createdAt"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"courseId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"structuredResponse"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"recommendedActions"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"actionMessage"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"action"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"clipRecommendations"},arguments:[],directives:[{kind:"Directive",name:{kind:"Name",value:"include"},arguments:[{kind:"Argument",name:{kind:"Name",value:"if"},value:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}}}]}],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachClipRecommendations"},directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"navigationButtons"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"AiCoachNavigationButtons"},directives:[]}]}}]}}]}},{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"AiCoach_ChatMessagesPaginatedResult"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"limit"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"Int"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"recommendedActionsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"clipRecommendationsEnabled"}},type:{kind:"NamedType",name:{kind:"Name",value:"Boolean"}},defaultValue:{kind:"BooleanValue",value:!1},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"AiCoach"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"queryByChatSessionId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"chatSessionId"},value:{kind:"Variable",name:{kind:"Name",value:"chatSessionId"}}},{kind:"Argument",name:{kind:"Name",value:"limit"},value:{kind:"Variable",name:{kind:"Name",value:"limit"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:"MessagesByChatIdResult"},directives:[]}]}}]}}]}}],loc:{start:0,end:1052}};n.loc.source={body:'#import "./aiCoachItemMetadataFieldsFragment.graphql"\n#import "./aiCoachNavigationButtonsFragment.graphql"\n#import "./aiCoachClipRecommendationsFragment.graphql"\n\nfragment MessagesByChatIdResult on AiCoach_ChatMessagesPaginatedResult {\n  session {\n    id\n    status\n  }\n  pagination {\n    totalElements\n    cursor\n  }\n  elements {\n    userFeedback\n    userComments\n    senderType\n    message\n    itemId\n    createdAt\n    courseId\n    id\n    structuredResponse\n    recommendedActions @include(if: $recommendedActionsEnabled) {\n      actionMessage\n      action\n    }\n    clipRecommendations @include(if: $clipRecommendationsEnabled) {\n      ...AiCoachClipRecommendations\n    }\n    navigationButtons {\n      ...AiCoachNavigationButtons\n    }\n  }\n}\n\nquery AiCoach_ChatMessagesPaginatedResult(\n  $chatSessionId: ID!\n  $limit: Int!\n  $recommendedActionsEnabled: Boolean = false\n  $clipRecommendationsEnabled: Boolean = false\n) {\n  AiCoach {\n    queryByChatSessionId(chatSessionId: $chatSessionId, limit: $limit) {\n      ...MessagesByChatIdResult\n    }\n  }\n}\n',name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function unique(e){return e.filter((function(e){if("FragmentDefinition"!==e.kind)return!0;var n=e.name.value;return!t[n]&&(t[n]=!0,!0)}))}n.definitions=n.definitions.concat(unique(e("wBc2").definitions)),n.definitions=n.definitions.concat(unique(e("uSn8").definitions)),n.definitions=n.definitions.concat(unique(e("J2jR").definitions));var a={};function findOperation(e,n){for(var t=0;t<e.definitions.length;t++){var a=e.definitions[t];if(a.name&&a.name.value==n)return a}}function oneQuery(e,n){var t={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(t.loc=e.loc);var i=a[n]||new Set,r=new Set,o=new Set;for(i.forEach((function(e){o.add(e)}));o.size>0;){var s=o;o=new Set,s.forEach((function(e){r.has(e)||(r.add(e),(a[e]||new Set).forEach((function(e){o.add(e)})))}))}return r.forEach((function(n){var a=findOperation(e,n);a&&t.definitions.push(a)})),t}n.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,n){if("FragmentSpread"===e.kind)n.add(e.name.value);else if("VariableDefinition"===e.kind){var t=e.type;"NamedType"===t.kind&&n.add(t.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,n)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,n)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,n)}))}(e,n),a[e.name.value]=n}})),module.exports=n,module.exports.MessagesByChatIdResult=oneQuery(n,"MessagesByChatIdResult"),module.exports.AiCoach_ChatMessagesPaginatedResult=oneQuery(n,"AiCoach_ChatMessagesPaginatedResult")}}]);
//# sourceMappingURL=56.a8dedf000e2c0d9e09a9.js.map