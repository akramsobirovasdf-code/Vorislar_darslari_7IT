(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{"+GGL":function(module,exports,e){},"06Ht":function(module,exports,e){e("EGbX")},"2RWD":function(module,exports,e){},"3w12":function(module,exports,e){},"4suC":function(module,e,t){"use strict";t.r(e);var n=t("VbXa"),i=t.n(n),r=t("q1tI"),a=t("F/us"),s=t.n(a),o=t("8cuT"),c=t("pR6o"),d=t("L1vm"),u=t("sQ/U"),l=t("EdUP"),m=t("17x9"),b=t.n(m),p=function(e){function AssignmentSubmitWrapper(){return e.apply(this,arguments)||this}i()(AssignmentSubmitWrapper,e);var t=AssignmentSubmitWrapper.prototype;return t.componentDidMount=function(){var e;null===(e=window)||void 0===e||e.scrollTo(0,0)},t.render=function(){return this.props.isSubmitted?this.props.submittedView:this.props.editView},AssignmentSubmitWrapper}(r.Component);p.propTypes={isSubmitted:b.a.bool.isRequired,submittedView:b.a.node.isRequired,editView:b.a.node.isRequired};var g,v=p,f=t("JAmU"),h=t("pVnL"),S=t.n(h),I=t("J4zp"),y=t.n(I),O=t("3tO9"),w=t.n(O),j=t("Y+p1"),k=t.n(j),C=t("sEfC"),A=t.n(C),E=t("BkRI"),P=t.n(E),x=t("+LJP"),T=t("kwmr"),N=t("W1i5"),R=t("mHyk"),D=t("HOoY"),V=function(e){return e.GIBBERISH="GIBBERISH",e.TEXTSIMILARITY="TEXTSIMILARITY",e}({}),U=function(e){return e.TEXT="TEXT",e.FILE="FILE",e}({}),L=function(e){return e.INTEGRITY_CHECK_ACTIVE="INTEGRITY_CHECK_ACTIVE",e.INTEGRITY_CHECK_NONE="INTEGRITY_CHECK_NONE",e.INTEGRITY_CHECK_PASSIVE="INTEGRITY_CHECK_PASSIVE",e}({}),integrityStatusHelper_hasPlagiarism=function(e){return!!e&&!!e.deterredChecks.find((function(e){return e===V.TEXTSIMILARITY}))},integrityStatusHelper_hasGibberish=function(e){return!!e&&!!e.deterredChecks.find((function(e){return e===V.GIBBERISH}))},integrityStatusHelper_isActiveDetterence=function(e){return!!e&&e.deterrence===L.INTEGRITY_CHECK_ACTIVE},integrityStatusHelper_getOrderedChecks=function(){return[{checkType:V.GIBBERISH,withFiltering:!0},{checkType:V.TEXTSIMILARITY,withFiltering:!0}]},hasPlagiarismInSomeParts=function(e){return!(!e||e.length<=0)&&e.some(integrityStatusHelper_hasPlagiarism)},hasGibberishInSomeParts=function(e){return!(!e||e.length<=0)&&e.some(integrityStatusHelper_hasGibberish)},integrityStatusHelper_processIntegrityStatusResults=function(e){var t,n,i=e.courseId,r=e.eventData,a=e.integrityContext,s=e.latestSubmissionAndRelated,o=e.integrityStatus,c=e.scrollToTop,d=e.showSubmitDialog,l=null==o?void 0:null===(t=o.IntegrityCheck)||void 0===t?void 0:t.queryIntegrityChecks,m=s.submission,b=m.versionedAssignmentId,p=m.definition.parts,g=null!==(n=null==b?void 0:b.split("@"))&&void 0!==n?n:[],v=y()(g,1)[0];a.setAssignmentId(v),a.setScoreResults(l),(hasPlagiarismInSomeParts(null==l?void 0:l.promptResults)||hasGibberishInSomeParts(null==l?void 0:l.promptResults))&&c(),d();var f={user_id:u.a.get().id,course_id:i,peer_assignment_id:v};integrityStatusHelper_isActiveDetterence(l)&&hasPlagiarismInSomeParts(null==l?void 0:l.promptResults)&&D.a.trackComponent(r,f,"simtext_active_deterrence","deterrence"),integrityStatusHelper_isActiveDetterence(l)&&hasGibberishInSomeParts(null==l?void 0:l.promptResults)&&D.a.trackComponent(r,f,"gibberish_active_deterrence","deterrence"),null==l||l.promptResults.forEach((function(e){var t,n=null===(t=p[e.promptId])||void 0===t?void 0:t.typeName,i=w()(w()({},f),{},{peer_assignment_submission_schema_part_id:e.promptId});integrityStatusHelper_hasPlagiarism(e)&&("fileUpload"===n?D.a.trackComponent(r,i,"file_upload_deterrence","deterrence"):"richText"===n&&D.a.trackComponent(r,i,"simtext_deterrence","deterrence")),integrityStatusHelper_hasGibberish(e)&&D.a.trackComponent(r,i,"gibberish_deterrence","deterrence")}))},G=Object(r.createContext)({isChecking:!1,scoreResults:void 0,assignmentId:void 0,hasLocalChanges:!1,clearPartResult:function(){},setScoreResults:function(){},setIsChecking:function(){},setHasLocalChanges:function(){},setAssignmentId:function(){},getHasPlagiarismInPart:function(){return!1},getHasGibberishInPart:function(){return!1},getHasPlagiarismInSubmission:function(){return!1},getHasGibberishInSubmission:function(){return!1},getShouldDeterLearnerFromSubmitting:function(){return!1},clearResults:function(){}}),IntegrityStatusContextProvider_useIntegrityStatusContext=function(){return Object(r.useContext)(G)},IntegrityStatusContextProvider_IntegrityStatusContextProvider=function(e){var t=e.children,n=Object(r.useState)(!1),i=y()(n,2),a=i[0],s=i[1],o=Object(r.useState)(!1),c=y()(o,2),d=c[0],u=c[1],l=Object(r.useState)(void 0),m=y()(l,2),b=m[0],p=m[1],g=Object(r.useState)(void 0),v=y()(g,2),f=v[0],h=v[1];return r.createElement(G.Provider,{value:{scoreResults:f,isChecking:a,assignmentId:b,hasLocalChanges:d,setHasLocalChanges:u,setIsChecking:s,setScoreResults:h,setAssignmentId:p,getHasPlagiarismInPart:function(e){var t,n=null==f?void 0:null===(t=f.promptResults)||void 0===t?void 0:t.find((function(t){return t.promptId===e}));return integrityStatusHelper_hasPlagiarism(n)},getHasGibberishInPart:function(e){var t=null==f?void 0:f.promptResults.find((function(t){return t.promptId===e}));return integrityStatusHelper_hasGibberish(t)},getHasPlagiarismInSubmission:function(){return hasPlagiarismInSomeParts(null==f?void 0:f.promptResults)},getHasGibberishInSubmission:function(){return hasGibberishInSomeParts(null==f?void 0:f.promptResults)},getShouldDeterLearnerFromSubmitting:function(){return integrityStatusHelper_isActiveDetterence(f)},clearResults:function(){h(void 0),u(!1)},clearPartResult:function(e){var t;if(f){var n=null===(t=f.promptResults)||void 0===t?void 0:t.filter((function(t){return t.promptId!==e}));h(w()(w()({},f),{},{promptResults:n}))}}}},t)},F=t("VkAN"),M=t.n(F),q=t("Gcrz"),B=t("Lm/n"),H=t("UYTu"),W=Object(H.a)(g||(g=M()(["\n  query GetIntegrityStatus(\n    $submission: IntegrityCheck_SubmissionInput!\n    $orderedChecks: [IntegrityCheck_StageDefinitionInput!]!\n  ) {\n    IntegrityCheck {\n      queryIntegrityChecks(submission: $submission, orderedChecks: $orderedChecks) {\n        deterrence\n        promptResults {\n          promptId\n          deterredChecks\n        }\n      }\n    }\n  }\n"]))),api_IntegrityStatusAPI=function(e){var t=e.children,n=e.queryData,i=e.onDataLoaded;return r.createElement(q.c,{query:W,notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache",variables:n,skip:!n,context:{clientName:"gatewayGql"},onCompleted:function(e){var t;null!=e&&null!==(t=e.IntegrityCheck)&&void 0!==t&&t.queryIntegrityChecks?i(e):i(void 0)},onError:function(){i(void 0)}},(function(){return t}))},Y=t("Jexy"),Q=t("I8ZN"),z=t("Qp/S"),J=t("E+oP"),X=t.n(J),parseRichText=function(e){return"cml"===(null==e?void 0:e.typeName)?e.definition.value:"html"===(null==e?void 0:e.typeName)?e.definition:e};function createIntegrityQuery(e){var t,n=e.submission,i=n.definition,r=n.versionedAssignmentId,a=["richText","plainText","fileUpload"],s=i.parts,o=Object.entries(s).filter((function(e){var t=y()(e,2)[1];return a.includes(t.typeName)})).map((function(e){var t=y()(e,2),n=t[0],i=t[1],r=i.typeName,a=i.definition,s={};if("fileUpload"===r&&!X()(a.fileUrl)){var o=a.fileUrl;return X()(o)?s:{promptId:n,content:{typeTag:U.FILE,fileUrl:a.fileUrl}}}var c="richText"===r?parseRichText(a.richText):a.plainText;return X()(c)?s:{promptId:n,content:{typeTag:U.TEXT,textContent:c}}})).filter((function(e){return!X()(e.promptId)})),c=null!==(t=null==r?void 0:r.split("@"))&&void 0!==t?t:[],d=y()(c,2),l=d[0],m=d[1];return{assignmentId:l,submitterId:String(Object(u.b)().id),prompts:o,version:Number(m),assignmentVersion:Number(m)}}var Z,K,ee=t("+c4W"),te=t.n(ee),ne=t("MJIl"),ie=t.n(ne),re=t("3WF5"),ae=t.n(re),se=t("mRsi"),oe=t.n(se),ce=t("OhL7"),de=t("TSYQ"),ue=t.n(de),le=t("qC2T"),me=t.n(le),be={alertContainer:Object(ce.c)(Z||(Z=M()(["\n    .bt3-alert {\n      padding: 15px;\n      margin-bottom: 20px;\n      border: 1px solid transparent;\n      border-radius: 4px;\n    }\n\n    .bt3-alert h4 {\n      margin-top: 0;\n      color: inherit;\n    }\n\n    .bt3-alert > p,\n    .bt3-alert > ul {\n      margin-bottom: 0;\n    }\n\n    .bt3-alert > p + p {\n      margin-top: 5px;\n    }\n\n    .bt3-alert-warning {\n      background-color: var(--cds-color-yellow-25);\n      border-color: var(--cds-color-emphasis-tertiary-background-weak);\n      color: var(--cds-color-yellow-600);\n    }\n\n    .bt3-alert-warning hr {\n      border-top-color: var(--cds-color-emphasis-tertiary-background-weak);\n    }\n\n    .bt3-alert-danger {\n      background-color: var(--cds-color-feedback-error-invert-weak);\n      border-color: var(--cds-color-red-100);\n      color: var(--cds-color-red-800);\n    }\n\n    .bt3-alert-danger hr {\n      border-top-color: var(--cds-color-red-100);\n    }\n  "])))},pe=function(e){function AssignmentSubmitAlertsView(){return e.apply(this,arguments)||this}return i()(AssignmentSubmitAlertsView,e),AssignmentSubmitAlertsView.prototype.render=function(){var e=this.props,t=e.isSubmitted,n=e.submissionAppState,i=n.submitState,r=n.saveState,a=n.showValidation,s=n.errorMessage,o=e.errorTree;if(!o||!a)return null;if(t)return Object(ce.d)("div",{className:"rc-AssignmentSubmitAlertsView"},me()("Your work is submitted."));var c=ie()(AssignmentSubmitAlertsView.getAllErrors(o),te()("blocksSubmit")),d=!!s,u=!s&&"ready"===i&&"ready"===r&&c,l=!s&&"saveError"===r&&!s,m=!s&&"submitError"===i&&"ready"===r&&c,b=!s&&"submitError"===i&&"ready"===r&&!c,p=ue()("rc-AssignmentSubmitAlertsView","bt3-alert",{"bt3-alert-warning":u,"bt3-alert-danger":d||l||m||b});return d||u||l||m||b?Object(ce.d)("div",{css:be.alertContainer},Object(ce.d)("div",{className:p},d&&Object(ce.d)("span",null,s),m&&Object(ce.d)("span",null,me()("Error submitting assignment: please fix the errors below before submitting.")),u&&Object(ce.d)("span",null,me()("Your assignment was saved, but please fix the errors below before submitting.")),b&&Object(ce.d)("span",null,me()("Your assignment was saved, but an unknown error occurred while submitting.\n              Please refresh the page and try again.")),l&&Object(ce.d)("span",null,me()("Save error. Please try again.")))):null},AssignmentSubmitAlertsView}(r.Component);K=pe,pe.getAllErrors=function(e){if(!e)return[];var t=oe()(ae()(e.children,(function(e){return K.getAllErrors(e)})));return e.errors.concat(t)};var ge,ve,fe,he,Se,Ie,ye,Oe=pe,AssignmentEditView=function(e){var t=e.submissionAppState,n=e.errorTree,i=e.isSubmitted,a=e.children;return(r.createElement("div",{className:"rc-AssignmentEditView rc-AssignmentSubmit"},r.createElement(Oe,{isSubmitted:i,submissionAppState:t,errorTree:n}),r.createElement("div",null,a)))},we=t("xPfO"),je=t("E+hb"),ke=t("l0Tt"),Ce=t("hbUA"),Ae=t("Ef0b"),Ee=t("Zr0k"),Pe=t("dhC9"),xe=t("nNSt"),Te=t("HXet"),Ne=t.n(Te),components_IntegrityStatusResult=function(){var e=IntegrityStatusContextProvider_useIntegrityStatusContext(),t=e.getShouldDeterLearnerFromSubmitting,n=e.getHasPlagiarismInSubmission,i=e.getHasGibberishInSubmission;return t()?r.createElement(xe.a,{severity:"error"},Ne()("Review the notifications below and update your responses before submitting to complete this assignment.")):n()||i()?r.createElement(xe.a,{severity:"warning"},Ne()("Review the notifications below and consider updating your responses before submitting.")):null},Re=t("7NQo"),_e=t("7Pyc"),De=t("ZJgU"),Ve=t("l1rq"),Ue=t("kRN+"),Le=t("wOuz"),Ge=t("gNwb"),Fe=Object(Ge.b)({type:"BUTTON"})(De.a),Me={flagStyle:function(){return Object(ce.c)(ge||(ge=M()(["\n    padding: var(--cds-spacing-50) 0 var(--cds-spacing-50) 0;\n  "])))},successIcon:function(){return Object(ce.c)(ve||(ve=M()(["\n    margin-bottom: calc(var(--cds-spacing-50) * -1);\n  "])))}},components_GibberishPromptResult=function(e){var t=e.partId,n=e.trackingData,i=IntegrityStatusContextProvider_useIntegrityStatusContext(),a=i.getHasGibberishInPart,s=i.assignmentId,o=Object(r.useState)(!1),c=y()(o,2),d=c[0],l=c[1];return a(t)?Object(ce.d)("div",null,Object(ce.d)(xe.a,{severity:"warning"},Ne()("It looks like this response doesn’t answer the original question. Make sure it’s a a full sentence answer so that reviewers can better assess your submission.")),d?Object(ce.d)("div",{css:Me.flagStyle},Object(ce.d)(Ue.a,{size:"small",color:"success",css:Me.successIcon})," ",Object(ce.d)(Ve.a,{component:"p",variant:"bodySecondary",display:"inline"},Ne()("Thanks for your input! We’ll use it to improve the experience."))):Object(ce.d)("div",{css:Me.flagStyle},Object(ce.d)(Ve.a,{component:"p",variant:"bodySecondary",display:"inline"},Ne()("Do you believe you received this in error?"))," ",Object(ce.d)(Fe,{trackingName:"gibberish_deterrence_user_flagged_false_positive",trackingData:w()(w()({},n),{},{assignment_id:s,user_id:u.a.get().id,part_id:t}),"data-test":"flag-false-positive-button",variant:"ghost",size:"small",icon:fe||(fe=Object(ce.d)(Le.a,{size:"small"})),iconPosition:"before",onClick:function(){return l(!0)}},Ne()("Let us know")))):null},qe=Object(Ge.b)({type:"BUTTON"})(De.a),Be={flagStyle:function(){return Object(ce.c)(he||(he=M()(["\n    padding: var(--cds-spacing-50) 0 var(--cds-spacing-50) 0;\n  "])))},successIcon:function(){return Object(ce.c)(Se||(Se=M()(["\n    margin-bottom: calc(var(--cds-spacing-50) * -1);\n  "])))}},components_PlagiarismPromptResult=function(e){var t=e.partId,n=e.trackingData,i=e.promptType,a=IntegrityStatusContextProvider_useIntegrityStatusContext(),s=a.getHasPlagiarismInPart,o=a.assignmentId,c=Object(r.useState)(!1),d=y()(c,2),l=d[0],m=d[1],b="fileUpload"===i?"file_upload_deterrence_user_flagged_false_positive":"simtext_deterrence_user_flagged_false_positive";return s(t)?Object(ce.d)("div",null,Object(ce.d)(xe.a,{severity:"warning"},Ne()("Is your response your original work? It looks similar to another learner’s previous submission. Update your response before submitting.")),l?Object(ce.d)("div",{css:Be.flagStyle},Object(ce.d)(Ue.a,{size:"small",color:"success",css:Be.successIcon})," ",Object(ce.d)(Ve.a,{component:"p",variant:"bodySecondary",display:"inline"},Ne()("Thanks for your input! We’ll use it to improve the experience."))):Object(ce.d)("div",{css:Be.flagStyle},Object(ce.d)(Ve.a,{component:"p",variant:"bodySecondary",display:"inline"},Ne()("Do you believe you received this in error?"))," ",Object(ce.d)(qe,{trackingName:b,trackingData:w()(w()({},n),{},{assignment_id:o,user_id:u.a.get().id,part_id:t}),"data-test":"flag-false-positive-button",variant:"ghost",size:"small",icon:Ie||(Ie=Object(ce.d)(Le.a,{size:"small"})),iconPosition:"before",onClick:function(){return m(!0)}},Ne()("Let us know")))):null},He=t("fiqM"),We=t("YHyG"),Ye={formContainer:Object(ce.c)(ye||(ye=M()(["\n    .bt3-form-control {\n      display: block;\n      width: 100%;\n      height: 34px;\n      padding: 6px 12px;\n      font-size: 14px;\n      line-height: 1.4286;\n      color: var(--cds-color-grey-700);\n      background-color: var(--cds-color-neutral-background-primary);\n      background-image: none;\n      border: 1px solid var(--cds-color-grey-200);\n      border-radius: 4px;\n      box-shadow: inset 0 1px 1px rgb(0 0 0 / 7.5%);\n      transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n    }\n\n    .bt3-form-control:focus {\n      border-color: var(--cds-color-blue-300);\n      outline: 0;\n      box-shadow: inset 0 1px 1px rgb(0 0 0 / 7.5%), 0 0 8px rgb(102 175 233 / 60%);\n    }\n\n    .bt3-form-control::-moz-placeholder {\n      color: var(--cds-color-grey-400);\n      opacity: 1;\n    }\n\n    .bt3-form-control:-ms-input-placeholder {\n      color: var(--cds-color-grey-400);\n    }\n\n    .bt3-form-control::-webkit-input-placeholder {\n      color: var(--cds-color-grey-400);\n    }\n\n    .bt3-form-control[disabled],\n    .bt3-form-control[readonly],\n    fieldset[disabled] .bt3-form-control {\n      cursor: not-allowed;\n      background-color: var(--cds-color-grey-25);\n      opacity: 1;\n    }\n\n    textarea.bt3-form-control {\n      height: auto;\n    }\n  "])))},components_PlainTextEditView=function(e){var t=e.submissionPart,n=e.update,i=e.disabled,r=e.id,a=e.ariaLabelledBy,s=e.ariaDescribedby;return"plainText"!==t.typeName?null:Object(ce.d)("div",{css:Ye.formContainer},Object(ce.d)("textarea",{id:r,defaultValue:t.definition.plainText,className:"c-peer-review-submit-text-field bt3-form-control","aria-labelledby":a,"aria-describedby":s,onChange:function(e){var i=P()(t);i.definition.plainText=e.target.value,n(i)},disabled:i}))},Qe=t("ZFE0"),ze=t("EqTq"),Je=t("kvW3"),Xe=t("aNDK"),Ze=t("RT5p"),Ke=(t("Tqty"),Object(ze.a)("MinWordCount")),components_MinWordCount=function(e){var t=e.minWordCount,n=function(e){if(!e)return 0;if("string"==typeof e){var t=new Xe.a,n=Object(Ze.a)(t.toCML(e,!0,!0));return Object(Ze.j)(n)}return Object(Ze.j)(e)}(e.content),i=t||1,a=t?me()("Minimum {minWordCount, plural, one{# word} other{# words}}: {currentWordCount, number}"):me()("Your answer needs to be a little bit longer. Write a few sentences to complete your assignment.");return r.createElement("div",{className:Ke()},n<i&&r.createElement(Je.b,{message:a,minWordCount:t,currentWordCount:n}))},$e=t("NxPu"),et=t("IbxQ"),tt=t("9AH0"),nt=t("S8+M"),it={notificationContainer:function(e){return Object(ce.c)({marginBottom:"var(--cds-spacing-100)"})}},RichTextEditView_RichTextEditView=function(e){var t,n,i,a=e.courseId,s=e.submissionPart,o=e.update,c=e.disabled,d=e.submissionSchemaPart,l=e.ariaLabelledBy,m=e.ariaDescribedby,b=e.eventData,p=e.versionedAssignmentId,g=e.dtdIdOverride,v=e.itemId,f=s.definition.richText,h=Object(r.useState)(!1),S=y()(h,2),I=S[0],O=S[1],w=Object(et.a)(f,g).cmlContent;if("richText"!==s.typeName||"string"==typeof f)return null;var j=null==d?void 0:null===(t=d.details)||void 0===t?void 0:null===(n=t.definition)||void 0===n?void 0:n.minWordCount,k=null!==(i=null==p?void 0:p.split("@"))&&void 0!==i?i:[],C=y()(k,1)[0],A="min-word-count-warn-".concat(null==d?void 0:d.id);return Object(ce.d)("div",{className:"rc-RichTextEditView",onPaste:function(e){var t=e.clipboardData.getData("text").length,n=Object(u.b)().id;D.a.trackComponent(b,{clipboardTextLength:t,userId:n,peer_assignment_id:C},"pasting_detection","paste"),O(!0)}},I&&Object(ce.d)("div",{css:it.notificationContainer},Object(ce.d)(Qe.a,{onDismiss:function(){return O(!1)}})),Object(ce.d)(tt.a,{initialCML:w,readOnly:c,shouldDebounceChanges:!1,isLearnerUpload:!0,uploadOptions:{asset:$e.a.getImageUploadOptions(a,v)},onContentChange:function(e){var t=P()(s);t.definition.richText=e,o(t)},customTools:[nt.a.BOLD,nt.a.ITALIC,nt.a.MATH,nt.a.LINK,nt.a.UNLINK,nt.a.UNORDERED_LIST,nt.a.ORDERED_LIST,nt.a.IMAGE,nt.a.SUBSCRIPT,nt.a.SUPERSCRIPT],ariaLabelledBy:l,ariaDescribedBy:"".concat(A," ").concat(m)}),Object(ce.d)("div",{id:A},Object(ce.d)(components_MinWordCount,{minWordCount:j,content:w})))},RichTextEditView_RichTextEditViewContainer=function(e,t){return Object(ce.d)(RichTextEditView_RichTextEditView,S()({eventData:t._eventData},e))};RichTextEditView_RichTextEditViewContainer.contextTypes={_eventData:b.a.object};var rt,at,st=RichTextEditView_RichTextEditViewContainer,ot=t("yhVA"),ct=t.n(ot),dt={marginBottom:function(){return Object(ce.c)(rt||(rt=M()(["\n    margin-bottom: var(--cds-spacing-150);\n  "])))}},ut=function(e){function UrlEditView(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).onChangeUrl=function(e){var n=t.props,i=n.submissionPart,r=n.update,a=P()(i);a.definition.url=e.currentTarget.value,r(a)},t.onChangeTitle=function(e){var n=t.props,i=n.submissionPart,r=n.update,a=P()(i);a.definition.title=e.currentTarget.value,r(a)},t.onChangeCaption=function(e){var n=t.props,i=n.submissionPart,r=n.update,a=P()(i);a.definition.caption=e.currentTarget.value,r(a)},t}return i()(UrlEditView,e),UrlEditView.prototype.render=function(){var e=this.props,t=e.submissionPart,n=e.id,i=e.ariaLabelledBy,r=e.ariaDescribedby;return"url"!==t.typeName?null:Object(ce.d)("div",{className:"rc-UrlEditView"},Object(ce.d)(Pe.a,{label:ct()("URL"),id:n,type:"text",placeholder:ct()("https://example.com"),"aria-labelledby":i,"aria-describedby":r,defaultValue:t.definition.url,onChange:this.onChangeUrl,disabled:this.props.disabled,fullWidth:!0,css:dt.marginBottom}),t.definition.url&&Object(ce.d)("div",null,Object(ce.d)("div",{className:"c-peer-review-submit-text-field-container"},Object(ce.d)(Pe.a,{label:ct()("Title"),type:"text",defaultValue:t.definition.title,onChange:this.onChangeTitle,disabled:this.props.disabled,fullWidth:!0,css:dt.marginBottom})),Object(ce.d)("div",{className:"c-peer-review-submit-text-field-container"},Object(ce.d)(Pe.a,{label:ct()("Caption"),defaultValue:t.definition.caption,onChange:this.onChangeCaption,disabled:this.props.disabled,fullWidth:!0,multiline:!0,maxRows:3}))))},UrlEditView}(r.Component),lt=t("beC1"),mt=(t("WMAa"),function(e){function SubmissionPartEditView(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).promptId="prompt-".concat(t.props.partId),t.inputId="input-".concat(t.props.partId),t.validationLabelId="submission-part-label-".concat(t.inputId),t.state={hasUnsavedChanges:!1,showCopyDeterrenceNotification:!1},t.updatePart=function(e){var n=t.props.update;t.setState({hasUnsavedChanges:!0}),n(e)},t.preventAction=function(e){if(Object(z.i)()){e.preventDefault(),t.toggleCopyDeterrenceNotification(!0);var n=t.props,i=n.partId,r=n.versionedAssignmentId,a=t.context._eventData;D.a.trackComponent(a,{userId:Object(u.b)().id,assignment_id:r,partId:i},"prevent_prompt_copy",e.type)}},t.toggleCopyDeterrenceNotification=function(e){t.setState({showCopyDeterrenceNotification:e})},t}i()(SubmissionPartEditView,e);var t=SubmissionPartEditView.prototype;return t.componentDidUpdate=function(e){var t=this.props.draftHasLocalChanges,n=this.state.hasUnsavedChanges;e.draftHasLocalChanges&&!t&&n&&this.setState({hasUnsavedChanges:!1})},t.renderEditor=function(){var e=this.props,t=e.courseId,n=e.submissionPart,i=e.update,a=e.blockSubmit,s=e.disabled,o=e.isPartReceivingInlineFeedback,c=e.submissionSchemaPart,d=e.versionedAssignmentId,u=e.dtdIdOverride,l=e.itemId,m=e.setSkipVivaExam;switch(n.typeName){case"plainText":return r.createElement(components_PlainTextEditView,{submissionPart:n,ariaLabelledBy:this.promptId,ariaDescribedby:this.validationLabelId,id:this.inputId,update:i,disabled:s});case"richText":return r.createElement(st,{submissionPart:n,update:this.updatePart,disabled:s,courseId:t,submissionSchemaPart:c,ariaLabelledBy:this.promptId,ariaDescribedby:this.validationLabelId,versionedAssignmentId:d,dtdIdOverride:u,itemId:l});case"url":return r.createElement(ut,{submissionPart:n,id:this.inputId,update:this.updatePart,disabled:s,ariaLabelledBy:this.promptId,ariaDescribedby:this.validationLabelId});case"fileUpload":return r.createElement(We.a,{id:this.inputId,submissionPart:n,update:this.updatePart,blockSubmit:a,disabled:s,isPartReceivingInlineFeedback:o,ariaDescribedby:this.validationLabelId,onSkipVivaExam:m});case"offPlatform":return at||(at=r.createElement(He.a,null));default:return!1}},t.render=function(){var e=this,t=this.props,n=t.submissionSchemaPart,i=t.errorTree,a=t.showValidation,s=t.renderInlineNode,o=t.partId,c=t.submissionPart,d=n.id,u=this.state.showCopyDeterrenceNotification;return r.createElement("div",{className:"rc-SubmissionPartEditView",id:d},r.createElement("div",{className:"c-peer-review-submit-prompt"},r.createElement("div",{"data-testid":"question-content",onCut:this.preventAction,onCopy:this.preventAction},r.createElement(lt.a,{content:n.prompt,assumeStringIsHtml:!0,contentId:this.promptId,display:"inline-block"})),s&&s(o,n.prompt)),Object(z.i)()&&u&&r.createElement("div",{className:"deterrence-notification"},r.createElement(_e.a,{onDismiss:function(){return e.toggleCopyDeterrenceNotification(!1)}})),r.createElement("div",{className:"deterrence-notification"},r.createElement(components_GibberishPromptResult,{partId:this.props.partId})),r.createElement("div",{className:"deterrence-notification"},r.createElement(components_PlagiarismPromptResult,{partId:this.props.partId,promptType:c.typeName})),a&&i&&r.createElement(Re.a,{id:this.validationLabelId,errorTree:i}),this.renderEditor())},SubmissionPartEditView}(r.Component));mt.contextTypes={_eventData:b.a.object.isRequired},mt.contextTypes={_eventData:b.a.object.isRequired};var bt,pt,gt,vt=mt,ft=(t("jcHc"),{formContainer:Object(ce.c)(bt||(bt=M()(["\n    .bt3-form-control {\n      display: block;\n      width: 100%;\n      height: 34px;\n      padding: 6px 12px;\n      font-size: 14px;\n      line-height: 1.4286;\n      color: var(--cds-color-grey-700);\n      background-color: var(--cds-color-neutral-background-primary);\n      background-image: none;\n      border: 1px solid var(--cds-color-grey-200);\n      border-radius: 4px;\n      box-shadow: inset 0 1px 1px rgb(0 0 0 / 7.5%);\n      transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n    }\n\n    .bt3-form-control:focus {\n      border-color: var(--cds-color-blue-300);\n      outline: 0;\n      box-shadow: inset 0 1px 1px rgb(0 0 0 / 7.5%), 0 0 8px rgb(102 175 233 / 60%);\n    }\n\n    .bt3-form-control::-moz-placeholder {\n      color: var(--cds-color-grey-400);\n      opacity: 1;\n    }\n\n    .bt3-form-control:-ms-input-placeholder {\n      color: var(--cds-color-grey-400);\n    }\n\n    .bt3-form-control::-webkit-input-placeholder {\n      color: var(--cds-color-grey-400);\n    }\n\n    .bt3-form-control[disabled],\n    .bt3-form-control[readonly],\n    fieldset[disabled] .bt3-form-control {\n      cursor: not-allowed;\n      background-color: var(--cds-color-grey-25);\n      opacity: 1;\n    }\n\n    textarea.bt3-form-control {\n      height: auto;\n    }\n  "])))}),ht=function(e){function AssignmentSubmitEditView(t){var n;return(n=e.call(this,t)||this).handleTitleChange=function(e){var t=n.props.updateSubmissionTitle;e.target instanceof HTMLInputElement&&(n.setState({inputValue:e.target.value}),t(e.target.value))},n.handleInputWithErrorFocus=function(){var e=(n.props.submissionAppState||{}).showValidation,t=n.state,i=t.firstSubmissionSchemaPartWithError,r=t.titleHasError;if(e){var a=document.getElementById("input-".concat((i||{}).id));if(r)return void(n.titleInputRef&&n.titleInputRef.focus());i&&a&&a.focus()}},n.getFirstSubmissionSchemaPartWithError=function(){var e=n.props,t=e.submissionSchema,i=e.errorTree;return t.parts.find((function(e){var t=e.id;return(((i.children||{})[t]||{}).errors||[]).length>0}))},n.updateFirstValidationError=function(){var e=n.props,t=e.submissionAppState,i=e.errorTree,r=t.showValidation,a=null;if(r){var s=n.state,o=s.firstSubmissionSchemaPartWithError;s.titleHasError?a=i.errors&&i.errors.map((function(e){return e.errorMessage})).join(" "):o&&(a=(((i.children||{})[o.id]||{}).errors||[]).map((function(e){return e.errorMessage})).join(" "))}n.handleInputWithErrorFocus(),setTimeout((function(){n.setState({firstValidationError:a})}),1500)},n.state={firstValidationError:null,titleHasError:!1,firstSubmissionSchemaPartWithError:null,inputValue:t.submission.title?t.submission.title:""},n}i()(AssignmentSubmitEditView,e);var t=AssignmentSubmitEditView.prototype;return t.componentDidUpdate=function(e){var t=this.props,n=t.submissionAppState,i=t.errorTree,r=n.showValidation;if(e.submissionAppState.showValidation!==r){var a,s=this.getFirstSubmissionSchemaPartWithError();s&&(a=s),this.setState(w()({titleHasError:i.errors&&i.errors.length>0},{firstSubmissionSchemaPartWithError:a}),this.updateFirstValidationError)}},t.render=function(){var e=this,t=this.props,n=t.courseId,i=t.submission,r=t.submissionSchema,a=t.errorTree,s=t.isSubmitted,o=t.submissionAppState,c=o.saveState,d=o.submitState,u=o.showValidation,l=t.renderInlineNode,m=t.updateSubmissionPartGenerator,b=t.blockSubmitPartGenerator,p=t.itemId,g=t.versionedAssignmentId,v=t.creatorId,f=t.draftHasLocalChanges,h=t.dtdIdOverride,S=t.setSkipVivaExam,I=this.state,y=I.firstValidationError,O=I.inputValue,w="saving"===c||"submitting"===d||s,j="submission-part-label-title-".concat(p),k=ct()("Project Title");return Object(ce.d)("div",{css:ft.formContainer,className:"rc-AssignmentSubmitEditView"},pt||(pt=Object(ce.d)("div",{className:"simtext-submission-result"},Object(ce.d)(components_IntegrityStatusResult,null))),u&&Object(ce.d)(Re.a,{id:j,errorTree:a}),Object(ce.d)(Pe.a,{label:k,value:i.title,"aria-label":k,defaultValue:i.title,placeholder:O.length?"":ct()("Give your project a descriptive title"),onChange:this.handleTitleChange,"aria-required":!0,"aria-describedby":j,disabled:w,id:"title",ref:function(t){e.titleInputRef=t},fullWidth:!0,necessityIndicator:"icon"}),Object(ce.d)("div",{className:"parts"},r.parts.map((function(e){var t=null;return t=i.parts&&i.parts[e.id]?i.parts[e.id]:i.invalidParts[e.id],Object(ce.d)(vt,{courseId:n,key:e.id,partId:e.id,submissionSchemaPart:e,submissionPart:t,update:m(e.id),blockSubmit:b(e.id),disabled:w,errorTree:a&&a.children[e.id],showValidation:u,renderInlineNode:l,itemId:p,versionedAssignmentId:g,creatorId:v,draftHasLocalChanges:f,dtdIdOverride:h,setSkipVivaExam:S})}))),Object(ce.d)("div",{className:"sr-only","aria-live":"polite",role:"region"},u&&y))},AssignmentSubmitEditView}(r.Component),St=t("MnCE"),It=(t("06Ht"),{tableContainer:Object(ce.c)(gt||(gt=M()(["\n    .bt3-table {\n      width: 100%;\n      margin-bottom: 20px;\n    }\n\n    .bt3-table > thead > tr > th,\n    .bt3-table > tbody > tr > th,\n    .bt3-table > tfoot > tr > th,\n    .bt3-table > thead > tr > td,\n    .bt3-table > tbody > tr > td,\n    .bt3-table > tfoot > tr > td {\n      padding: 8px;\n      line-height: 1.4286;\n      vertical-align: top;\n      border-top: 1px solid var(--cds-color-grey-25);\n    }\n\n    .bt3-table > thead > tr > th {\n      vertical-align: bottom;\n      border-bottom: 2px solid var(--cds-color-grey-25);\n    }\n\n    .bt3-table > caption + thead > tr:first-child > th,\n    .bt3-table > colgroup + thead > tr:first-child > th,\n    .bt3-table > thead:first-child > tr:first-child > th,\n    .bt3-table > caption + thead > tr:first-child > td,\n    .bt3-table > colgroup + thead > tr:first-child > td,\n    .bt3-table > thead:first-child > tr:first-child > td {\n      border-top: 0;\n    }\n\n    .bt3-table > tbody + tbody {\n      border-top: 2px solid var(--cds-color-grey-25);\n    }\n\n    .bt3-table .bt3-table {\n      background-color: var(--cds-color-neutral-background-primary);\n    }\n\n    .bt3-table-bordered {\n      border: 1px solid var(--cds-color-grey-25);\n    }\n\n    .bt3-table > thead > tr > td.bt3-active,\n    .bt3-table > tbody > tr > td.bt3-active,\n    .bt3-table > tfoot > tr > td.bt3-active,\n    .bt3-table > thead > tr > th.bt3-active,\n    .bt3-table > tbody > tr > th.bt3-active,\n    .bt3-table > tfoot > tr > th.bt3-active,\n    .bt3-table > thead > tr.bt3-active > td,\n    .bt3-table > tbody > tr.bt3-active > td,\n    .bt3-table > tfoot > tr.bt3-active > td,\n    .bt3-table > thead > tr.bt3-active > th,\n    .bt3-table > tbody > tr.bt3-active > th,\n    .bt3-table > tfoot > tr.bt3-active > th {\n      background-color: var(--cds-color-emphasis-neutral-background-weak);\n    }\n\n    .bt3-table > thead > tr > td.bt3-success,\n    .bt3-table > tbody > tr > td.bt3-success,\n    .bt3-table > tfoot > tr > td.bt3-success,\n    .bt3-table > thead > tr > th.bt3-success,\n    .bt3-table > tbody > tr > th.bt3-success,\n    .bt3-table > tfoot > tr > th.bt3-success,\n    .bt3-table > thead > tr.bt3-success > td,\n    .bt3-table > tbody > tr.bt3-success > td,\n    .bt3-table > tfoot > tr.bt3-success > td,\n    .bt3-table > thead > tr.bt3-success > th,\n    .bt3-table > tbody > tr.bt3-success > th,\n    .bt3-table > tfoot > tr.bt3-success > th {\n      background-color: var(--cds-color-feedback-background-success-weak);\n    }\n\n    .bt3-table-hover > tbody > tr > td.bt3-success:hover,\n    .bt3-table-hover > tbody > tr > th.bt3-success:hover,\n    .bt3-table-hover > tbody > tr.bt3-success:hover > td,\n    .bt3-table-hover > tbody > tr.bt3-success:hover > th {\n      background-color: var(--cds-color-green-50);\n    }\n\n    .bt3-table > thead > tr > td.bt3-info,\n    .bt3-table > tbody > tr > td.bt3-info,\n    .bt3-table > tfoot > tr > td.bt3-info,\n    .bt3-table > thead > tr > th.bt3-info,\n    .bt3-table > tbody > tr > th.bt3-info,\n    .bt3-table > tfoot > tr > th.bt3-info,\n    .bt3-table > thead > tr.bt3-info > td,\n    .bt3-table > tbody > tr.bt3-info > td,\n    .bt3-table > tfoot > tr.bt3-info > td,\n    .bt3-table > thead > tr.bt3-info > th,\n    .bt3-table > tbody > tr.bt3-info > th,\n    .bt3-table > tfoot > tr.bt3-info > th {\n      background-color: var(--cds-color-blue-50);\n    }\n\n    .bt3-table-hover > tbody > tr > td.bt3-info:hover,\n    .bt3-table-hover > tbody > tr > th.bt3-info:hover,\n    .bt3-table-hover > tbody > tr.bt3-info:hover > td,\n    .bt3-table-hover > tbody > tr.bt3-info:hover > th {\n      background-color: var(--cds-color-blue-100);\n    }\n\n    .bt3-table > thead > tr > td.bt3-warning,\n    .bt3-table > tbody > tr > td.bt3-warning,\n    .bt3-table > tfoot > tr > td.bt3-warning,\n    .bt3-table > thead > tr > th.bt3-warning,\n    .bt3-table > tbody > tr > th.bt3-warning,\n    .bt3-table > tfoot > tr > th.bt3-warning,\n    .bt3-table > thead > tr.bt3-warning > td,\n    .bt3-table > tbody > tr.bt3-warning > td,\n    .bt3-table > tfoot > tr.bt3-warning > td,\n    .bt3-table > thead > tr.bt3-warning > th,\n    .bt3-table > tbody > tr.bt3-warning > th,\n    .bt3-table > tfoot > tr.bt3-warning > th {\n      background-color: var(--cds-color-yellow-25);\n    }\n\n    .bt3-table-hover > tbody > tr > td.bt3-warning:hover,\n    .bt3-table-hover > tbody > tr > th.bt3-warning:hover,\n    .bt3-table-hover > tbody > tr.bt3-warning:hover > td,\n    .bt3-table-hover > tbody > tr.bt3-warning:hover > th {\n      background-color: var(--cds-color-emphasis-tertiary-background-weak);\n    }\n\n    .bt3-table > thead > tr > td.bt3-danger,\n    .bt3-table > tbody > tr > td.bt3-danger,\n    .bt3-table > tfoot > tr > td.bt3-danger,\n    .bt3-table > thead > tr > th.bt3-danger,\n    .bt3-table > tbody > tr > th.bt3-danger,\n    .bt3-table > tfoot > tr > th.bt3-danger,\n    .bt3-table > thead > tr.bt3-danger > td,\n    .bt3-table > tbody > tr.bt3-danger > td,\n    .bt3-table > tfoot > tr.bt3-danger > td,\n    .bt3-table > thead > tr.bt3-danger > th,\n    .bt3-table > tbody > tr.bt3-danger > th,\n    .bt3-table > tfoot > tr.bt3-danger > th {\n      background-color: var(--cds-color-feedback-error-invert-weak);\n    }\n\n    .bt3-table-hover > tbody > tr > td.bt3-danger:hover,\n    .bt3-table-hover > tbody > tr > th.bt3-danger:hover,\n    .bt3-table-hover > tbody > tr.bt3-danger:hover > td,\n    .bt3-table-hover > tbody > tr.bt3-danger:hover > th {\n      background-color: var(--cds-color-red-100);\n    }\n  "])))}),yt=function(e){function AssignmentUpgradeChanges(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).renderChange=function(e,n){if("AddsPart"===e.typeName)return t.renderChangeItem(n,"cif-plus-square",me()("Added question."),Object(ce.d)("tr",{className:"bt3-success"},Object(ce.d)("th",null,me()("Added")),Object(ce.d)("td",{className:"change-contents"},Object(ce.d)("div",null,Object(ce.d)(lt.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("RemovesPart"===e.typeName)return t.renderChangeItem(n,"cif-minus-square",me()("Removed question."),Object(ce.d)("tr",{className:"bt3-danger"},Object(ce.d)("th",null,me()("Removed")),Object(ce.d)("td",{className:"change-contents"},Object(ce.d)("div",null,Object(ce.d)(lt.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))));if("ChangesPart"===e.typeName){var i=e.definition.changes,r=i.find((function(e){return"ChangesPrompt"===e.typeName})),a=i.filter((function(e){return"ChangesPrompt"!==e.typeName}));return t.renderChangeItem(n,"cif-square",me()("Changed question."),[Object(ce.d)("tr",{className:ue()({"bt3-danger":!!r}),key:"changedQuestionPrompt"},Object(ce.d)("th",null,me()("Original")),Object(ce.d)("td",{className:"change-contents"},Object(ce.d)("div",null,Object(ce.d)(lt.a,{assumeStringIsHtml:!0,content:e.definition.prompt})))),r&&t.renderPartChange(r,"promptChange"),a.map(t.renderPartChange),0===i.length&&me()("Unknown change.")])}return null},t.renderPartChange=function(e,t){var n="ChangesPrompt"===e.typeName?me()("New"):"",i=!1;return"ChangesPrompt"===e.typeName?i=Object(ce.d)("div",{key:t},Object(ce.d)(lt.a,{assumeStringIsHtml:!0,content:e.definition.newPrompt})):"ChangesPoints"===e.typeName?i=me()("The new version of this question has different point values."):"ChangesOptions"===e.typeName?i=me()("The new version of this multiple choice question has different options."):"ChangesValidationRules"===e.typeName&&(i=me()("The new version of this question allows a different set of responses.")),Object(ce.d)("tr",{className:"ChangesPrompt"===e.typeName?"bt3-success":"bt3-warning",key:t},Object(ce.d)("th",null,n),Object(ce.d)("td",{className:"change-contents"},i))},t}i()(AssignmentUpgradeChanges,e);var t=AssignmentUpgradeChanges.prototype;return t.excludeNoChangeChanges=function(e){return e.filter((function(e){return"NoChange"!==e.typeName}))},t.renderChangeGroup=function(e,t){var n=this.excludeNoChangeChanges(e);return 0!==n.length&&Object(ce.d)("div",null,Object(ce.d)("h2",null,t),Object(ce.d)("ul",{className:"cif-list-ul"},n.map(this.renderChange)))},t.renderChangeItem=function(e,t,n,i){return Object(ce.d)("li",{className:"change-item",key:e},Object(ce.d)("i",{className:t}),Object(ce.d)("span",{className:"type-of-change"},n),Object(ce.d)("div",{css:It.tableContainer,className:"change-table-container"},Object(ce.d)("table",{className:"bt3-table"},Object(ce.d)("tbody",null,i))))},t.render=function(){return Object(ce.d)("div",{className:"rc-AssignmentUpgradeChanges"},this.renderChangeGroup(this.props.upgradeToCurrentAssignment.submissionSchemaChanges,me()("Assignment question changes")),this.renderChangeGroup(this.props.upgradeToCurrentAssignment.reviewSchemaChanges,me()("Review question changes")))},AssignmentUpgradeChanges}(r.Component);yt.propTypes={upgradeToCurrentAssignment:b.a.object.isRequired};var Ot,wt,jt=yt,kt=t("+2ZD"),Ct={buttonContainer:Object(ce.c)(Ot||(Ot=M()(["\n    .bt3-btn {\n      display: inline-block;\n      margin-bottom: 0;\n      font-weight: normal;\n      text-align: center;\n      vertical-align: middle;\n      cursor: pointer;\n      background-image: none;\n      border: 1px solid transparent;\n      white-space: nowrap;\n      padding: 6px 12px;\n      font-size: 14px;\n      line-height: 1.4286;\n      border-radius: 4px;\n      -webkit-user-select: none;\n      -moz-user-select: none;\n      -ms-user-select: none;\n      user-select: none;\n    }\n\n    .bt3-btn:focus,\n    .bt3-btn:active:focus,\n    .bt3-btn.bt3-active:focus {\n      outline: thin dotted;\n      outline: 5px auto -webkit-focus-ring-color;\n      outline-offset: -2px;\n    }\n\n    .bt3-btn:hover,\n    .bt3-btn:focus {\n      color: var(--cds-color-grey-900);\n      text-decoration: none;\n    }\n\n    .bt3-btn:active,\n    .bt3-btn.bt3-active {\n      outline: 0;\n      background-image: none;\n      -webkit-box-shadow: inset 0 3px 5px var(--cds-color-darken-100);\n      box-shadow: inset 0 3px 5px var(--cds-color-darken-100);\n    }\n\n    .bt3-btn.bt3-disabled,\n    .bt3-btn[disabled],\n    fieldset[disabled] .bt3-btn {\n      cursor: not-allowed;\n      pointer-events: none;\n      opacity: 0.65;\n      -webkit-box-shadow: none;\n      box-shadow: none;\n    }\n\n    .bt3-btn-success {\n      color: var(--cds-color-neutral-primary-invert);\n      background-color: var(--cds-color-feedback-success);\n      border-color: var(--cds-color-green-400);\n    }\n\n    .bt3-btn-success:hover,\n    .bt3-btn-success:focus,\n    .bt3-btn-success:active,\n    .bt3-btn-success.bt3-active,\n    .bt3-open .bt3-dropdown-toggle.bt3-btn-success {\n      color: var(--cds-color-neutral-primary-invert);\n      background-color: var(--cds-color-feedback-success-hover);\n      border-color: var(--cds-color-green-500);\n    }\n\n    .bt3-btn-success:active,\n    .bt3-btn-success.bt3-active,\n    .bt3-open .bt3-dropdown-toggle.bt3-btn-success {\n      background-image: none;\n    }\n\n    .bt3-btn-success.bt3-disabled,\n    .bt3-btn-success[disabled],\n    fieldset[disabled] .bt3-btn-success,\n    .bt3-btn-success.bt3-disabled:hover,\n    .bt3-btn-success[disabled]:hover,\n    fieldset[disabled] .bt3-btn-success:hover,\n    .bt3-btn-success.bt3-disabled:focus,\n    .bt3-btn-success[disabled]:focus,\n    fieldset[disabled] .bt3-btn-success:focus,\n    .bt3-btn-success.bt3-disabled:active,\n    .bt3-btn-success[disabled]:active,\n    fieldset[disabled] .bt3-btn-success:active,\n    .bt3-btn-success.bt3-disabled.bt3-active,\n    .bt3-btn-success[disabled].bt3-active,\n    fieldset[disabled] .bt3-btn-success.bt3-active {\n      background-color: var(--cds-color-feedback-success);\n      border-color: var(--cds-color-green-400);\n    }\n  "])))},components_AssignmentUpgradeModal=function(e){var t=e.onClickUpgrade,n=e.modalOpen,i=e.onModalClose,r=e.upgradeToCurrentAssignment,a=!1,s=!1;return n?(null!=r&&("NotifiesUser"===r.severity?(a=me()("Upgrade assignment"),s=Object(ce.d)("p",null,me()('\n            The assignment changed since you started working on it. Click\n            "Upgrade assignment" to get the new assignment. Please read the\n            new assignment carefully and update your submission to follow\n            the new instructions.\n          '))):"ClearsSubmission"===r.severity&&(a=me()("Delete draft and upgrade assignment"),s=Object(ce.d)("p",null,me()("\n            The assignment changed since you started working on it. We need\n            to delete your draft to give you the new assignment.\n          ")," ",Object(ce.d)("strong",null,me()("\n              Please save a copy of your submission outside Coursera before\n              continuing.\n            "))," ",me()('\n            Click "Delete draft and upgrade assignment" to get the new\n            assignment. If you’d like to not update your assignment, you can click “Cancel” and submit your answers on the old version.\n          ')))),Object(ce.d)(kt.a,{handleClose:i,modalName:me()("New assignment version")},Object(ce.d)("div",{css:Ct.buttonContainer},Object(ce.d)("div",{className:"rc-AssignmentUpgradeNotification assignment-upgrade-explanation"},Object(ce.d)("h3",null,me()("New assignment version")),s,null!=r&&Object(ce.d)(jt,{upgradeToCurrentAssignment:r}),Object(ce.d)("div",{className:"c-modal-action-bar"},Object(ce.d)("button",{type:"button",className:"bt3-btn c-modal-action-button",onClick:i},me()("Cancel")),Object(ce.d)("button",{type:"button",className:"bt3-btn bt3-btn-success c-modal-action-button",onClick:t},a)))))):null},At={alertContainer:Object(ce.c)(wt||(wt=M()(["\n    .bt3-alert {\n      padding: 15px;\n      margin-bottom: 20px;\n      border: 1px solid transparent;\n      border-radius: 4px;\n    }\n\n    .bt3-alert h4 {\n      margin-top: 0;\n      color: inherit;\n    }\n\n    .bt3-alert > p,\n    .bt3-alert > ul {\n      margin-bottom: 0;\n    }\n\n    .bt3-alert > p + p {\n      margin-top: 5px;\n    }\n\n    .bt3-alert-info {\n      background-color: var(--cds-color-blue-50);\n      border-color: var(--cds-color-blue-50);\n      color: var(--cds-color-feedback-informative);\n    }\n\n    .bt3-alert-info hr {\n      border-top-color: var(--cds-color-blue-50);\n    }\n\n    .bt3-alert-danger {\n      background-color: var(--cds-color-feedback-error-invert-weak);\n      border-color: var(--cds-color-red-100);\n      color: var(--cds-color-red-800);\n    }\n\n    .bt3-alert-danger hr {\n      border-top-color: var(--cds-color-red-100);\n    }\n  "])))},components_AssignmentUpgradeNotification=function(e){var t=e.upgradeToCurrentAssignment,n=e.onRequestUpgrade,i=e.showStaleAssignmentVersionError,a=Object(r.useState)(!1),s=y()(a,2),o=s[0],c=s[1],d=ue()({"bt3-alert":!0,"bt3-alert-info":!i,"bt3-alert-danger":i});return t&&"AutomaticallyUpgrades"!==t.severity?Object(ce.d)("div",{css:At.alertContainer},Object(ce.d)("div",{className:"rc-AssignmentUpgradeNotification"},Object(ce.d)("div",{style:{background:"var(--cds-color-feedback-background-informative-weak)",border:"none",color:"var(--cds-color-neutral-primary)"},className:d},me()("A new version of this assignment exists.")," ",Object(ce.d)("button",{type:"button",style:{color:"var(--cds-color-interactive-primary)"},className:"button-link",onClick:function(){return c(!0)}},me()("Click here to see the changes and get the new version."))),o&&Object(ce.d)(components_AssignmentUpgradeModal,{upgradeToCurrentAssignment:t,modalOpen:o,onModalClose:function(){return c(!1)},onClickUpgrade:function(){n(),c(!1)}}))):null},Et=function(e){function PeerItemUpgradeNotification(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).onRequestUpgrade=function(){var e=t.props,n=e.courseId,i=e.courseSlug,r=e.computedItem.id,a=e.submission,s=e.assignmentVersion,o=e.forceUpgradeToAssignmentVersion;t.context.executeAction(Ee.f,{itemId:r,submission:a,assignmentVersion:s,forceUpgradeToAssignmentVersion:o,courseId:n,courseSlug:i,userId:Object(u.b)().id})},t}return i()(PeerItemUpgradeNotification,e),PeerItemUpgradeNotification.prototype.render=function(){return null==this.props.upgradeToCurrentAssignment?null:r.createElement("div",{className:"rc-PeerItemUpgradeNotification"},r.createElement(components_AssignmentUpgradeNotification,{onRequestUpgrade:this.onRequestUpgrade,upgradeToCurrentAssignment:this.props.upgradeToCurrentAssignment,showStaleAssignmentVersionError:this.props.showStaleAssignmentVersionError}))},PeerItemUpgradeNotification}(r.Component);Et.contextTypes={executeAction:b.a.func.isRequired};var Pt,xt,Tt,Nt,Rt,_t,Dt,Vt,Ut,Lt,Gt,Ft,Mt,qt=Object(St.b)(Object(o.a)(["PeerSubmissionDraftStore","CourseStore"],(function(e){var t=e.PeerSubmissionDraftStore,n=e.CourseStore,i=t.getState().latestSubmissionAndRelated,r=null,a=null,s=null;return null!=i&&(r=i.upgradeToCurrentAssignment,a=i.submissionSchema.assignmentVersion,s=i.upgradeToCurrentAssignment&&i.upgradeToCurrentAssignment.upgradeToVersion),{submission:i&&i.submission,upgradeToCurrentAssignment:r,assignmentVersion:a,forceUpgradeToAssignmentVersion:s,courseId:n.getCourseId(),courseSlug:n.getCourseSlug()}})))(Et),Bt=t("SJ7i"),Ht=t("aFpJ"),Wt={SUBMITTING:"submitting",SUBMIT_ERROR:"submitError",READY:"ready",SAVING:"saving",SAVE_ERROR:"saveError"},Yt=Wt.SUBMITTING,Qt=Wt.SAVING,zt=t("S+eF"),Jt=t.n(zt),Xt=t("k8gO"),Zt=t("rDgo"),assignmentVerificationTest_fetchVerifiableId=function(){var e=u.a.get().id;return Jt.a.resolve("".concat(Object(Xt.a)(),"~").concat(e))},assignmentVerificationTest_verifyAssignment=function(e,t){var n=u.a.get().id;return Jt.a.resolve(new Zt.a({isApprovedForVerificationState:!0,verifiableId:e.split("~")[0],nextVerificationState:"Success",id:e,userId:n,expiresAt:Date.now()+2592e6}))},Kt=t("4uky"),$t=t("JJfJ"),en=t("6/Gu"),tn=t("Gok7"),nn=t("rQpo"),rn={root:function(){return Object(ce.c)(Pt||(Pt=M()(["\n    text-align: right;\n    margin-top: var(--cds-spacing-300);\n  "])))},saveStateDisplay:function(){return Object(ce.c)(xt||(xt=M()(["\n    margin-right: var(--cds-spacing-300);\n    display: inline-block;\n  "])))},saveDraftButton:function(){return Object(ce.c)(Tt||(Tt=M()(["\n    margin-right: var(--cds-spacing-200);\n  "])))}},an=Object(St.b)(Object(o.a)(["CourseStore"],(function(e){return{courseId:e.CourseStore.getCourseId()}})))((function(e){var t,n=e.computedItem,i=e.courseId,a=e.lastSaveTime,s=e.isSaving,o=e.isSubmitting,c=e.onSave,d=e.onSubmit,u=e.submitMessage,l=void 0===u?ct()("Submit"):u,m=e.isSubmitDisabled,b=void 0!==m&&m,p=e.submitButtonRef,g=Object(Ce.p)(n),v=s?ct()("Saving draft..."):ct()("Submitting assignment..."),f=null!==(t=n.isReadOnlyAfterSessionEnd)&&void 0!==t&&t,h=s||o||f,S=h||b;return Object(ce.d)(en.a,{css:rn.root},Object(ce.d)(Ve.a,{component:"p",variant:"bodySecondary",color:"supportText",css:rn.saveStateDisplay,id:"last-saved-text"},a&&a>0?Object(ce.d)(Je.b,{message:ct()("Last saved on {lastSaveDate} at {lastSaveTime}"),lastSaveDate:Object($t.w)(a,$t.c),lastSaveTime:Object($t.w)(a,$t.r)}):ct()("This project has not been saved.")),Object(ce.d)(tn.a,{"aria-live":"polite",component:"span",className:"rc-A11yScreenReaderOnly"},s||o?v:null),g&&Object(ce.d)(nn.a,{courseId:i}),!g&&Object(ce.d)(r.Fragment,null,Object(ce.d)(Ge.a,{variant:"secondary","data-testid":"save-draft",disabled:h,onClick:c,trackingName:"save","aria-label":ct()("Save draft"),"aria-describedby":"last-saved-text",css:rn.saveDraftButton,size:"small",loading:s},Object(ce.d)("span",{"aria-hidden":!0},ct()("Save draft"))),Object(ce.d)(Ge.a,{variant:"primary","data-testid":"preview",onClick:d,disabled:S,trackingName:"submit","aria-label":l,size:"small",loading:o,_refAltAsTrueRef:p},Object(ce.d)("span",{"aria-hidden":!0},l))))})),sn=t("g0DA"),on=t("wd/R"),cn=t.n(on),dn=t("7NTc"),un=t("FdHa"),ln=t("gO9+"),mn=dn.a.HeadingGroup,bn=dn.a.Content,pn=dn.a.Actions,gn={title:function(){return Object(ce.c)(Nt||(Nt=M()(["\n    margin: var(--cds-spacing-150) 0 var(--cds-spacing-400) 0;\n  "])))},notification:function(){return Object(ce.c)(Rt||(Rt=M()(["\n    margin-bottom: var(--cds-spacing-300);\n  "])))},buttons:function(){return Object(ce.c)(_t||(_t=M()(["\n    "," {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),un.a.down("xs"))},button:function(){return Object(ce.c)(Dt||(Dt=M()(["\n    margin-right: var(--cds-spacing-300);\n    margin-bottom: var(--cds-spacing-200);\n  "])))},message:function(){return Object(ce.c)(Vt||(Vt=M()(["\n    padding-top: var(--cds-spacing-150);\n  "])))}},modals_SubmitModalV2=function(e){var t=e.handleSubmit,n=e.handleCancel,i=e.isSubmitting,a=e.isInvalid,s=e.remainingAttempts,o=e.submissionDeadline,c=e.loadingIntegrityStatus,d=e.isActivelyDeterred,u=e.isPassivelyDeterred,l=e.isAiGradingTreatmentFlow,m=e.returnFocusRef,b=ct()("Submit"),p=s||0,g=i||c,v=function(e){return e?ct()("Missing or invalid answers"):ct()("Ready to submit your assignment?")}(a||d||u),f=Object(sn.b)().peerReviewEventingV3Data,h=w()(w()({button:{name:ln.a.SUBMIT_ASSIGNMENT}},f),{},{peerReview:w()(w()({},f.peerReview),{},{isSubmittedForAiGraded:l})});return Object(ce.d)(dn.a,{open:!0,onClose:n,"aria-describedby":v,returnFocusRef:m},Object(ce.d)(mn,null,v),Object(ce.d)(bn,null,Object(ce.d)("div",{"data-testid":"SubmitDialog__content"},(a||d)&&Object(ce.d)(xe.a,{css:gn.notification,severity:"error","data-testid":"SubmitDialog__notification"},ct()("Your assignment couldn’t be submitted for grading.")),u&&!d&&Object(ce.d)(r.Fragment,null,Object(ce.d)(xe.a,{css:gn.notification,severity:"warning","data-testid":"SubmitDialog__notification"},ct()("We found potential content issues.")),Object(ce.d)(Ve.a,{component:"p",variant:"bodyPrimary"},ct()("Do you still want to submit this assessment?"))),d&&Object(ce.d)(Ve.a,{component:"p",variant:"bodyPrimary"},ct()("We found content issues in your assignment. Check the notifications and make any required changes before you submit your assignment again.")),!u&&!d&&Object(ce.d)(Ve.a,{component:"p",variant:"bodyPrimary"},ct()("Once you've submitted your assignment, you won't be able to make any changes. Take a moment to review your work before proceeding.")),void 0!==s&&Object(ce.d)(Ve.a,{component:"p",variant:"bodyPrimary",css:gn.message},Object(ce.d)(Je.b,{message:p>0?ct()("Your submission counts as an attempt. You'll have {attemptsLeftAfterSubmission, plural, =1 {# more attempt} other {# more attempts available}}{deadline}."):ct()("This is your last attempt. You'll have no more attempts after you submit."),attemptsLeftAfterSubmission:Math.max(p,0),deadline:o?ct()(" until the deadline on #{formattedDeadline}",{formattedDeadline:$t.t.getFormattedDeadline(cn()(o))}):""})),l&&!a&&!d&&Object(ce.d)(Ve.a,{component:"p",variant:"bodyPrimary",css:gn.message},Object(ce.d)(Je.b,{message:ct()("After completing your peer reviews, you'll receive your AI-generated grade based on the assignment rubrics.")})))),Object(ce.d)(pn,null,Object(ce.d)("div",{"data-testid":"SubmitDialog__controls"},Object(ce.d)("div",{css:gn.buttons,"data-testid":"AttemptViewSubmitControls__buttons"},!d&&Object(ce.d)(R.a,{onClick:t,loading:g,variant:"primary","data-testid":"dialog-submit-button",css:gn.button,trackingData:h,noViewTracking:!0},b),!g&&!d&&Object(ce.d)(De.a,{onClick:n,"data-testid":"dialog-cancel-button",variant:"secondary",css:gn.button},ct()("Cancel")),d&&Object(ce.d)(De.a,{onClick:n,"data-testid":"dialog-cancel-button",variant:"primary",css:gn.button},ct()("Okay"))))))},vn={piiMessageBeforeSubmit:function(){return Object(ce.c)(Ut||(Ut=M()(["\n    padding-top: var(--cds-spacing-150);\n    text-align: end;\n  "])))}},fn=function(e){function PeerItemVerificationSubmission(){for(var t,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return(t=e.call.apply(e,[this].concat(i))||this).state={isSubmitting:!1,isAgreementComplete:!1,fullName:"",hasError:!1},t.handleSubmissionClicked=function(){if(t.props.isVerifiable){t.setState({hasError:!1});var e=null;assignmentVerificationTest_fetchVerifiableId().then((function(n){return assignmentVerificationTest_verifyAssignment(e=n,t.state.fullName)})).then((function(){null!=e&&t.props.handleSubmit(e)})).catch((function(){return t.setState({isSubmitting:!1,hasError:!0})})).done()}else t.props.handleSubmit()},t.scrollToTop=function(){var e,t=document.querySelector('[data-id="item-scroll-container"]');t&&(null===(e=t.scroll)||void 0===e||e.call(t,{top:0,behavior:"smooth"}))},t.onAgreementComplete=function(e){t.setState({isAgreementComplete:!0,fullName:e})},t.onAgreementIncomplete=function(){t.setState({isAgreementComplete:!1})},t.submitButtonRef=r.createRef(),t}i()(PeerItemVerificationSubmission,e);var t=PeerItemVerificationSubmission.prototype;return t.componentWillReceiveProps=function(e){var t=this.props.submissionAppState.submitState===Yt,n=e.submissionAppState.submitState===Yt;t&&!n?this.setState({isSubmitting:!1}):!t&&n&&this.setState({isSubmitting:!0})},t.render=function(){var e,t=this.props,n=t.submissionAppState,i=t.lastSaveTime,r=t.handleSave,a=t.isVerifiable,s=t.computedItem,o=t.blockSubmit,c=t.capabilitiesWithReasons,d=t.latestAttemptSummary,u=t.submissionDeadline,l=t.getShouldDeterLearnerFromSubmitting,m=t.hasGibberishOrPlagiarismInSubmission,b=t.loadingIntegrityStatus,p=t.showV2SubmitModal,g=t.onV2SubmitModalClose,v=t.isAiGradingTreatmentFlow,f=this.state,h=f.isAgreementComplete,S=f.isSubmitting,I=f.hasError,y=null==c?void 0:null===(e=c.anonymousPeerReview)||void 0===e?void 0:e.isAllowed,O=l(),w=m;return Object(ce.d)("div",{className:"rc-PeerItemVerificationSubmission",style:{marginTop:"var(--cds-spacing-400)",marginBottom:"var(--cds-spacing-400)"}},a&&Object(ce.d)(Ht.a,{onAgreementComplete:this.onAgreementComplete,onAgreementIncomplete:this.onAgreementIncomplete,isShownInsideModal:!1}),y&&Object(ce.d)(Kt.a,null,ct()("Your submission will be anonymous to fellow learners and your name will be visible to course instructors.")),Object(ce.d)(an,{lastSaveTime:i,isSaving:n.saveState===Qt,isSubmitting:S||!!b,onSave:function(){return r()},onSubmit:this.handleSubmissionClicked,submitMessage:ct()("Submit"),isSubmitDisabled:a&&!h||o,computedItem:s,submitButtonRef:this.submitButtonRef}),v&&Object(ce.d)("div",{css:vn.piiMessageBeforeSubmit,"data-testid":"pii-message"},ct()("Never include personal information in your assignment.")),I&&Object(ce.d)("div",{className:"align-right caption-text",style:{marginTop:12}},ct()("An error has occurred while submitting. Please try again.")),p&&Object(ce.d)(modals_SubmitModalV2,{"data-testid":"submit-modal",remainingAttempts:null==d?void 0:d.remainingAttempts,isActivelyDeterred:O,isPassivelyDeterred:w,submissionDeadline:u,handleSubmit:this.handleSubmissionClicked,handleCancel:g,loadingIntegrityStatus:b,isInvalid:I,isSubmitting:S,isAiGradingTreatmentFlow:v,returnFocusRef:this.submitButtonRef}))},PeerItemVerificationSubmission}(r.Component),hn=Object(St.b)(Bt.a)((function(e){var t=IntegrityStatusContextProvider_useIntegrityStatusContext(),n=t.getShouldDeterLearnerFromSubmitting,i=t.getHasPlagiarismInSubmission,r=t.getHasGibberishInSubmission,a=t.isChecking,s=i()||r(),o=Object(sn.b)().isAiGradingFlowPreview;return Object(ce.d)(fn,S()({},e,{getShouldDeterLearnerFromSubmitting:n,hasGibberishOrPlagiarismInSubmission:s,loadingIntegrityStatus:a,isAiGradingTreatmentFlow:o()}))})),Sn=t("1xaR"),In=t("qSs1"),yn=t("37kS"),On=t.n(yn),wn={container:function(){return Object(ce.c)(Lt||(Lt=M()(["\n    text-align: right;\n    margin-top: var(--cds-spacing-100);\n  "])))},contentContainer:function(){return Object(ce.c)(Gt||(Gt=M()(["\n    padding-bottom: var(--cds-spacing-400);\n  "])))},notification:function(){return Object(ce.c)(Ft||(Ft=M()(["\n    margin-bottom: var(--cds-spacing-150);\n  "])))},contentItem:function(){return Object(ce.c)(Mt||(Mt=M()(["\n    margin-bottom: var(--cds-spacing-150);\n  "])))}},components_GradingCriteriaPreviewModal=function(e){var t=e.criteria,n=e.partId,i=e.privilegedRoleViewReviewSchema,r=e.prompt,a="grading-criteria-prompt-".concat(n);return 0===t.length?null:Object(ce.d)("div",{css:wn.container,"data-testid":"grading-criteria-preview-modal"},Object(ce.d)(In.a,{helpToggleProps:{"aria-label":On()("Preview grading criteria")},tooltipProps:{closeButtonProps:{"aria-label":On()("Close preview grading criteria")}},label:On()("Preview grading criteria")},(function(e){var n=e.onClose,r=e.isExpanded,s=void 0!==r&&r;return Object(ce.d)(dn.a,{"aria-labelledby":"dialog-heading","aria-describedby":a,open:s,onClose:n,variant:"standard","data-testid":"grading-criteria-dialog"},Object(ce.d)(dn.a.HeadingGroup,{id:"dialog-heading","data-testid":"dialog-heading"},On()("Preview grading criteria")),Object(ce.d)(dn.a.Content,{id:"preview-grading-criteria-content",css:wn.contentContainer},i&&Object(ce.d)(xe.a,{severity:"warning",css:wn.notification,"data-testid":"privileged-role-notification"},On()("You can preview the grading criteria because you have a privileged role in this course. Normal\n                    learners cannot see the grading criteria until they submit a submission.")),t.map((function(e){return Object(ce.d)("div",{className:"criterion card-no-action compact",key:e.get("id"),css:wn.contentItem},Object(ce.d)(lt.a,{content:e.get("prompt"),assumeStringIsHtml:!1}))}))))})),r&&Object(ce.d)(tn.a,{id:a,component:"span",className:"rc-A11yScreenReaderOnly"},Object(ce.d)(Je.b,{message:On()("Preview grading criteria for the prompt: {prompt}."),prompt:Object(ce.d)(lt.a,{content:r,assumeStringIsHtml:!0,display:"inline-block"})})))},jn=s.a.compose(Object(o.a)(["PeerPermissionsAndProgressesStore"],(function(e){var t=e.PeerPermissionsAndProgressesStore;return{hasLoaded:"loaded"===t.getState().loadState,capabilitiesWithReasons:t.getState().capabilitiesWithReasons}})),Object(l.a)((function(e){return e.hasLoaded})),Object(N.a)((function(e){var t,n=!1,i=null===(t=e.capabilitiesWithReasons)||void 0===t?void 0:t.viewReviewSchema;i&&(n=i.isAllowed&&"privilegedRole"===i.reason);var r=Object(Sn.a)(e.reviewSchema);return{partId:e.partId,prompt:e.prompt,criteria:r.getPartsForSubmissionSchemaPart(e.partId),privilegedRoleViewReviewSchema:n}})))(components_GradingCriteriaPreviewModal),kn=t("rYOX"),Cn=t("grTl"),An=t("JrTX"),En=t("jSbv"),Pn=t("h4/6"),xn="peerSubmission/1",Tn=3e3,Nn=function(e){function PeerItemEditView(t,n){var i;return(i=e.call(this,t,n)||this).setShowIntegrityCheckDialog=function(e){i.setState((function(t){return{showIntegrityCheckDialog:"function"==typeof e?e(t.showIntegrityCheckDialog):e}}))},i.setSkipVivaExam=function(e){i.setState((function(t){return{skipVivaExam:"function"==typeof e?e(t.skipVivaExam):e}}))},i.handleRichTextDtdConversion=function(e){var t=e.definition.parts;return Object.values(t).forEach((function(e){if("richText"===e.typeName){var t=e.definition.richText;"string"!=typeof t&&"cml"===(null==t?void 0:t.typeName)&&(t.definition.dtdId=xn)}})),e},i.handleSubmit=function(e){var t=i.props,n=t.computedItem,r=t.latestSubmissionAndRelated,a=t.courseId,s=t.courseSlug,o=t.isAiGradingTreatmentFlow,c=(0,t.doesSubmissionIncludeUnsupportedFileTypeForAiGrading)(i.handleRichTextDtdConversion(r.submission));i.context.executeAction(Ee.e,{itemId:n.id,submission:i.handleRichTextDtdConversion(r.submission),assignmentVersion:r.submissionSchema.assignmentVersion,verifiableId:e,courseId:a,courseSlug:s,userId:Object(u.b)().id,gradingType:o&&!c?"AI":"HUMAN",skipVivaExam:i.state.skipVivaExam})},i.handleVivaExamStart=function(){i.closeSubmitDialog(),i.setState({showIntegrityCheckDialog:!0})},i.handleVivaExamComplete=function(){i.context.executeAction(Ae.d,{userId:Object(u.b)().id,courseId:i.props.courseId,itemId:i.props.computedItem.id,courseSlug:i.props.courseSlug})},i.handleSubmitButtonClicked=function(e){var t=i.props.integrityContext;i.state.showSubmitDialog?i.handleSubmit(e):(t.setIsChecking(!0),i.setState({verifiableId:e}),i.handleSave())},i.showSubmitDialog=function(){i.setState({showSubmitDialog:!0})},i.closeSubmitDialog=function(){i.setState({showSubmitDialog:!1})},i.getIntegrityStatus=function(){var e=i.props,t=e.latestSubmissionAndRelated,n=e.integrityContext,r=createIntegrityQuery(t);if(r.prompts.length>0){var a,s=integrityStatusHelper_getOrderedChecks();k()(r,null===(a=i.state.integrityStatusVariables)||void 0===a?void 0:a.submission)?(n.setIsChecking(!1),i.showSubmitDialog()):(i.setState((function(){return{integrityStatusVariables:{orderedChecks:s,submission:r}}})),n.setIsChecking(!0))}else n.setIsChecking(!1),i.showSubmitDialog()},i.handleIntegrityStatusFetched=function(e){var t=i.props,n=t.integrityContext,r=t.courseId,a=t.eventData,s=t.latestSubmissionAndRelated;n.setIsChecking(!1),integrityStatusHelper_processIntegrityStatusResults({courseId:r,eventData:a,integrityContext:n,latestSubmissionAndRelated:s,integrityStatus:e,scrollToTop:i.scrollToTop,showSubmitDialog:i.showSubmitDialog})},i.scrollToTop=function(){var e,t=document.querySelector('[data-id="item-scroll-container"]');t&&(null===(e=t.scroll)||void 0===e||e.call(t,{top:0,behavior:"smooth"}))},i.handleSave=function(){var e=i.props,t=e.computedItem,n=e.latestSubmissionAndRelated,r=e.courseId,a=e.isNewDraft,s=e.partnerId;i.autoSaveDraft.cancel(),i.setState({hasSaved:!0}),i.context.executeAction(Ee.c,{courseId:r,isNewDraft:a,userId:Object(u.b)().id,itemId:t.id,submission:i.handleRichTextDtdConversion(n.submission),assignmentVersion:n.submissionSchema.assignmentVersion,partnerId:s})},i.handleAutoSave=function(){var e=i.props,t=e.computedItem,n=e.latestSubmissionAndRelated,r=e.courseId,a=e.isNewDraft,s=e.partnerId;i.setState({hasSaved:!0}),i.context.executeAction(Ee.a,{courseId:r,isNewDraft:a,userId:Object(u.b)().id,itemId:t.id,submission:i.handleRichTextDtdConversion(n.submission),assignmentVersion:n.submissionSchema.assignmentVersion,partnerId:s})},i.autoSaveDraft=A()(i.handleAutoSave,Tn),i.updateSubmissionPartGenerator=function(e){return function(t){var n=i.props,r=n.latestSubmissionAndRelated,a=n.integrityContext,s=n.triggerFileIntegrityCheck,o=P()(r.submission);if(o.definition.parts[e]=t,i.context.executeAction(Ee.b,{submission:o}),i.autoSaveDraft(),"fileUpload"===t.typeName){a.clearPartResult(e);var c=createIntegrityQuery(w()(w()({},r),{},{submission:o})),d=w()(w()({},c),{},{prompts:c.prompts.filter((function(t){return t.promptId===e}))});if(d.prompts.length>0)s({orderedChecks:integrityStatusHelper_getOrderedChecks(),submission:d})}}},i.blockSubmitPartGenerator=function(e){return function(t){var n=i.state.blockSubmitParts,r=Object.assign({},n);r[e]=t,i.setState({blockSubmitParts:r})}},i.updateSubmissionTitle=function(e){var t=i.props.latestSubmissionAndRelated,n=P()(t.submission);n.definition.title=e,i.context.executeAction(Ee.b,{submission:n})},i.renderPreviewGradingCriteria=function(e,t){var n=i.props.latestSubmissionAndRelated;return(r.createElement(jn,{reviewSchema:n.reviewSchema,partId:e,prompt:t}))},i.state={hasSaved:!1,blockSubmitParts:{},showIntegrityCheckDialog:!1,skipVivaExam:!1},i}i()(PeerItemEditView,e);var t=PeerItemEditView.prototype;return t.componentDidUpdate=function(e){var t=this.props,n=t.submissionAppState,i=t.errorTree,r=i.children,a=i.errors,s=t.integrityContext,o=t.computedItem,c="submitting"===e.submissionAppState.submitState,d="ready"===n.submitState,u=c&&d,l=Object(z.k)(o.courseId,o.id),m=(null==a?void 0:a.length)>=1||Object.values(r).some((function(e){var t;return(null===(t=e.errors)||void 0===t?void 0:t.length)>=1})),b="saving"===e.submissionAppState.saveState,p="ready"===n.saveState;b&&p&&!m?this.getIntegrityStatus():b&&p&&(s.setIsChecking(!1),m&&this.scrollToTop()),u&&l&&!m&&!this.state.skipVivaExam&&this.handleVivaExamStart()},t.render=function(){var e,t=this.props,n=t.naptimeSubmission,i=t.naptimeSubmissionSchema,a=t.errorTree,o=t.computedItem,c=t.submissionAppState,d=t.isVerifiable,u=t.lastSaveTime,l=t.showStaleAssignmentVersionError,m=t.courseId,b=t.latestSubmissionAndRelated,p=t.draftHasLocalChanges,g=t.capabilitiesWithReasons,v=t.latestAttemptSummary,f=t.submissionDeadline,h=t.visibilityTrackingRef,S=o.id,I=this.state,O=I.integrityStatusVariables,w=I.showSubmitDialog,j=I.showIntegrityCheckDialog,k=s.a.contains(s.a.values(this.state.blockSubmitParts),!0),C=b.submission,A=C.versionedAssignmentId,E=C.creatorId,P=null!==(e=null==A?void 0:A.split("@"))&&void 0!==e?e:[],x=y()(P,1)[0];return r.createElement("div",{ref:h,className:"rc-PeerItemEditView"},r.createElement(api_IntegrityStatusAPI,{queryData:O,onDataLoaded:this.handleIntegrityStatusFetched},r.createElement(AssignmentEditView,{submissionAppState:c,errorTree:a,isSubmitted:!1},r.createElement(qt,{showStaleAssignmentVersionError:l,computedItem:o}),r.createElement(ht,{courseId:m,submission:n,submissionSchema:i,errorTree:a,isSubmitted:!1,submissionAppState:c,updateSubmissionTitle:this.updateSubmissionTitle,updateSubmissionPartGenerator:this.updateSubmissionPartGenerator,blockSubmitPartGenerator:this.blockSubmitPartGenerator,renderInlineNode:this.renderPreviewGradingCriteria,itemId:S,versionedAssignmentId:A,creatorId:E,draftHasLocalChanges:p,dtdIdOverride:xn,setSkipVivaExam:this.setSkipVivaExam}),r.createElement(hn,{"data-testid":"PeerItemVerificationSubmission",submissionAppState:c,lastSaveTime:u,handleSave:this.handleSave,handleSubmit:this.handleSubmitButtonClicked,blockSubmit:k,isVerifiable:d,computedItem:o,capabilitiesWithReasons:g,draftHasLocalChanges:p,assignmentId:x,latestAttemptSummary:v,submissionDeadline:f,showV2SubmitModal:w,onV2SubmitModalClose:this.closeSubmitDialog}),r.createElement(Y.a,{courseId:m,assignmentId:null!=A?A:"",showIntegrityCheckDialog:j,setShowIntegrityCheckDialog:this.setShowIntegrityCheckDialog,onVivaExamCompleted:this.handleVivaExamComplete,assignmentType:Q.b.PGA}))))},PeerItemEditView}(r.Component);Nn.contextTypes={executeAction:b.a.func.isRequired};var PeerItemEditView_PeerItemEditViewComponent=function(e,t){var n,i,a=Object(sn.b)(),s=a.isAiGradingFlowPreview,o=a.peerReviewEventingV3Data,c=a.doesSubmissionIncludeUnsupportedFileTypeForAiGrading,d=(n=Object(B.a)(W,{context:{clientName:"gatewayGql"}}),i=y()(n,1)[0],{triggerFileIntegrityCheck:function(e){i({variables:e}).then((function(){})).catch((function(){}))}}).triggerFileIntegrityCheck,u=Object(R.f)("view_page_section",w()({pageSection:{sectionName:"peer_my_project_form"}},o));return r.createElement(IntegrityStatusContextProvider_IntegrityStatusContextProvider,null,r.createElement(G.Consumer,null,(function(n){return r.createElement(Nn,S()({},e,{visibilityTrackingRef:u,eventData:t._eventData,integrityContext:n,isAiGradingTreatmentFlow:s(),doesSubmissionIncludeUnsupportedFileTypeForAiGrading:c,triggerFileIntegrityCheck:d}))})))};PeerItemEditView_PeerItemEditViewComponent.contextTypes={_eventData:b.a.object};var Rn,_n,Dn,Vn=s.a.compose(Object(x.a)((function(e){return{showStaleAssignmentVersionError:!!e.location.query.showStaleAssignmentVersionError}})),Object(T.a)([En.a,An.a,ke.a,je.a,we.a,Cn.a,kn.a],(function(e,t,n,i,r,a,s,o){var c,d,u,l=o.computedItem,m=s.getState().displayablePhaseSchedule,b=a.getState();return{latestSubmissionAndRelated:e.getState().latestSubmissionAndRelated,naptimeSubmission:e.getState().naptimeSubmission,naptimeSubmissionSchema:e.getState().naptimeSubmissionSchema,draftHasLocalChanges:e.getState().hasLocalChanges,submissionAppState:t.getState(),isVerifiable:n.isProductVerificationEnabled()&&l&&Object(Ce.j)(l),courseId:i.getCourseId(),courseSlug:i.getCourseSlug(),capabilitiesWithReasons:b.capabilitiesWithReasons,submissionDeadline:null==m?void 0:null===(c=m.phaseEnds)||void 0===c?void 0:c.submit,latestAttemptSummary:null===(d=b.submissionProgress)||void 0===d?void 0:d.latestAttemptSummary,isNewDraft:!(null!==(u=b.submissionProgress)&&void 0!==u&&u.latestDraftSummary),partnerId:i.getPartnerId()}})),Object(l.a)((function(e){return e.latestSubmissionAndRelated}),r.createElement(Pn.a,{className:"rc-PeerItemEditView"})),Object(N.a)((function(e){return w()(w()({},e),{},{errorTree:e.latestSubmissionAndRelated.errorTree,lastSaveTime:e.latestSubmissionAndRelated.submission&&e.latestSubmissionAndRelated.submission.createdAt})})))(PeerItemEditView_PeerItemEditViewComponent),components_PeerAnonymousReviewNotification=function(e){var t=e.reviews,n=null==t?void 0:t.reviews.reduce((function(e,t){return t.isAnonymous?e+1:e}),0);return 0===n?null:n===(null==t?void 0:t.reviews.length)?r.createElement(Kt.a,null,ct()("Your fellow learners have submitted their reviews anonymously. All names are still visible to course instructors.")):r.createElement(Kt.a,null,ct()("Some of your fellow learners have submitted their reviews anonymously. All names are still visible to course instructors."))},Un=t("qPyB"),Ln=t("FCT0"),Gn=t("7Diq"),Fn=t("YFce"),Mn=t("C2np"),qn=t("o5Sl"),Bn=t("nsyj"),Hn=t("CLNb"),Wn=t("T8wf"),Yn=t("ySha"),ai_grading_AiSubmissionControls=function(e){var t=e.moreAttemptsAvailable,n=e.hasTextRubric,i=e.children;if(!i)return null;var a=ct()("If you're unsatisfied with your scores or feedback, you can start a new attempt for your assignment or switch to have your assignment reviewed by your peers."),s=ct()("If you're unsatisfied with your scores, you can start a new attempt for your assignment or switch to have your assignment graded by your peers."),o=ct()("If you're unsatisfied with your scores or feedback, you can switch to have your assignment reviewed by your peers."),c=ct()("If you're unsatisfied with your scores, you can switch to have your assignment graded by your peers."),d=n?a:s,u=n?o:c;return r.createElement(xe.a,{actions:i,severity:"information"},t?d:u)},Qn=t("fsL8"),zn=t.n(Qn),Jn=t("yXPU"),Xn=t.n(Jn),Zn=t("rzCt"),Kn=t("fguj"),$n=t("lSNA"),ei=t.n($n),ti=t("+GDw"),ni=t("kUlC"),ii=[{key:"1",label:ct()("Your current grades and feedback will be replaced with grades and feedback from your peers.")},{key:"2",label:ct()("You can only receive new AI-generated grades if you start a new attempt on your assignment.")},{key:"3",label:ct()("Your grades and feedback from peers may not be immediately available.")}],ri=[{key:"EXPECTED_HIGHER_SCORE",label:ct()("I believe I can get a higher score from my peers")},{key:"INCORRECT_GRADING",label:ct()("I think my assignment grade was inaccurate")},{key:"USELESS_FEEDBACK",label:ct()("I didn't find the feedback helpful")},{key:"PREFER_HUMAN_GRADING",label:ct()("I'd like to see how my peers assess my work")},{key:"OTHER",label:ct()("Other")}],ai={checkboxFix:function(){return Object(ce.c)(Rn||(Rn=M()(["\n    label {\n      margin-bottom: 0;\n    }\n  "])))}},ai_grading_RegradeTermsCheck=function(e){var t=e.onChange,n=e.validationErrorLabel,i=e.inputRef,a=Object(r.useState)(ii.reduce((function(e,t){return w()(w()({},e),{},ei()({},"".concat(t.key),!1))}),{})),s=y()(a,2),o=s[0],c=s[1];return Object(ce.d)(ti.a,{label:ct()("By switching to peer grading, you acknowledge that:"),onChange:function(e,n){if(void 0!==o[e.target.value]){var i=w()(w()({},o),{},ei()({},e.target.value,n));c(i);var r=-1===Object.values(i).findIndex((function(e){return!1===e}));t(r)}},css:ai.checkboxFix,necessityIndicator:"icon",validationStatus:n?"error":void 0,validationLabel:n},ii.map((function(e,t){return Object(ce.d)(ni.a,{label:e.label,value:e.key,key:e.key,checked:!0,inputRef:0===t?i:void 0})})))},si=t("pZLH"),oi=t("agHs"),ci=t("8mmq"),di=t.n(ci),ai_grading_useRequestGradingByPeer=function(){var e=Object(si.a)(di.a,{context:{clientName:"gatewayGql"}}),t=y()(e,2),n=t[0],i=t[1];return{requestGradingByPeer:function(){var e=Xn()(zn()().mark((function _callee(e){var t;return zn()().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,n({variables:{input:e}});case 3:return t=i.sent,i.abrupt("return",t);case 7:return i.prev=7,i.t0=i.catch(0),oi.captureException(i.t0),i.abrupt("return",null);case 11:case"end":return i.stop()}}),_callee,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),requestGradingByPeerState:i}},ui={cancelButton:function(){return Object(ce.c)(_n||(_n=M()(["\n    margin: 0 var(--cds-spacing-300);\n  "])))},error:function(){return Object(ce.c)(Dn||(Dn=M()(["\n    margin-top: var(--cds-spacing-300);\n  "])))}},ai_grading_RegradeDialog=function(e){var t=e.courseId,n=e.submissionId,i=e.itemId,a=e.onClose,s=e.onSuccess,o=dn.a.HeadingGroup,c=dn.a.Content,d=dn.a.Actions,u=Object(r.useState)(!1),l=y()(u,2),m=l[0],b=l[1],p=Object(r.useRef)(null),g=Object(r.useMemo)((function(){return m?"":ct()("All checkboxes are required.")}),[m]),v=Object(r.useState)(),f=y()(v,2),h=f[0],S=f[1],I=Object(r.useRef)(null),O=Object(r.useMemo)((function(){return h?"":ct()("This field is required.")}),[h]),w=Object(r.useState)(),j=y()(w,2),k=j[0],C=j[1],A=Object(r.useRef)(null),E=Object(r.useMemo)((function(){return k?"":ct()("This field is required.")}),[k]),P=Object(r.useState)(!1),x=y()(P,2),T=x[0],N=x[1],R=ai_grading_useRequestGradingByPeer(),D=R.requestGradingByPeer,V=R.requestGradingByPeerState,U=function(){var e=Xn()(zn()().mark((function _callee(){var e,r,a,o,c,d;return zn()().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if(!(g||O||E)){u.next=4;break}return g?null===(r=p.current)||void 0===r||r.focus():O?null===(a=I.current)||void 0===a||a.focus():E&&(null===(o=A.current)||void 0===o||o.focus()),N(!0),u.abrupt("return");case 4:return c="".concat(h,"|").concat(k),u.next=7,D({courseId:t,itemId:i,submissionId:n,reason:c});case 7:null!=(d=u.sent)&&null!==(e=d.data)&&void 0!==e&&e.PeerReviewAi_RequestGradingByPeer.submissionId&&s();case 9:case"end":return u.stop()}}),_callee)})));return function(){return e.apply(this,arguments)}}();return Object(ce.d)(dn.a,{"aria-describedby":"request-human-grading-dialog",open:!0,variant:"transactional",onClose:a,sticky:"actions"},Object(ce.d)(o,null,ct()("Switch to peer grading?")),Object(ce.d)(c,{id:"request-human-grading-dialog"},Object(ce.d)(en.a,{container:!0,spacing:24},Object(ce.d)(en.a,{item:!0,xs:12},Object(ce.d)(ai_grading_RegradeTermsCheck,{onChange:b,inputRef:p,validationErrorLabel:T?g:void 0})),Object(ce.d)(en.a,{item:!0,xs:12},Object(ce.d)(Zn.a,{label:ct()("Why are you switching to peer grading?"),placeholder:ct()("Select an option"),fullWidth:!0,onChange:function(e){S(e.target.value)},validationStatus:T&&O?"error":void 0,validationLabel:O,necessityIndicator:"icon",ref:I},ri.map((function(e){return Object(ce.d)(Kn.a,{value:e.key,key:e.key},e.label)})))),Object(ce.d)(en.a,{item:!0,xs:12},Object(ce.d)(Pe.a,{label:ct()("Tell us more"),placeholder:ct()("Enter text here"),value:k||"",onChange:function(e){return C(e.target.value)},validationStatus:T&&E?"error":void 0,validationLabel:E,maxLength:250,fullWidth:!0,multiline:!0,necessityIndicator:"icon",inputRef:A}))),V.error&&Object(ce.d)(xe.a,{severity:"error",title:ct()("Error"),css:ui.error,onDismiss:function(){return V.reset()}},ct()("Something went wrong while submitting your request. Please try again."))),Object(ce.d)(d,null,Object(ce.d)(De.a,{disabled:V.loading,onClick:U},ct()("Continue")),Object(ce.d)(De.a,{variant:"secondary",onClick:a,css:ui.cancelButton},ct()("Cancel"))))},RegradeButton_RegradeButton=function(e,t){var n=e.courseId,i=e.courseSlug,a=e.submissionId,s=e.itemId,o=e.disabled,c=Object(r.useState)(!1),d=y()(c,2),l=d[0],m=d[1],handleClose=function(){return m(!1)};return r.createElement(r.Fragment,null,l&&r.createElement(ai_grading_RegradeDialog,{courseId:n,itemId:s,submissionId:a,onClose:handleClose,onSuccess:function(){handleClose(),t.executeAction(Ae.d,{itemId:s,userId:Object(u.b)().id,courseId:n,courseSlug:i})}}),r.createElement(De.a,{variant:"ghost",size:"small",onClick:function(){return m(!0)},disabled:o,"data-testid":"to-peer-grading-btn"},ct()("Switch to peer grading")))};RegradeButton_RegradeButton.contextTypes={executeAction:b.a.func.isRequired};var li,mi=RegradeButton_RegradeButton,bi=(t("TSlG"),Object(St.b)(Object(o.a)(["PeerViewSubmissionStore","PeerPermissionsAndProgressesStore","ProgressStore"],(function(e,t){var n,i,r=e.PeerViewSubmissionStore,a=e.PeerPermissionsAndProgressesStore,s=e.ProgressStore,o=r.getState().submissionAndRelated,c=r.getState().reviewSubmissionState,d="loaded"===r.getState().loadState;d&&null!=c&&(i=c.backboneReviews);var u=a.getState().receivedReviewProgresses,l=u&&u.evaluationIfReady?{typeName:"structured",definition:u.evaluationIfReady.aggregatedReviewsSummary}:null,m=s.courseProgress.getItemProgress(t.computedItem.id),b=new Fn.a(t.itemMetadata,m),p=r.getState().submissionId,g=o&&o.reviewSchema,v=Object.values((null==g?void 0:g.definition.parts)||{}).findIndex((function(e){return"multiLineInput"===e.typeName}))>-1;return{submission:r.getState().naptimeSubmission,submissionId:p,reviews:i,reviewSchema:g,hasTextRubric:v,submissionSchema:r.getState().naptimeSubmissionSchema,reviewsSummary:l,gaveRequiredReviews:0===b.remainingReviewCount(),submittedForAiGrading:void 0!==p&&"AI"===(null===(n=r.getState().submissionAndRelated)||void 0===n?void 0:n.submission.gradingType),isPeerViewSubmissionStoreLoaded:d,isFailed:b.isFailed(),isEvaluated:b.isEvaluated(),versionedAssignmentId:o&&o.submission.versionedAssignmentId}})),Object(l.a)((function(e){return e.isPeerViewSubmissionStoreLoaded}),r.createElement(Pn.a,{className:"rc-PeerSubmissionWithReviewsBody"})))((function(e){var t,n=e.courseId,i=e.courseSlug,a=e.reviews,o=e.reviewSchema,c=e.reviewsSummary,d=e.computedItem,u=e.gaveRequiredReviews,l=e.isFailed,m=e.isEvaluated,b=e.submission,p=e.submissionId,g=e.submissionSchema,v=e.isResubmissionDisabled,f=e.submittedForAiGrading,h=e.versionedAssignmentId,S=e.hasTextRubric,I=Object(sn.b)().peerReviewEventingV3Data,y=Object(z.k)(d.courseId,d.id),O="peer"!==d.contentSummary.typeName,j=Object(r.useMemo)((function(){return!!a&&a.length>0&&(m||!O)}),[m,O,a]),k=Object(r.useMemo)((function(){return!(!u&&!l)&&(!(d.isGraded&&!Object(Ce.G)(d))&&j)}),[d,u,l,j]),C=Object(r.useCallback)((function(e){return 0!==(null!=o?s()(o.definition.parts).filter((function(t){return t.submissionSchemaPartId===e})):[]).length&&k}),[o,k]),A=Object(R.f)("view_page_section",w()(w()({pageSection:{sectionName:k?"peer_my_project_graded":"peer_my_project_submitted"}},I),{},{peerReview:w()(w()({},I.peerReview),{},{isSubmittedForAiGraded:f})})),E=u&&j,P=Object(Sn.a)(o),x=null!==(t=d.isReadOnlyAfterSessionEnd)&&void 0!==t&&t;return r.createElement("div",{ref:A,className:"rc-PeerSubmissionWithReviewsBody"},r.createElement(Yn.a,{isAIGraded:f,courseId:n,itemId:d.id,submissionId:p},C()&&r.createElement(Wn.a,{fullWidth:!0},r.createElement(Hn.a,null,r.createElement(Gn.a,{reviewSchema:P,reviewsSummary:c,reviews:a,submissionSchemaPartId:null,submissionId:p,isAIGraded:f,enableTranslation:!0,courseId:n,isAssignmentLevelParts:!0}))),!(!g||!b)&&g.parts.map((function(e){return r.createElement(Wn.a,{key:e.id},r.createElement(Bn.a,{submissionSchemaPart:e,submissionPart:b.parts[e.id]}),C(e.id)&&r.createElement(Hn.a,null,r.createElement(Gn.a,{reviewSchema:P,reviewsSummary:c,reviews:a,submissionSchemaPartId:e.id,submissionId:p,isAIGraded:f,enableTranslation:!0,courseId:n})))})),y&&h&&r.createElement(Ln.a,{assignmentId:h,assignmentType:Q.b.PGA,courseId:n}),f&&(E||l)?r.createElement(ai_grading_AiSubmissionControls,{moreAttemptsAvailable:!!p&&!v,hasTextRubric:S},!!p&&!v&&r.createElement(qn.a,{computedItem:d,buttonMessage:ct()("Start new attempt")}),r.createElement(mi,{courseId:n,courseSlug:i,submissionId:p||"",itemId:d.id,disabled:x})):!!p&&!v&&r.createElement(en.a,{container:!0,justifyContent:"flex-end"},r.createElement(qn.a,{computedItem:d,buttonMessage:ct()("Start new attempt")})),null!=p&&r.createElement(Mn.a,{computedItem:d,courseId:n,submissionId:p})))}))),pi=t("zxx9"),gi=(t("kljU"),Object(St.b)(Object(o.a)(["PeerViewSubmissionStore","CourseStore","SessionStore","PeerPermissionsAndProgressesStore"],(function(e){var t,n,i,r,a,s,o,c=e.PeerViewSubmissionStore,d=e.CourseStore,u=e.SessionStore,l=e.PeerPermissionsAndProgressesStore,m=c.getState().submissionAndRelated;return m&&(o=m.submission.definition.title,s=m.submission.id,a=m.submission.createdAt),{title:o,submissionId:s,lastSaveTime:a,reviews:null===(t=c.getState())||void 0===t?void 0:null===(n=t.reviewSubmissionState)||void 0===n?void 0:n.reviews,courseId:d.getCourseId(),courseSlug:d.getCourseSlug(),courseBranchId:u.getBranchId()||d.getCourseId(),isAnonymousPeerReviewEnabled:(null===(i=l.getState().capabilitiesWithReasons)||void 0===i?void 0:null===(r=i.anonymousPeerReview)||void 0===r?void 0:r.isAllowed)||!1}})),Object(l.a)((function(e){return e.submissionId})),d.b.createTrackedContainer((function(){return{namespace:{page:"peer_review_my_project_review"}}})))((function(e){var t=e.lastSaveTime,n=e.computedItem,i=e.itemMetadata,a=e.title,s=e.submissionId,o=(e.courseBranchId,e.courseId),c=e.courseSlug,d=e.isResubmissionDisabled,u=e.reviews,l=e.isAnonymousPeerReviewEnabled;return(r.createElement("div",{className:"rc-PeerItemSubmittedView rc-AssignmentSubmit"},r.createElement(components_PeerAnonymousReviewNotification,{reviews:u}),r.createElement(pi.a,{title:a,createdAt:t,shareableLink:l?void 0:r.createElement(Un.a,{computedItem:n,submissionId:s})}),r.createElement(bi,{courseId:o,courseSlug:c,computedItem:n,itemMetadata:i,isResubmissionDisabled:d})))}))),vi=function(e){function PeerItemSubmit(){return e.apply(this,arguments)||this}return i()(PeerItemSubmit,e),PeerItemSubmit.prototype.render=function(){var e=this.props,t=e.isSubmitted,n=e.latestSubmissionId,i=e.computedItem,a=e.loadedPeerViewSubmissionId,s=e.isResubmissionDisabled,o=e.itemMetadata,c=a!==n;return r.createElement(v,{isSubmitted:t,editView:r.createElement(Vn,{computedItem:i}),submittedView:c?li||(li=r.createElement(Pn.a,{className:"rc-PeerItemSubmit"})):r.createElement(gi,{computedItem:i,itemMetadata:o,isResubmissionDisabled:s})})},PeerItemSubmit}(r.Component),fi=s.a.compose(d.b.createTrackedContainer((function(){return{namespace:{page:"peer_review_my_project"}}})),Object(o.a)(["CourseStore","PeerViewSubmissionStore","PeerPermissionsAndProgressesStore"],(function(e){var t=e.CourseStore,n=e.PeerViewSubmissionStore,i=e.PeerPermissionsAndProgressesStore;return{isPeerProgressesLoaded:"loaded"===i.getState().loadState,loadedPeerViewSubmissionId:n.getState().submissionId,isSubmitted:i.getState().isSubmitted,latestSubmissionId:i.getState().latestSubmissionId,courseId:t.getCourseId()}})),Object(l.a)((function(e){return e.isPeerProgressesLoaded}),r.createElement(Pn.a,{className:"rc-PeerItemSubmit"})),Object(c.a)((function(e,t){var n=t.computedItem,i=t.courseId,r=t.isSubmitted,a=t.latestSubmissionId,s=t.loadedPeerViewSubmissionId;r&&a&&(s!==a&&e.executeAction(f.d,{userId:Object(u.b)().id,courseId:i,itemId:n.id,submissionId:a}))})))(vi);e.default=fi},"4uky":function(module,e,t){"use strict";var n=t("q1tI"),i=t("EqTq"),r=(t("QUzv"),Object(i.a)("PeerAnonymousNotification"));e.a=function(e){var t=e.children;return(n.createElement("div",{className:r()},t))}},"7Diq":function(module,e,t){"use strict";var n,i=t("VbXa"),r=t.n(i),a=t("VkAN"),s=t.n(a),o=t("OhL7"),c=t("q1tI"),d=t("l1rq"),u=t("+KAk"),l=(t("X129"),function(e){var t=e.reviewSchemaPart,n=Object(u.a)(t.get("typeName")).DisplayPart;return c.createElement("div",{className:"rc-DisplayPart"},c.createElement(n,e))}),m=t("qC2T"),b=t.n(m),p=(t("WS07"),{prompt:function(){return Object(o.c)(n||(n=s()(["\n    text-transform: uppercase;\n  "])))}}),g=function(e){function DisplayParts(){return e.apply(this,arguments)||this}return r()(DisplayParts,e),DisplayParts.prototype.render=function(){var e=this.props,t=e.reviewSchema,n=e.reviewsSummary,i=e.reviews,r=e.submissionSchemaPartId,a=e.submissionId,s=e.assignmentLevelPointsLabel,c=e.isAssignmentLevelParts,u=e.isAIGraded,m=e.enableTranslation,g=e.courseId,v=t.getPartsForSubmissionSchemaPart(r);return 0===v.length?null:Object(o.d)("div",{className:"rc-DisplayParts bgcolor-white"},Object(o.d)("div",{className:"title horizontal-box align-items-spacebetween"},Object(o.d)(d.a,{"data-testid":"display-parts-title",component:"h3",variant:"subtitleMedium",css:p.prompt},null!=r?b()("Rubric"):b()("Overall Assignment Rubric")),Object(o.d)("span",null,null===r&&s)),Object(o.d)("div",{className:"body-1-text"},v.map((function(e){return Object(o.d)(l,{key:e.get("id"),reviewSchemaPart:e,reviewsSummary:n,reviews:i,submissionId:a,isAIGraded:u,isAssignmentLevelPart:c,enableTranslation:m,courseId:g})}))))},DisplayParts}(c.Component);e.a=g},"8mmq":function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"RequestGradingByPeer"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"input"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"PeerReviewAi_RequestGradingByPeerInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"PeerReviewAi_RequestGradingByPeer"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"Variable",name:{kind:"Name",value:"input"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"submissionId"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:157}};e.loc.source={body:"mutation RequestGradingByPeer($input: PeerReviewAi_RequestGradingByPeerInput!) {\n  PeerReviewAi_RequestGradingByPeer(input: $input) {\n    submissionId\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function findOperation(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}e.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,t)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,t)}))}(e,n),t[e.name.value]=n}})),module.exports=e,module.exports.RequestGradingByPeer=function(e,n){var i={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=t[n]||new Set,a=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var o=s;s=new Set,o.forEach((function(e){a.has(e)||(a.add(e),(t[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var n=findOperation(e,t);n&&i.definitions.push(n)})),i}(e,"RequestGradingByPeer")},"9ZYf":function(module,exports,e){},AOca:function(module,exports,e){e("Qo1F")},C2np:function(module,e,t){"use strict";var n,i,r,a,s,o,c,d,u,l,m,b=t("q1tI"),p=t("lSNA"),g=t.n(p),v=t("3tO9"),f=t.n(v),h=t("VbXa"),S=t.n(h),I=t("VkAN"),y=t.n(I),O=t("OhL7"),w=t("17x9"),j=t.n(w),k=t("HOoY"),C=t("sQ/U"),A=t("l1rq"),E=t("fw5G"),P=t.n(E),x=t("S+eF"),T=t.n(x),N=t("v6sC"),R=Object(N.a)("/api/onDemandPeerComments.v1",{type:"rest"}),D=["comment","attachedAssignmentId","creatorId","createdAt","peerSubmissionId","".concat("onDemandSocialProfiles.v1","(userId,externalUserId,fullName,photoUrl,courseRole,isAnonymous)")],onDemandPeerCommentsApi_getComments=function(e){var t=e.userId,n=e.courseId,i=e.itemId,r=e.submissionId,a=(new P.a).addQueryParam("q","submission").addQueryParam("userId",t.toString()).addQueryParam("peerSubmissionId","".concat(n,"~").concat(i,"~").concat(r)).addQueryParam("fields",D.join(",")).addQueryParam("includes","profiles");return T()(R.get(a.toString())).then((function(e){return{comments:e.elements,userProfiles:e.linked["onDemandSocialProfiles.v1"]}}))},onDemandPeerCommentsApi_submitComment=function(e){var t=e.courseId,n=e.itemId,i=e.submissionId,r=e.comment,a=(new P.a).addQueryParam("fields",D.join(",")).addQueryParam("includes","profiles");return T()(R.post(a.toString(),{data:{comment:r,peerSubmissionId:"".concat(t,"~").concat(n,"~").concat(i)}})).then((function(e){return{comments:e.elements,userProfiles:e.linked["onDemandSocialProfiles.v1"]}}))},V=t("wd/R"),U=t.n(V),L=t("ca6j"),G=t("jJyI"),F=t("yhVA"),M=t.n(F),q={container:function(){return Object(O.c)(n||(n=y()(["\n    display: flex;\n    padding: var(--cds-spacing-150) 0;\n    margin-top: var(--cds-spacing-50);\n  "])))},profileImage:function(){return Object(O.c)(i||(i=y()(["\n    margin-right: var(--cds-spacing-150);\n  "])))},commentContainer:function(){return Object(O.c)(r||(r=y()(["\n    width: 100%;\n  "])))},nameAndTimeContainer:function(){return Object(O.c)(a||(a=y()(["\n    display: flex;\n    justify-content: space-between;\n    margin-top: var(--cds-spacing-50);\n    margin-bottom: var(--cds-spacing-150);\n  "])))}},comments_CommentRow=function(e){var t=e.commentData,n=t.creator,i=t.comment,r=e.courseId;return Object(O.d)("div",{css:q.container,"data-testid":"peer-comment-row"},Object(O.d)("div",{css:q.profileImage},Object(O.d)(L.a,{profile:n})),Object(O.d)("div",{css:q.commentContainer},Object(O.d)("div",{css:q.nameAndTimeContainer},Object(O.d)(A.a,{className:"pii-hide",variant:"subtitleMedium",component:"strong","data-testid":"peer-comment-full-name"},n.isAnonymous?M()("Anonymous Learner"):n.fullName),Object(O.d)(A.a,{component:"div",variant:"bodySecondary",color:"supportText"},U()(i.createdAt).fromNow())),Object(O.d)(A.a,{component:"div",variant:"bodyPrimary","data-testid":"peer-comment-content"},Object(O.d)(G.a,{content:i.comment.definition.comment,courseId:r,eventingSectionName:"peer_comment"}))))},B=t("dhC9"),H=t("ZJgU"),W={container:function(){return Object(O.c)(s||(s=y()(["\n    display: flex;\n  "])))},profileImage:function(){return Object(O.c)(o||(o=y()(["\n    margin-right: var(--cds-spacing-150);\n  "])))},inputContainer:function(){return Object(O.c)(c||(c=y()(["\n    width: 100%;\n  "])))},input:function(){return Object(O.c)(d||(d=y()(["\n    label {\n      display: none;\n    }\n\n    div {\n      margin-top: 0 !important;\n    }\n  "])))},buttonContainer:function(){return Object(O.c)(u||(u=y()(["\n    display: flex;\n    flex-direction: row-reverse;\n    margin-top: var(--cds-spacing-150);\n  "])))}},Y=function(e){function CommentTextArea(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={posting:!1},t.onChange=function(e){var n=e.target.value;t.setState({comment:n})},t.onPostClick=function(){var e=t.props.onPostingComment,n=t.state.comment;n&&(t.setState({posting:!0}),e(n).then((function(){t.setState({comment:"",posting:!1})})))},t}return S()(CommentTextArea,e),CommentTextArea.prototype.render=function(){var e=this.props,t=e.submissionId,n=e.isReadOnly,i=this.state,r=i.comment,a=i.posting,s=null!=n&&n;return Object(O.d)("div",{css:W.container},Object(O.d)("div",{className:"pii-hide",css:W.profileImage},Object(O.d)(L.a,{profile:{photoUrl:Object(C.b)().photo_120,fullName:Object(C.b)().fullName}})),Object(O.d)("div",{css:W.inputContainer},Object(O.d)(B.a,{fullWidth:!0,multiline:!0,label:M()("Enter Peer Review comments"),value:r,id:"".concat(t,"~comment"),placeholder:M()("Share your thoughts..."),onChange:this.onChange,disabled:a||s,maxRows:3,css:W.input}),r&&Object(O.d)("div",{css:W.buttonContainer},Object(O.d)(H.a,{variant:"secondary",size:"small",onClick:this.onPostClick,loading:a},M()("Post")))))},CommentTextArea}(b.Component),Q={LOADING:"LOADING",LOAD_ERROR:"LOAD_ERROR",SUBMITING:"SUBMITING",SUBMIT_ERROR:"SUBMIT_ERROR",READY:"READY"},z={container:function(){return Object(O.c)(l||(l=y()(["\n    padding: 0 var(--cds-spacing-50);\n  "])))},inputContainer:function(){return Object(O.c)(m||(m=y()(["\n    margin-top: var(--cds-spacing-150);\n  "])))}},J=function(e){function CommentsContainer(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={commentRowData:[],networkState:Q.READY},t.onCommentFetchSuccess=function(e){var n=e.comments,i=e.userProfiles.reduce((function(e,t){return f()(f()({},e),{},g()({},t.userId,t))}),{});t.setState({commentRowData:n.map((function(e){return{comment:e,creator:i[e.creatorId]}})),networkState:Q.READY})},t.onPostingComment=function(e){var n=t.props,i=n.courseId,r=n.itemId,a=n.submissionId,s=t.context._eventData;return t.setState({networkState:Q.SUBMITING}),onDemandPeerCommentsApi_submitComment({comment:{typeName:"plain",definition:{comment:e}},courseId:i,itemId:r,submissionId:a}).then((function(){k.a.trackComponent(s,{comment_user_id:Object(C.b)().id,comment:e},"click","post")})).catch((function(){t.setState({networkState:Q.SUBMIT_ERROR})})).then(t.fetchComments)},t.fetchComments=function(){var e=t.props,n=e.courseId,i=e.itemId,r=e.submissionId;return onDemandPeerCommentsApi_getComments({userId:Object(C.b)().id,courseId:n,itemId:i,submissionId:r}).then(t.onCommentFetchSuccess).catch((function(){t.setState({networkState:Q.LOAD_ERROR})}))},t}S()(CommentsContainer,e);var t=CommentsContainer.prototype;return t.componentDidMount=function(){this.setState({networkState:Q.LOADING}),this.fetchComments()},t.componentDidUpdate=function(e){var t=this.props,n=t.courseId,i=t.itemId,r=t.submissionId;e.courseId===n&&e.itemId===i&&e.submissionId===r||this.fetchComments()},t.render=function(){var e=this.props,t=e.courseId,n=e.submissionId,i=e.isReadOnly,r=this.state,a=r.commentRowData,s=r.networkState;return Object(O.d)("div",{css:z.container,"data-testid":"peer-comments-section"},s!==Q.READY&&Object(O.d)("p",null,function(e){return{LOADING:M()("Loading..."),LOAD_ERROR:M()("Load error!"),SUBMITING:M()("Submitting..."),SUBMIT_ERROR:M()("Submit error!")}[e]}(s)),Object(O.d)(A.a,{component:"h3",variant:"subtitleMedium"},M()("Comments")),Object(O.d)(A.a,{component:"p",variant:"bodySecondary","data-testid":"peer-comments-caption-text"},M()("Comments left for the learner are visible only to that learner and the person who left the comment.")),Object(O.d)("div",{css:z.inputContainer},Object(O.d)(Y,{submissionId:n,onPostingComment:this.onPostingComment,isReadOnly:i})),Object(O.d)("div",null,a.map((function(e){return Object(O.d)(comments_CommentRow,{commentData:e,courseId:t,key:"".concat(e.comment.createdAt,"~").concat(e.comment.creatorId)})}))))},CommentsContainer}(b.Component);J.contextTypes={_eventData:j.a.object};var X=J;t("c82m"),t("AOca"),e.a=function(e){var t,n=e.computedItem,i=e.submissionId,r=e.courseId,a=null!==(t=n.isReadOnlyAfterSessionEnd)&&void 0!==t&&t;return b.createElement("div",{className:"rc-CommentsSection card-rich-interaction cozy"},b.createElement(X,{courseId:r,itemId:n.id,submissionId:i,isReadOnly:a}))}},CLNb:function(module,e,t){"use strict";var n,i=t("VkAN"),r=t.n(i),a=t("OhL7"),s=(t("q1tI"),t("FdHa")),o=t("yhVA"),c=t.n(o),d={container:function(){return Object(a.c)(n||(n=r()(["\n    border-left: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n    height: 100%;\n    min-height: 100%;\n    flex: 1 1 0px;\n\n    .title {\n      margin-bottom: var(--cds-spacing-300);\n    }\n\n    "," {\n      display: block;\n      border-left: 0;\n      border-bottom: 1px solid var(--cds-color-neutral-stroke-primary-weak);\n    }\n  "])),s.a.down("sm"))}};e.a=function(e){var t=e.children,n=e.ariaLabel;return t?Object(a.d)("div",{className:"rc-SubmissionViewCell",role:"region",css:d.container,"aria-label":n&&c()("Review prompt: #{ariaLabel}",{ariaLabel:n}),tabIndex:n?0:void 0},t):null}},EGbX:function(module,exports,e){},FCT0:function(module,e,t){"use strict";var n,i,r,a=t("J4zp"),s=t.n(a),o=t("VkAN"),c=t.n(o),d=t("OhL7"),u=t("q1tI"),l=t("sQ/U"),m=t("nNSt"),b=t("kvW3"),p=t("l1rq"),g=t("ZJgU"),v=t("mHyk"),f=t("HXet"),h=t.n(f),S={root:Object(d.c)(n||(n=c()(["\n    margin-bottom: var(--cds-spacing-300);\n    margin-top: var(--cds-spacing-300);\n  "]))),linkButton:Object(d.c)(i||(i=c()(["\n    background: none;\n    padding: 0;\n    color: var(--cds-color-interactive-primary);\n    text-decoration: underline;\n    margin-bottom: var(--cds-spacing-50);\n  "])))},viva_exam_VivaExamSubmissionNotification=function(e){var t=e.setShowIntegrityCheckSubmission,n=e.isIncompleteSubmission,i=e.assignmentId,r=e.courseId,a=Object(v.e)(),s=i.split("@")[0];return Object(d.d)("div",null,n?Object(d.d)(m.a,{severity:"information",css:S.root},Object(d.d)(p.a,{variant:"bodyPrimary",component:"div"},h()("You did not complete the Integrity Check for this submission."))):Object(d.d)(m.a,{severity:"information",css:S.root},Object(d.d)(b.b,{message:h()("You completed the Integrity Check for this submission. {viewIncidentDetails}"),viewIncidentDetails:Object(d.d)(g.a,{variant:"ghost",css:S.linkButton,onClick:function(){a("click_button",{button:{name:"integrity_check_view_previous_submission"},assignment:{id:s},product:{type:"course",id:r}}),t(!0)}},h()("View Integrity Check"))})))},I=t("R7/4"),y=t("MW9T"),O=t("I8ZN"),w={error:Object(d.c)(r||(r=c()(["\n    margin-top: var(--cds-spacing-200);\n  "])))};e.a=function(e){var t,n=e.assignmentId,i=e.assignmentType,r=e.courseId,a=Object(u.useState)(!1),o=s()(a,2),c=o[0],b=o[1],p=null===(t=Object(l.b)())||void 0===t?void 0:t.id,g=Object(I.a)(n,p,i===O.b.PGA?O.b.PGA:O.b.SGA),v=g.vivaExamQuestions,f=g.errorFromLatestSubmissionData,S=null==v?void 0:v.examSession.totalExpectedQuestions,j=null==v?void 0:v.examSession.isComplete;return Object(d.d)(u.Fragment,null,null!==v&&void 0!==j&&Object(d.d)(viva_exam_VivaExamSubmissionNotification,{setShowIntegrityCheckSubmission:b,isIncompleteSubmission:!j,assignmentId:n,courseId:r}),c&&S&&Object(d.d)(y.a,{onDismiss:function(){return b(!1)},totalQuestionsCount:S,vivaExamQuestions:v}),f&&Object(d.d)(m.a,{severity:"error",css:w.error},h()("There was an issue with retrieving Integrity Check submission data. Please try again later.")))}},IbxQ:function(module,e,t){"use strict";t.d(e,"a",(function(){return useHtmlToCml}));var n=t("q1tI"),i=t("aNDK"),useHtmlToCml=function(e,t){var r,a,s,o=Object(n.useMemo)((function(){return new i.a}),[]);return"html"===(null==e?void 0:e.typeName)?s=o.toCML(e.definition,!0,!0):"Submission_HtmlContent"===(null==e?void 0:e.__typename)&&(s=o.toCML(e.value,!0,!0)),{cmlContent:{typeName:"cml",definition:{dtdId:t||(null==e?void 0:e.dtdId)||(null==e?void 0:null===(r=e.definition)||void 0===r?void 0:r.dtdId)||"assess/1",value:s||(null==e?void 0:e.cmlValue)||(null==e?void 0:null===(a=e.definition)||void 0===a?void 0:a.value)}}}}},Jexy:function(module,e,t){"use strict";var n,i,r,a,s,o,c=t("J4zp"),d=t.n(c),u=t("OhL7"),l=t("q1tI"),m=t("pZLH"),b=t("VkAN"),p=t.n(b),g=t("FdHa"),v=t("7NTc"),f=t("l1rq"),h=t("ZJgU"),S=t("ALLZ"),I=t("mHyk"),y=t("HXet"),O=t.n(y),w={list:Object(u.c)(n||(n=p()(["\n    margin: var(--cds-spacing-200) 0 var(--cds-spacing-600) 0;\n    padding: 0;\n  "]))),listItem:Object(u.c)(i||(i=p()(["\n    margin: 0 0 var(--cds-spacing-100) var(--cds-spacing-100);\n    padding: 0;\n    list-style-position: inside;\n  "]))),errorIcon:Object(u.c)(r||(r=p()(["\n    position: absolute;\n    left: 0;\n    top: 2;\n    margin-right: var(--cds-spacing-150);\n  "]))),buttons:Object(u.c)(a||(a=p()(["\n    margin-top: var(--cds-spacing-200);\n    "," {\n      display: flex;\n      flex-direction: column;\n      align-items: flex-start;\n    }\n  "])),g.a.down("xs")),button:Object(u.c)(s||(s=p()(["\n    margin-right: var(--cds-spacing-300);\n    margin-bottom: var(--cds-spacing-200);\n  "])))},viva_exam_IntegrityCheckDialog=function(e){var t=e.open,n=e.setShowIntegrityCheckDialog,i=e.setShowIntegrityCheckChat,r=e.assignmentId,a=e.courseId,s=v.a.HeadingGroup,c=v.a.Content,d=v.a.Actions,l=Object(I.e)();return Object(u.d)(v.a,{"aria-labelledby":"dialog-heading","aria-describedby":"dialog-content",open:t,variant:"transactional",role:"alertdialog",renderInPlace:!0,"data-testid":"integrity-check-dialog"},Object(u.d)(s,null,O()("Great job! Continue to Integrity Check.")),Object(u.d)(c,null,Object(u.d)(f.a,{variant:"bodyPrimary",component:"div"},O()("Next up is Integrity Check, an AI-moderated Q&A where you'll discuss your submission further by answering 5 questions. Integrity Check isn’t timed or graded but your answers will help show graders your work is your own."))),Object(u.d)(d,null,Object(u.d)("div",{css:w.buttons},Object(u.d)(h.a,{css:w.button,variant:"primary",onClick:function(){l("click_button",{button:{name:"start_integrity_check"},assignment:{id:r},product:{type:"course",id:a}}),n(!1),i(!0)},icon:o||(o=Object(u.d)(S.a,{size:"medium"}))},O()("Start Integrity Check")))))},j=t("PcyD"),k=t.n(j),C=t("MW9T"),A=t("I8ZN");e.a=function(e){var t=e.courseId,n=e.assignmentId,i=e.onVivaExamCompleted,r=e.showIntegrityCheckDialog,a=e.setShowIntegrityCheckDialog,s=e.assignmentType,o=e.refetchAssignmentSubmissionData,c=e.vivaExamSettings,b=Object(l.useState)(!1),p=d()(b,2),g=p[0],v=p[1],f=Object(l.useState)(0),h=d()(f,2),S=h[0],I=h[1],y=Object(l.useState)(null),O=d()(y,2),w=O[0],j=O[1],E=Object(l.useState)(null),P=d()(E,2),x=P[0],T=P[1],N=Object(l.useState)(!1),R=d()(N,2),D=R[0],V=R[1],U=Object(m.a)(k.a,{context:{clientName:"gatewayGql"}}),L=d()(U,2),G=L[0],F=L[1],M=F.loading,q=F.called;Object(l.useEffect)((function(){r&&!q&&function handleStartExam(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;G({variables:{courseId:t,assignmentId:n,assignmentType:s===A.b.PGA?A.b.PGA:A.b.SGA}}).then((function(t){var n,i,r=t.data;if("VivaExam_StartExamSuccess"===(null==r?void 0:null===(n=r.VivaExam_StartExam)||void 0===n?void 0:n.__typename)){var a=r.VivaExam_StartExam.examSession.questions[0].question;T(r.VivaExam_StartExam.examSession.id),j(a),I(r.VivaExam_StartExam.examSession.totalExpectedQuestions)}else if("VivaExam_StartExamFailure"===(null==r?void 0:null===(i=r.VivaExam_StartExam)||void 0===i?void 0:i.__typename)){var s=r.VivaExam_StartExam.errors;(null==s?void 0:s.some((function(e){return"VivaExam_Retriable_Error"===e.__typename})))&&e<3?handleStartExam(e+1):V(!0)}})).catch((function(){V(!0)}))}()}),[r,q]);var B=n.split("@")[0];return Object(u.d)(l.Fragment,null,Object(u.d)(viva_exam_IntegrityCheckDialog,{open:r,setShowIntegrityCheckDialog:a,setShowIntegrityCheckChat:v,assignmentId:B,courseId:t}),g&&Object(u.d)(C.a,{onDismiss:function(){v(!1),i()},totalQuestionsCount:S,startExamLoading:M,firstQuestion:w,vivaExamSessionId:x,hasErrorFromInitialQuestionAPI:D,assignmentId:n,courseId:t,refetchAssignmentSubmissionData:o,vivaExamSettings:c}))}},N9VI:function(module,exports,e){e("+GGL")},Nfse:function(module,exports,e){e("SHoU")},NxPu:function(module,e,t){"use strict";t.d(e,"b",(function(){return getImageUploadOptions}));function getImageUploadOptions(e,t){return{context:{courseId:e,itemId:t},pendingAssetCreation:{assetType:"image",typeName:"pending",tags:[]},assetCreationUrl:"/api/onDemandPeerAssetCreationAttempts.v1"}}e.a={getImageUploadOptions:getImageUploadOptions}},PcyD:function(module,exports){var e={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"StartVivaExamMutation"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"courseId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignmentId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"assignmentType"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"VivaExam_AssignmentType"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"VivaExam_StartExam"},arguments:[{kind:"Argument",name:{kind:"Name",value:"input"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"courseId"},value:{kind:"Variable",name:{kind:"Name",value:"courseId"}}},{kind:"ObjectField",name:{kind:"Name",value:"assignmentId"},value:{kind:"Variable",name:{kind:"Name",value:"assignmentId"}}},{kind:"ObjectField",name:{kind:"Name",value:"assignmentType"},value:{kind:"Variable",name:{kind:"Name",value:"assignmentType"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VivaExam_StartExamSuccess"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"examSession"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"totalExpectedQuestions"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"questions"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"question"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"response"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"learnerFeedback"},arguments:[],directives:[]}]}}]}},{kind:"InlineFragment",typeCondition:{kind:"NamedType",name:{kind:"Name",value:"VivaExam_StartExamFailure"}},directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"errors"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"message"},arguments:[],directives:[]}]}}]}}]}}]}}],loc:{start:0,end:526}};e.loc.source={body:"mutation StartVivaExamMutation($courseId: ID!, $assignmentId: ID!, $assignmentType: VivaExam_AssignmentType!) {\n  VivaExam_StartExam(input: { courseId: $courseId, assignmentId: $assignmentId, assignmentType: $assignmentType }) {\n    ... on VivaExam_StartExamSuccess {\n      examSession {\n        id\n        totalExpectedQuestions\n        questions {\n          question\n          response\n        }\n        learnerFeedback\n      }\n    }\n    ... on VivaExam_StartExamFailure {\n      errors {\n        message\n      }\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};var t={};function findOperation(e,t){for(var n=0;n<e.definitions.length;n++){var i=e.definitions[n];if(i.name&&i.name.value==t)return i}}e.definitions.forEach((function(e){if(e.name){var n=new Set;!function collectFragmentReferences(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){collectFragmentReferences(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){collectFragmentReferences(e,t)})),e.definitions&&e.definitions.forEach((function(e){collectFragmentReferences(e,t)}))}(e,n),t[e.name.value]=n}})),module.exports=e,module.exports.StartVivaExamMutation=function(e,n){var i={kind:e.kind,definitions:[findOperation(e,n)]};e.hasOwnProperty("loc")&&(i.loc=e.loc);var r=t[n]||new Set,a=new Set,s=new Set;for(r.forEach((function(e){s.add(e)}));s.size>0;){var o=s;s=new Set,o.forEach((function(e){a.has(e)||(a.add(e),(t[e]||new Set).forEach((function(e){s.add(e)})))}))}return a.forEach((function(t){var n=findOperation(e,t);n&&i.definitions.push(n)})),i}(e,"StartVivaExamMutation")},QUzv:function(module,exports,e){e("iUdz")},Qo1F:function(module,exports,e){},SHoU:function(module,exports,e){},T8wf:function(module,e,t){"use strict";var n,i,r=t("VkAN"),a=t.n(r),s=t("OhL7"),o=(t("q1tI"),t("FdHa")),c={container:function(){return Object(s.c)(n||(n=a()(["\n    margin-bottom: var(--cds-spacing-300);\n    width: 100%;\n    border: solid var(--cds-color-neutral-stroke-primary-weak);\n\n    /* don't show the left border - individual cells will do so. */\n    border-width: 1px 1px 1px 0;\n\n    /* if smaller than desktop, show cells vertical instead of horizontal. */\n    "," {\n      display: block;\n\n      /* don't show bottom border - individual cells will do so. */\n      border-width: 1px 1px 0 1px;\n    }\n  "])),o.a.down("sm"))},containerColumn:function(){return Object(s.c)(i||(i=a()(["\n    display: grid;\n    grid-template-columns: repeat(2, minmax(0, 1fr));\n    grid-gap: 0;\n  "])))}};e.a=function(e){var t=e.fullWidth,n=e.children;return Object(s.d)("div",{className:"rc-SubmissionViewTable",css:[c.container,!t&&c.containerColumn]},n)}},TSlG:function(module,exports,e){e("nAcj")},Tqty:function(module,exports,e){e("x39J")},WMAa:function(module,exports,e){e("w2bJ")},WS07:function(module,exports,e){e("rRPC")},X129:function(module,exports,e){e("9ZYf")},Z6wk:function(module,exports,e){},Zr0k:function(module,e,t){"use strict";var n=t("RIqP"),i=t.n(n),r=t("fsL8"),a=t.n(r),s=t("yXPU"),o=t.n(s),c=t("Qp/S"),d=t("Ef0b"),u=t("uhR6"),l=t("v6sC"),m=Object(l.a)("/api/onDemandPeerSubmissionAttempts.v1",{type:"rest"}),startNewAttempt=function(e){var t=e.itemId,n=e.courseId;return m.post("",{data:{courseId:n,itemId:t}})},b=t("Q3zy"),p=t("5AUN"),g=t("Hk9X");t.d(e,"b",(function(){return SubmissionActions_localUpdateSubmission})),t.d(e,"a",(function(){return SubmissionActions_autoSaveSubmission})),t.d(e,"c",(function(){return SubmissionActions_saveSubmission})),t.d(e,"d",(function(){return f})),t.d(e,"f",(function(){return SubmissionActions_upgradeSubmission})),t.d(e,"e",(function(){return h}));var SubmissionActions_onSaveSuccess=function(e){return function(t){return e.dispatch(u.a.PEER_SUBMIT_UPDATE_ALERTS,{severity:"warning"}),e.dispatch(u.a.PEER_SUBMIT_UPDATE_LATEST_SUBMISSION_DRAFT,{latestSubmissionAndRelated:t}),e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SAVE_SUCCESS),t}},SubmissionActions_onSaveFailure=function(e){return function(t){if(t.responseJSON||t.status)return e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SAVE_ERROR,{statusCode:t.status,response:t.responseJSON}),null;throw t}},SubmissionActions_localUpdateSubmission=function(e,t){var n=t.submission;e.dispatch(u.a.PEER_SUBMIT_LOCAL_UPDATE_DRAFT_SUBMISSION,{submission:n})},v=function(){var e=o()(a()().mark((function _callee(e,t){var n,i,r,s;return a()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=t.isNewDraft,i=t.itemId,r=t.userId,s=t.courseId,n&&e.executeAction(d.b,{itemId:i,userId:r,courseId:s});case 2:case"end":return a.stop()}}),_callee)})));return function(t,n){return e.apply(this,arguments)}}(),SubmissionActions_updateSubmissionDraft=function(e){var t=e.userId,n=e.courseId,i=e.itemId,r=e.submission;if(null==r.versionedAssignmentId)throw new Error("Error saving draft submission: could not find existing assignment id");return b.c({userId:t,courseId:n,itemId:i,submissionDraftUpdate:{submission:{title:r.definition.title,parts:r.definition.parts},attachedAssignmentId:r.versionedAssignmentId}})},SubmissionActions_autoSaveSubmission=function(e,t){var n=t.userId,i=t.courseId,r=t.itemId,a=t.submission,s=t.isNewDraft,o=t.partnerId;return e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_AUTO_SAVING),SubmissionActions_updateSubmissionDraft({userId:n,courseId:i,itemId:r,submission:a}).then((function(e){return Object(g.d)(e)})).then(function(e){return function(t){return e.dispatch(u.a.PEER_SUBMIT_UPDATE_ALERTS,{severity:"warning"}),e.dispatch(u.a.PEER_SUBMIT_UPDATE_LATEST_SUBMISSION_DRAFT,{latestSubmissionAndRelated:t}),e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_AUTO_SAVE_SUCCESS),t}}(e),SubmissionActions_onSaveFailure(e)).then((function(t){return v(e,{userId:n,courseId:i,itemId:r,isNewDraft:s,partnerId:o}),t}))},SubmissionActions_saveSubmission=function(e,t){var n=t.userId,i=t.courseId,r=t.itemId,a=t.submission,s=t.isNewDraft,o=t.partnerId;return e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SAVING),SubmissionActions_updateSubmissionDraft({userId:n,courseId:i,itemId:r,submission:a}).then((function(e){return Object(g.d)(e)})).then(SubmissionActions_onSaveSuccess(e),SubmissionActions_onSaveFailure(e)).then((function(t){return v(e,{userId:n,courseId:i,itemId:r,isNewDraft:s,partnerId:o}),t}))},f=function(){var e=o()(a()().mark((function _callee2(e,t){var n,i,r,s;return a()().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=t.courseId,i=t.courseSlug,r=t.userId,s=t.itemId,e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SAVING),a.next=4,startNewAttempt({courseId:n,itemId:s});case 4:return e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SAVE_SUCCESS),a.abrupt("return",e.executeAction(d.d,{itemId:s,userId:r,courseId:n,courseSlug:i}));case 6:case"end":return a.stop()}}),_callee2)})));return function(t,n){return e.apply(this,arguments)}}(),SubmissionActions_upgradeSubmission=function(e,t){t.assignmentVersion;var n=t.forceUpgradeToAssignmentVersion,i=t.itemId,r=t.courseId,a=t.courseSlug,s=t.userId,o=t.submission;if(null==o.versionedAssignmentId)throw new Error("Error upgrading assignment: could not find existing assignment id");var c="".concat(o.versionedAssignmentId.split("@")[0],"@").concat(n);return b.a({userId:s,courseId:r,itemId:i,forceUpgradeToAssignmentId:c}).then((function(e){return Object(g.f)(e)})).then((function(e){return SubmissionActions_updateSubmissionDraft({itemId:i,submission:e,courseId:r,userId:s})})).then((function(e){return Object(g.d)(e)})).catch(SubmissionActions_onSaveFailure(e)).then((function(){return e.executeAction(d.d,{itemId:i,userId:s,courseId:r,courseSlug:a})}))},h=function submitSubmission(e,t){var n=t.itemId,r=t.submission,a=t.assignmentVersion,s=t.verifiableId,o=t.courseId,l=t.courseSlug,m=t.userId,b=t.gradingType,v=void 0===b?"HUMAN":b,f=t.skipVivaExam,h=Object(c.k)(o,n);return e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SUBMITTING),SubmissionActions_updateSubmissionDraft({itemId:n,submission:r,courseId:o,userId:m}).then((function(e){return Object(g.d)(e)})).then(SubmissionActions_onSaveSuccess(e),SubmissionActions_onSaveFailure(e)).then((function(e){var t=!1;e&&e.errorTree&&e.errorTree.errors&&(t=!![].concat(i()(e.errorTree.errors),i()(Object.keys(e.errorTree.children).reduce((function(t,n){return[].concat(i()(t),i()(e.errorTree.children[n].errors))}),[]))).some((function(e){return e.blocksSubmit})));if(t||!e)throw new Error("submit blocked by errors");return e})).then((function(e){return p.d({courseId:o,itemId:n,verifiableId:s,draftCreatedAt:e.submission.createdAt,gradingType:v})})).then((function(){return e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SUBMIT_SUCCESS),e.executeAction(d.d,{itemId:n,userId:m,courseId:o,courseSlug:l,forceRefresh:!h||f})})).catch((function(t){var i,c;(null==t?void 0:null===(i=t.responseJSON)||void 0===i?void 0:null===(c=i.errorCode)||void 0===c?void 0:c.includes("Learner or assignment is not eligible for AI grading"))&&"AI"===v?submitSubmission(e,{itemId:n,submission:r,assignmentVersion:a,verifiableId:s,courseId:o,courseSlug:l,userId:m,gradingType:"HUMAN",skipVivaExam:f}):e.dispatch(u.a.PEER_SUBMISSION_APP_STATE_SUBMIT_ERROR)}))}},awLj:function(module,exports,e){e("Z6wk")},c82m:function(module,exports,e){e("3w12")},fiqM:function(module,e,t){"use strict";var n,i,r,a,s=t("q1tI"),o=t("pVnL"),c=t.n(o),d=t("MnCE"),u=t("+ojs"),SvgInfo_SvgInfo=function(e){return s.createElement(u.a,c()({},e,{viewBox:"0 0 48 48"}),n||(n=s.createElement("title",null,"Info")),i||(i=s.createElement("path",{d:"M24,46 C11.869,46 2,36.131 2,24 C2,11.869 11.869,2 24,2 C36.131,2 46,11.869 46,24 C46,36.131 36.131,46 24,46 M24,0 C10.767,0 0,10.767 0,24 C0,37.233 10.767,48 24,48 C37.233,48 48,37.233 48,24 C48,10.767 37.233,0 24,0"})),r||(r=s.createElement("path",{d:"M24,16 C25.105,16 26,15.104 26,14 C26,12.896 25.105,12 24,12 C22.895,12 22,12.896 22,14 C22,15.104 22.895,16 24,16"})),a||(a=s.createElement("polygon",{points:"25.4962 20.0093 20.4962 20.0093 20.4962 22.0093 23.4962 22.0093 23.4962 34.0093 20.4962 34.0093 20.4962 36.0093 28.4962 36.0093 28.4962 34.0093 25.4962 34.0093"})))};(SvgInfo_SvgInfo=Object(d.i)(SvgInfo_SvgInfo)).displayName="SvgInfo";var l,m=SvgInfo_SvgInfo,b=(t("Nfse"),function(e){var t=e.translatedMsg;return(s.createElement("div",{className:"rc-LightNotification"},l||(l=s.createElement("div",{className:"icon"},s.createElement(m,{size:24,color:"white"}))),s.createElement("span",{className:"message"},t)))}),p=t("qC2T"),g=t.n(p);e.a=function(){return s.createElement(b,{translatedMsg:g()("Follow the instructions to complete this activity. Your grade will be updated after review by course staff.")})}},iUdz:function(module,exports,e){},jcHc:function(module,exports,e){e("oQxv")},kljU:function(module,exports,e){e("2RWD")},nAcj:function(module,exports,e){},nsyj:function(module,e,t){"use strict";var n,i,r,a=t("VbXa"),s=t.n(a),o=t("VkAN"),c=t.n(o),d=t("OhL7"),u=t("q1tI"),l=t("TSYQ"),m=t.n(l),b=t("l1rq"),p=t("Ev5W"),components_GitRepoView=function(e){var t=e.submissionPart;return(u.createElement(p.a,{repositoryId:t.gitRepositoryId,launchRole:t.launchRole,courseId:t.courseId,itemId:t.itemId,learnerUserId:t.submitterUserId}))},g=t("fiqM"),v=t("PNHL"),f=t("rlpc"),h=t("CLNb"),S=t("0OjG"),translation_TranslatedPlainTextView=function(e){var t=e.submissionPart,n=e.enableTranslation;return(u.createElement("span",{className:"rc-PlainTextView"},t.plainText&&u.createElement("p",{className:"body-1-text",style:{whiteSpace:"pre-line",wordWrap:"break-word"}},u.createElement(S.a,{plainText:t.plainText,enableTranslation:n}))))},I=t("UW5Q"),y=t("+t46"),translation_TranslatedRichTextView=function(e){var t=e.submissionPart,n=e.enableTranslation;return(u.createElement(I.a,null,u.createElement(y.a,{content:t.richText,assumeStringIsHtml:!0,enableTranslation:n})))},O=t("beC1"),w=t("yhVA"),j=t.n(w),k=(t("awLj"),{prompt:function(){return Object(d.c)(n||(n=c()(["\n    margin-bottom: var(--cds-spacing-300);\n    text-transform: uppercase;\n  "])))}}),C=function(e){function SubmissionPartView(){return e.apply(this,arguments)||this}s()(SubmissionPartView,e);var t=SubmissionPartView.prototype;return t.renderSpecificPart=function(){var e=this.props,t=e.submissionPart,n=e.showAutoSubmittedNote,r=e.enableTranslation;if(!t)return null;switch(t.typeName){case"plainText":return Object(d.d)(translation_TranslatedPlainTextView,{submissionPart:t.definition,enableTranslation:r});case"richText":return Object(d.d)(translation_TranslatedRichTextView,{submissionPart:t.definition,enableTranslation:r});case"url":return Object(d.d)(f.a,{submissionPart:t.definition});case"fileUpload":return Object(d.d)(v.a,{submissionPart:t.definition});case"offPlatform":return n&&(i||(i=Object(d.d)(g.a,null)));case"git":return Object(d.d)(components_GitRepoView,{submissionPart:t.definition});default:return null}},t.render=function(){var e=this.props,t=e.submissionSchemaPart,n=e.isInvalid,i=m()("rc-SubmissionPartView","bgcolor-white",{invalid:n});return Object(d.d)(h.a,null,Object(d.d)("div",{className:i},Object(d.d)(b.a,{component:"h3",variant:"subtitleMedium",css:k.prompt,"data-testid":"submission-part-title"},j()("Prompt")),Object(d.d)("div",{className:"prompt caption-text color-secondary-text"},Object(d.d)(O.a,{content:t.prompt,assumeStringIsHtml:!0})),Object(d.d)("div",{className:"body-1-text scrollable"},this.renderSpecificPart()),n&&(r||(r=Object(d.d)("div",{className:"body-2-text color-danger"},"Invalid submission part")))))},SubmissionPartView}(u.Component);C.defaultProps={isInvalid:!1,showAutoSubmittedNote:!1};e.a=C},o5Sl:function(module,e,t){"use strict";var n,i,r,a=t("J4zp"),s=t.n(a),o=t("q1tI"),c=t("MnCE"),d=t("8cuT"),u=t("BVC1"),l=t("vXr1"),m=t("gNwb"),b=t("KBPx"),p=t("3tO9"),g=t.n(p),v=t("VkAN"),f=t.n(v),h=t("OhL7"),S=t("sQ/U"),I=t("FdHa"),y=t("7NTc"),O=t("l1rq"),w=t("ZJgU"),j=t("mHyk"),k=t("pVnL"),C=t.n(k),A=t("VbXa"),E=t.n(A),P=t("17x9"),x=t.n(P),T=t("PStO"),N=t("Zr0k"),R=t("g0DA"),D=t("gO9+"),V=t("yhVA"),U=t.n(V),L={primaryButton:function(){return Object(h.c)(n||(n=f()(["\n    "," {\n      width: 100%;\n      max-width: none;\n    }\n  "])),I.a.down("xs"))},buttonText:Object(h.c)(i||(i=f()(["\n    height: 24px;\n  "]))),secondaryButton:function(){return Object(h.c)(r||(r=f()(["\n    margin: 0 var(--cds-spacing-300) 0;\n    "," {\n      width: 100%;\n      max-width: none;\n      margin: var(--cds-spacing-300) 0 0;\n    }\n  "])),I.a.down("xs"))}},G=Object(c.b)((function(e){return Object(c.b)(T.a.createContainer((function(){return{}})),(function(e){var t;return(t=function(t){function Wrapper(){return t.apply(this,arguments)||this}return E()(Wrapper,t),Wrapper.prototype.render=function(){return o.createElement(e,C()({},this.props,this.context))},Wrapper}(o.Component)).displayName="withFluxibleContextAsProps(".concat(e.displayName||e.name||"Component",")"),t.contextTypes={executeAction:x.a.func,executeMutation:x.a.func,getStore:x.a.func},t}))(e)}))((function(e){var t=e.handleCancel,n=e.executeAction,i=e.computedItem.id,r=e.courseId,a=e.courseSlug,c=e.submittedForAiGrading,d=y.a.HeadingGroup,u=y.a.Content,l=y.a.Actions,m=Object(o.useState)(!1),b=s()(m,2),p=b[0],v=b[1],f=Object(R.b)().peerReviewEventingV3Data,I=g()({button:{name:D.a.START_NEW_ATTEMPT}},f);return Object(h.d)(y.a,{"aria-describedby":"dialog-content",open:!0,onClose:t},Object(h.d)(d,null,U()("Ready to start a new attempt?")),Object(h.d)(u,{id:"dialog-content"},Object(h.d)(O.a,{variant:"bodyPrimary",component:"p"},c&&U()("Your new attempt will clear your previous submission and AI grade. If you cancel and don't attempt again, what you've submitted will count towards your final grade."),!c&&U()("Your new attempt will clear your previous submission and peer review feedback. If you cancel and don't attempt again, what you've submitted will count towards your final grade."))),Object(h.d)(l,null,Object(h.d)(j.a,{css:L.primaryButton,disabled:p,size:"medium",variant:"primary",onClick:function(){var e=Object(S.b)().id;v(!0),n(N.d,{itemId:i,userId:e,courseId:r,courseSlug:a})},"aria-label":U()("Continue"),trackingData:I,noViewTracking:!0,loading:p},Object(h.d)("span",{css:L.buttonText,"aria-hidden":!0},U()("Continue"))),Object(h.d)(w.a,{css:L.secondaryButton,size:"medium",variant:"secondary",onClick:t,disabled:p},U()("Cancel"))))}));e.a=Object(c.b)(Object(d.a)(["PeerPermissionsAndProgressesStore","CourseStore","PeerSubmissionAppStateStore","PeerViewSubmissionStore"],(function(e){var t,n,i,r,a,s,o=e.PeerPermissionsAndProgressesStore,c=e.CourseStore,d=e.PeerSubmissionAppStateStore,u=e.PeerViewSubmissionStore,l="loaded"===o.getState().loadState,m=!(null!==(t=o.getState().submissionProgress)&&void 0!==t&&t.latestAttemptSummary),b=null===(n=o.getState().submissionProgress)||void 0===n?void 0:null===(i=n.latestAttemptSummary)||void 0===i?void 0:i.remainingAttempts,p="AI"===(null===(r=u.getState().submissionAndRelated)||void 0===r?void 0:r.submission.gradingType);return{hasLoaded:l,canDelete:((null===(a=o.getState())||void 0===a?void 0:a.capabilities)||[]).includes("deleteSubmission"),courseId:c.getCourseId(),courseSlug:c.getCourseSlug(),canStartNewAttempt:m||!!b&&b>0,startAttemptState:null===(s=d.getState())||void 0===s?void 0:s.saveState,submittedForAiGrading:p}})))((function(e){var t=e.hasLoaded,n=e.canDelete,i=e.computedItem,r=e.courseId,a=e.courseSlug,c=e.canStartNewAttempt,d=e.startAttemptState,p=e.buttonSize,g=void 0===p?"small":p,v=e.submittedForAiGrading,f=Object(l.b)(),h=Object(o.useState)(!1),S=s()(h,2),I=S[0],y=S[1],O=Object(b.a)(d),w=Object(o.useCallback)((function(){y(!1)}),[]);return Object(o.useEffect)((function(){t&&"saving"===O&&"ready"===d&&(f.push(u.a.join(i.resourcePath,"submit")),w())}),[t,i.resourcePath,d,O,f,w]),t?o.createElement(o.Fragment,null,o.createElement(m.a,{variant:"secondary",disabled:!n||!c||i.isReadOnlyAfterSessionEnd,onClick:function(){y(!0)},trackingName:"reattempt_project_submission",size:g},U()("Start new attempt")),I&&o.createElement(G,{computedItem:i,courseId:r,courseSlug:a,handleCancel:w,submittedForAiGrading:v})):null}))},oQxv:function(module,exports,e){},qPyB:function(module,e,t){"use strict";var n=t("VbXa"),i=t.n(n),r=t("q1tI"),a=t("eJMc"),s=t.n(a),o=t("v6sC"),c=t("BVC1"),d=t("sQ/U"),u=t("hbUA"),l=t("yhVA"),m=t.n(l),b=Object(o.a)("/api/onDemandPeerSubmissions.v1",{type:"rest"}),p=function(e){function PeerItemShareableLink(){for(var t,n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))||this).state={showLink:!1},t}i()(PeerItemShareableLink,e);var t=PeerItemShareableLink.prototype;return t.componentDidMount=function(){var e=this,t=this.props.computedItem;b.post("?action=disableUrlSharing&userId=".concat(Object(d.b)().id,"&courseId=").concat(t.courseId),{data:{}}).then((function(t){!1===t&&e.setState({showLink:!0})}))},t.render=function(){var e=this.props,t=e.computedItem,n=e.submissionId,i=this.state.showLink;if(Object(u.w)(t)||!i)return null;var a=c.a.join([t.resourcePath,"review",n]);return(r.createElement(s.a,{to:a,className:"rc-PeerItemShareableLink"},m()("Shareable Link")))},PeerItemShareableLink}(r.Component);e.a=p},rDgo:function(module,e,t){"use strict";var n=t("welz"),i=t.n(n).a.Model.extend({});e.a=i},rRPC:function(module,exports,e){},w2bJ:function(module,exports,e){},x39J:function(module,exports,e){},zxx9:function(module,e,t){"use strict";var n,i=t("VbXa"),r=t.n(i),a=t("VkAN"),s=t.n(a),o=t("OhL7"),c=t("q1tI"),d=t("dcEN"),u=t.n(d),l=t("17x9"),m=t.n(l),b=t("kvW3"),p=t("yhVA"),g=t.n(p),v=(t("N9VI"),{clearfix:Object(o.c)(n||(n=s()(["\n    ::before,\n    ::after {\n      content: ' ';\n      display: table;\n    }\n\n    ::after {\n      clear: both;\n    }\n  "])))}),f=function(e){function MySubmissionHeader(){return e.apply(this,arguments)||this}return r()(MySubmissionHeader,e),MySubmissionHeader.prototype.render=function(){var e=this.props,t=e.title,n=e.createdAt,i=e.shareableLink;return Object(o.d)("div",{css:v.clearfix,className:"rc-MySubmissionHeader"},Object(o.d)("div",{className:"headline-4-text"},t),Object(o.d)("div",{className:"horizontal-box"},!!n&&Object(o.d)("div",{className:"caption-text color-secondary-text"},Object(o.d)(b.b,{message:g()("Submitted on {creatorName}"),creatorName:u()(n).format("LL")})),i&&Object(o.d)("div",{className:"flex-1 align-right caption-text"},i)))},MySubmissionHeader}(c.Component);f.propTypes={title:m.a.string.isRequired,createdAt:m.a.number,shareableLink:m.a.element},e.a=f}}]);
//# sourceMappingURL=35.422fbd9dec6d5b055e6a.js.map